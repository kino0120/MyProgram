if (self.CavalryLogger) { CavalryLogger.start_js(["DSUcr"]); }

__d("FBRTCParticipantCallState",[],(function(a,b,c,d,e,f){e.exports={UNKNOWN:0,DISCONNECTED:1,NO_ANSWER:2,REJECTED:3,UNREACHABLE:4,CONNECTION_DROPPED:5,CONTACTING:6,RINGING:7,CONNECTING:8,CONNECTED:9,PARTICIPANT_LIMIT_REACHED:10,IN_ANOTHER_CALL:11,RING_TYPE_UNSUPPORTED:12}}),null);
__d("MessengerView",[],(function(a,b,c,d,e,f){e.exports={DETAIL:{COMPOSE:"detail/compose",THREAD:"detail/thread",PAYTHREAD:"detail/paythread",PAYFRIENDPICKER:"detail/payfriendpicker"},MASTER:{PAYMENT:"master/payment",PEOPLE:"master/people",RECENT:"master/recent",SEE_ALL_GROUPS:"master/sagroups",SEE_ALL_PAGES:"master/sapages",SEE_ALL_PEOPLE:"master/sapeople",SEARCH:"master/search",SUPPORT:"master/support"}}}),null);
__d("wrapNullableForReact",[],(function(a,b,c,d,e,f){"use strict";function a(a){if(a!=null)return a;else return void 0}e.exports=a}),null);
__d("PhotoResizeMath",[],(function(a,b,c,d,e,f){a={getScaledPhotoDimensions:function(a,b,c,d,e){var f=a/b,g=c/d;if(c&&d&&e==="stretch")return{width:c,height:d};if(!c&&d||e==="contain"!==f>=g)return{width:d*f,height:d};return c?{width:c,height:c/f}:{width:a,height:b}}};e.exports=a}),null);
__d("PixelzFocus",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={search:function(a,b){__p&&__p();var c=0,d=a.length-1;while(c<=d){var e=c+Math.floor((d-c)/2),f=a[e];if(f>b)d=e-1;else if(f<b)c=e+1;else return e}return Math.min(c,d)},forceSpecificPoint:function(a,b,c){var d=1e-9;d=g.search(a,b-c-d)+1;b=g.search(a,b+c);return a.slice(d,b+1)},findBiggestSets:function(a,b){var c=[],d=-1;for(var e=0;e<a.length;++e){var f=a[e],h=e;f=g.search(a,f+b);var i=f-h;i>d&&(c=[]);i>=d&&(d=i,c.push({low:h,high:f}))}return c},getBestSet:function(a,b,c){var d=-1,e=null;for(var f=0;f<b.length;++f){var g=b[f],h=a[g.low],i=a[g.high],j=h+(i-h)/2;h=Math.min(h-(j-c),j+c-i);h>d&&(d=h,e=g)}return e},getFocusFromSet:function(a,b){var c=a[b.low];a=a[b.high];return c+(a-c)/2},clampFocus:function(a,b){var c=b/2;b=1-b/2;if(a<c)return c;return a>b?b:a},convertFromCenterToCSS:function(a,b){return Math.abs(1-b)<1e-5?0:(a-b/2)/(1-b)},convertFromCSSToCenter:function(a,b){return a*(1-b)+b/2},getVisible:function(a,b){return a<b?a/b:b/a},getHidden:function(a,b){return 1-g.getVisible(a,b)},focusHorizontally:function(a,b){return a<b},convertVectorFromCenterToCSS:function(a,b,c){var d=g.focusHorizontally(b,c),e;d?e=a.x/100:e=a.x/100;a=g.convertFromCenterToCSS(e,g.getVisible(b,c));if(d)return{x:a,y:0};else return{x:0,y:a}},getCropRect:function(a,b,c){var d=g.focusHorizontally(b,c);b=g.getVisible(b,c);if(d){c=(1-b)*a.x;return{left:c,top:0,width:b,height:1}}else{d=(1-b)*a.y;return{left:0,top:d,width:1,height:b}}}};e.exports=g}),null);
__d("loadImage",["Promise"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b){var c=new Image();c.onload=function(){b(c.width,c.height,c)};c.src=a}a.loadImagePromise=function(a){return new(b("Promise"))(function(b,c){var d=new Image();d.onerror=c;d.onload=function(){return b(d)};d.src=a})};e.exports=a}),null);
__d("Pixelz.react",["cx","PhotoResizeMath","PixelzFocus","React","joinClasses","loadImage"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;c=b("React").createClass({displayName:"Pixelz",propTypes:{width:a.number,height:a.number,resizeMode:a.oneOf(["contain","cover","stretch"]),alt:a.string,letterbox:a.bool,borderRadius:a.number,insetBorderColor:a.string,animated:a.bool,upscale:a.bool,cropRect:function(a,b,c){a=a[b];b="Invalid prop `"+b+"` supplied to `"+c+"`, expected a rectangle with values normalized between 0 and 1.";if(a.left<0||a.top<0||a.width<0||a.height<0||a.left+a.width>1||a.top+a.height>1)return new Error(b)},focus:function(a,b,c){__p&&__p();a=a[b];b="Invalid prop `"+b+"` supplied to `"+c+"`, expected either a {x, y, type} vector where type is `css` or `center` or an array of {x, y} vectors. All the vectors have with values normalized between 0 and 1.";if(Array.isArray(a)){for(var c=0;c<a.length;++c)if(!(a[c].x>=0&&a[c].x<=1)||!(a[c].y>=0&&a[c].y<=1))return new Error(b)}else{a.type||(a.type="css");if(!(a.x>=0&&a.x<=1)||!(a.y>=0&&a.y<=1)||!["center","css"].includes(a.type))return new Error(b)}}},getDefaultProps:function(){return{resizeMode:"cover",alt:"",letterbox:!0,upscale:!0,cropRect:{width:1,height:1,top:0,left:0},focus:{x:.5,y:.5,type:"css"}}},getInitialState:function(){return{srcDimensions:{}}},getSrcDimensions:function(){var a=this.props.src,c=this.state.srcDimensions[a];if(c)return c;b("loadImage")(a,function(b,c){var d={};d[a]={width:b,height:c};this.isMounted()&&this.setState({srcDimensions:d})}.bind(this));return null},getCropSrcDimensions:function(){var a=this.getSrcDimensions();return{width:a.width*this.props.cropRect.width,height:a.height*this.props.cropRect.height}},getUpscaleCropDimensions:function(){var a=this.getCropSrcDimensions();return b("PhotoResizeMath").getScaledPhotoDimensions(a.width,a.height,this.props.width,this.props.height,this.props.resizeMode)},getCropDimensions:function(){var a=this.getUpscaleCropDimensions(),b=this.getCropSrcDimensions();return!this.props.upscale?{width:Math.min(a.width,b.width),height:Math.min(a.height,b.height)}:a},getCropAspectRatio:function(){var a=this.getCropDimensions();return a.width/a.height},getContainerDimensions:function(){return this.props.letterbox&&this.props.width&&this.props.height?{width:this.props.width,height:this.props.height}:this.getCropDimensions()},getContainerAspectRatio:function(){var a=this.getContainerDimensions();return a.width/a.height},getContainerPosition:function(){return{left:0,top:0}},getFocus:function(){__p&&__p();var a=this.props.focus;if(!Array.isArray(a)&&a.type==="css")return{x:a.x,y:a.y};var c=this.getContainerAspectRatio(),d=this.getCropAspectRatio(),e=b("PixelzFocus").getVisible(c,d),f=b("PixelzFocus").focusHorizontally(c,d);if(!Array.isArray(a))c=b("PixelzFocus").convertFromCenterToCSS(f?a.x:a.y,e);else{d=a.map(function(a){return f?a.x:a.y});d.sort();a=b("PixelzFocus").findBiggestSets(d,e);a=b("PixelzFocus").getBestSet(d,a,e);c=b("PixelzFocus").getFocusFromSet(d,a)}return{x:f?c:.5,y:f?.5:c}},getCropPosition:function(){var a=this.getCropDimensions(),b=this.getContainerDimensions(),c=this.getFocus();return{left:c.x*(b.width-a.width),top:c.y*(b.height-a.height)}},getScaleDimensions:function(){var a=this.getCropDimensions();return{width:a.width/this.props.cropRect.width,height:a.height/this.props.cropRect.height}},getScalePosition:function(){var a=this.getScaleDimensions();return{left:-a.width*this.props.cropRect.left,top:-a.height*this.props.cropRect.top}},getClipCropRectangle:function(){var a=this.getContainerDimensions(),b=this.getCropDimensions(),c=this.getContainerPosition(),d=this.getCropPosition(),e=Math.max(c.left,d.left),f=Math.max(c.top,d.top),g=Math.min(c.top+a.height,d.top+b.height);c=Math.min(c.left+a.width,d.left+b.width);return{left:e,top:f,width:c-e,height:g-f}},getClipCropPosition:function(){var a=this.getClipCropRectangle();return{left:a.left,top:a.top}},getClipCropDimensions:function(){var a=this.getClipCropRectangle();return{width:a.width,height:a.height}},getClipScalePosition:function(){var a=this.getScalePosition(),b=this.getClipCropPosition(),c=this.getCropPosition();return{left:a.left+(c.left-b.left),top:a.top+(c.top-b.top)}},getClipScaleDimensions:function(){return this.getScaleDimensions()},areDimensionsEqual:function(a,b){return a.width===b.width&&a.height===b.height},shouldAddAllNodesAndStyles:function(){return this.props.animated},hasCrop:function(){if(this.shouldAddAllNodesAndStyles())return!0;var a=this.getContainerDimensions(),b=this.getClipCropDimensions(),c=this.getClipScaleDimensions();return this.areDimensionsEqual(a,b)||this.areDimensionsEqual(b,c)?!1:!0},hasContainer:function(){if(this.shouldAddAllNodesAndStyles()||this.hasInsetBorder())return!0;var a=this.getContainerDimensions(),b=this.getClipScaleDimensions();return this.areDimensionsEqual(a,b)?!1:!0},hasInsetBorder:function(){return this.shouldAddAllNodesAndStyles()||this.props.insetBorderColor},applyPositionStyle:function(a,b){(this.shouldAddAllNodesAndStyles()||b.left)&&(a.left=Math.round(b.left)),(this.shouldAddAllNodesAndStyles()||b.top)&&(a.top=Math.round(b.top))},applyDimensionsStyle:function(a,b){a.width=Math.round(b.width),a.height=Math.round(b.height)},applyBorderRadiusStyle:function(a){(this.shouldAddAllNodesAndStyles()||this.props.borderRadius)&&(a.borderRadius=this.props.borderRadius||0)},getScaleStyle:function(){var a={},b=this.getClipCropDimensions(),c=this.getClipScaleDimensions();this.shouldAddAllNodesAndStyles()||!this.areDimensionsEqual(b,c)?this.applyPositionStyle(a,this.getClipScalePosition()):this.applyPositionStyle(a,this.getClipCropPosition());this.applyDimensionsStyle(a,this.getClipScaleDimensions());this.applyBorderRadiusStyle(a);return a},getCropStyle:function(){var a={};this.applyPositionStyle(a,this.getClipCropPosition());this.applyDimensionsStyle(a,this.getClipCropDimensions());this.applyBorderRadiusStyle(a);return a},getInsetBorderStyle:function(){var a={borderColor:this.props.insetBorderColor||"transparent"};this.applyPositionStyle(a,this.getClipCropPosition());this.applyDimensionsStyle(a,this.getClipCropDimensions());this.applyBorderRadiusStyle(a);return a},getContainerStyle:function(){var a={};this.applyDimensionsStyle(a,this.getContainerDimensions());this.applyBorderRadiusStyle(a);return a},getScale:function(){var a=this.getScaleStyle(),c=a.width,d=a.height;a=babelHelpers["extends"]({},a);delete a.width;delete a.height;return b("React").createElement("img",babelHelpers["extends"]({},this.props,{alt:this.props.alt,className:b("joinClasses")(this.props.className,"_56wb"+(this.shouldAddAllNodesAndStyles()?" _56t5":"")),src:this.props.src,style:babelHelpers["extends"]({},this.props.style||{},a),width:c,height:d}))},getCrop:function(){var a=this.getScale();return!this.hasCrop()?a:b("React").createElement("div",{className:"_56ma"+(this.shouldAddAllNodesAndStyles()?" _56t5":""),style:this.getCropStyle()},a)},getInsetBorder:function(){return!this.hasInsetBorder()?null:b("React").createElement("div",{className:"_56lv"+(this.shouldAddAllNodesAndStyles()?" _56t5":""),style:this.getInsetBorderStyle()})},getContainer:function(){var a=this.getCrop();if(!this.hasContainer())return a;var c=this.getInsetBorder();return b("React").createElement("div",{className:"_56jj"+(this.shouldAddAllNodesAndStyles()?" _56t5":""),"data-skipchecker":null,style:this.getContainerStyle()},a,c)},render:function(){var a=this.getSrcDimensions();return!a?b("React").createElement("span",{"data-skipchecker":null}):this.getContainer()}});e.exports=c}),null);
__d("FBRTCAvailability",["ChannelConstants","PresenceStatus"],(function(a,b,c,d,e,f){"use strict";a={isCallable:function(a){a=b("PresenceStatus").getCapabilities(a);var c=b("ChannelConstants").CAPABILITY_VOIP_INTEROP;return!!(a&c)}};e.exports=a}),null);
__d("FBRTCCallUIWrapper",["regeneratorRuntime","Bootloader","UserAgent","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=null,h={openGroupCallUI:function(a,c,d,e,f,h,i){return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:g=this._openWindow("Group Call"),b("Bootloader").loadModules(["FBRTCCallUI"],function(b){b.openGroupCallUI(a,c,d,e,f,h,g,i)},"FBRTCCallUIWrapper");case 2:case"end":return j.stop()}},null,this)},openGroupCallURI:function(a,c,d,e,f,h,i,j,k){return b("regeneratorRuntime").async(function(l){while(1)switch(l.prev=l.next){case 0:g=this._openWindow("Group Call"),b("Bootloader").loadModules(["FBRTCCallUI"],function(b){b.openGroupCallURI({conferenceName:a,callID:c,hasVideo:d,initializeVideo:e,serverInfoData:i,trigger:j,callSummary:k,callWindow:g,multiwayWwwTier:h,multiwayCoreTier:f})},"FBRTCCallUIWrapper");case 2:case"end":return l.stop()}},null,this)},openAsCaller:function(a,c,d,e){!g&&window.rtcCallChildWindow&&(g=window.rtcCallChildWindow,window.rtcCallChildWindow=null);if(this._shouldFocusCallWindow(a)){g&&g.focus();return}this._shouldCloseCallWindow()&&(g&&g.close());g=this._openWindow("Video Call",{isP2P:!0});b("Bootloader").loadModules(["FBRTCCallUI"],function(b){b.openAsCaller(a,c,d,e,g)},"FBRTCCallUIWrapper")},openAsCallee:function(a,c,d,e,f){g=this._openWindow("Video Call",{isP2P:!0}),b("Bootloader").loadModules(["FBRTCCallUI"],function(b){b.openAsCallee(a,c,d,e,g,f)},"FBRTCCallUIWrapper")},_shouldFocusCallWindow:function(a){return!!g&&!g.closed&&g.rtcCallInProgessWith===a},_shouldCloseCallWindow:function(){return!!g&&!g.closed&&!g.rtcCallInProgessWith},_openWindow:function(a,c){__p&&__p();c=c===void 0?{isP2P:!1}:c;c=c.isP2P;c=c===void 0?!1:c;c=this._windowPosition({isP2P:c});c=["menubar=no","location=no","scrollbars=no","status=no","personalbar=no",c.height,c.width,c.top,c.left].join(",");this._isSparkBrowser()&&(c="");b("gkx")("859726")&&b("Bootloader").loadModules(["RTWebUserActionLogger"],function(a){a.logCheckpoint({checkpoint:"rtc_www_new_tab"})},"FBRTCCallUIWrapper");a=b("gkx")("859726")?window.open("","_blank"):window.open("",a,c);window.callWindow=a;return a},_windowDimension:function(a){a=a.isP2P;var b=960,c=540;screen&&screen.width>1280&&(!a?(b=1100,c=772):(b=1280,c=720));return{height:c,width:b}},_windowPosition:function(a){__p&&__p();a=a.isP2P;a=a===void 0?!1:a;var b,c,d,e;a=h._windowDimension({isP2P:a});var f=a.height;a=a.width;window.innerWidth!==void 0?(c=window.innerWidth,b=window.innerHeight):(c=screen.width,b=screen.height);window.screenLeft!==void 0?(d=window.screenLeft,e=window.screenTop):(d=window.screenX,e=window.screenY);c=Math.floor(c/2-a/2+d);d=Math.floor(b/2-f/2+e);return{height:"height="+f.toString(),width:"width="+a.toString(),top:"top="+d.toString(),left:"left="+c.toString()}},_isSparkBrowser:function(){return b("UserAgent").isBrowser("Chrome < 34")&&b("UserAgent").isBrowser("Chrome > 33")}};e.exports=h}),null);
__d("RTWebLoggingComponent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({AUDIO_CALL:"audio_button",VIDEO_CALL:"video_button",START_CALL:"start_call_button",END_CALL:"end_call_button",JOIN_CALL:"join_call_button",CANCEL:"cancel_button",CALL_BACK:"call_back",CALL_AGAIN:"call_again",CHAT_PANEL_MESSAGE:"chat_panel_message",REDIAL:"redial",SCREENSHARING:"screensharing",SCREENSHARING_POP_OUT:"screensharing_pop_out_button",TOGGLE_VIDEO:"toggle_video",TOGGLE_AUDIO:"toggle_audio",TOGGLE_CHAT:"toggle_chat",CLOSE_CHAT:"close_chat",TOGGLE_FILTERS:"toggle_filters",SCROLL_FILTERS:"scroll_filters",VIDEO_FILTER_OPTION:"video_filter_option",ADD_PARTICIPANT:"add_participant",FULLSCREEN:"fullscreen",FULLSCREEN_ENABLE:"fullscreen_enable",FULLSCREEN_DISABLE:"fullscreen_disable",CLOSE_WINDOW:"close_window",ACCEPT:"accept_button",DECLINE:"decline_button",NOT_NOW:"rating_not_now",SELF_VIEW:"self_view",SELF_VIEW_MINIMIZE:"self_view_minimize",SELF_VIEW_UNMINIMIZE:"self_view_unminimize",PARTICIPANT_ROW_SELECT:"participant_row_select",PARTICIPANT_ROW_UNSELECT:"participant_row_unselect",STAR_RATING:"star_rating",SUBMIT_FEEDBACK:"submit_feedback",SETTINGS:"settings",CLOSE_DIALOG:"close_dialog",INCOMING_RING_TONE:"incoming_ring_tone",FREE_CALL:"free_call",VIDEO_ESCALATE:"video_escalate",VIDEO_ESCALATE_ACCEPT:"video_escalate_accept",VIDEO_ESCALATE_DECLINE:"video_escalate_decline",RECENT_CALLS:"recent_calls",MESSAGE:"message",SAVE:"save_button",WINDOW_RESIZE:"window_resize",POOR_NETWORK_TOOLTIP:"poor_network_tooltip",VIDEO_LAYOUT_SWITCH:"video_layout_switch",MWEB_ROSTER_ROW:"mweb_roster_row"})}),null);
__d("RTWebLoggingSurface",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CALL_CONTROLS:"call_controls",CHAT_PANEL:"chat_panel",CHAT_TAB:"chat_tab",MESSENGER_HEADER:"messenger_header",INCOMING_DIALOG:"incoming_call_dialog",CALL_HEADER:"call_header",GROUP_CALL_ADD_MEMBERS_DIALOG:"group_call_add_members_dialog",GROUP_CALL_PARTICIPANT_PICKER_DIALOG:"group_call_participant_picker_dialog",CALL_CONTAINER:"call_container",TIMELINE_TOP_SECTION:"timeline_top_section",DROPDOWN_CALL_MENU:"dropdown_call_menu",THREAD_LIST:"thread_list",DESKTOP_NOTIFICATION:"desktop_notification",AUDIO_FALLBACK_DIALOG:"audio_fallback_dialog",STAR_RATING_SURFACE:"star_rating_surface",MISSED_CALL_DIALOG:"missed_call_dialog",UNSUPPORTED_BROWSER_DIALOG:"unsupported_browser_dialog",ADMIN_MESSAGE:"admin_message",WORK_HOVERCARD:"work_hovercard",MESSENGER_BUBBLE:"messenger_bubble",CHAT_SIDEBAR:"chat_sidebar",SETTING_DIALOG:"setting_dialog",SCREENSHARING_POP_OUT:"screensharing_pop_out",MWEB_ROSTER_VIEW:"mweb_roster_view"})}),null);
__d("RTWebCallTriggerMapping",["RTWebLoggingComponent","RTWebLoggingSurface","deepFreezeValue"],(function(a,b,c,d,e,f){"use strict";a={chat_sidebar:{surface:b("RTWebLoggingSurface").CHAT_SIDEBAR,component:b("RTWebLoggingComponent").RECENT_CALLS},chattab_audio_button:{surface:b("RTWebLoggingSurface").CHAT_TAB,component:b("RTWebLoggingComponent").AUDIO_CALL},chattab_video_button:{surface:b("RTWebLoggingSurface").CHAT_TAB,component:b("RTWebLoggingComponent").VIDEO_CALL},messenger_bubble_free_call:{surface:b("RTWebLoggingSurface").MESSENGER_BUBBLE,component:b("RTWebLoggingComponent").FREE_CALL},messenger_dot_com_missed_call_dialog:{surface:b("RTWebLoggingSurface").MISSED_CALL_DIALOG,component:b("RTWebLoggingComponent").START_CALL},messenger_dot_com_video_call:{surface:b("RTWebLoggingSurface").MESSENGER_HEADER,component:b("RTWebLoggingComponent").VIDEO_CALL},messenger_dot_com_audio_call:{surface:b("RTWebLoggingSurface").MESSENGER_HEADER,component:b("RTWebLoggingComponent").AUDIO_CALL},timeline:{surface:b("RTWebLoggingSurface").DROPDOWN_CALL_MENU,component:b("RTWebLoggingComponent").START_CALL},messenger_dot_com_work_hovercard:{surface:b("RTWebLoggingSurface").WORK_HOVERCARD,component:b("RTWebLoggingComponent").START_CALL},admin_message:{surface:b("RTWebLoggingSurface").ADMIN_MESSAGE,component:b("RTWebLoggingComponent").START_CALL},return_call:{surface:b("RTWebLoggingSurface").MISSED_CALL_DIALOG,component:b("RTWebLoggingComponent").START_CALL},popup_start_call_button:{surface:b("RTWebLoggingSurface").CALL_CONTAINER,component:b("RTWebLoggingComponent").START_CALL},redial_button:{surface:b("RTWebLoggingSurface").CALL_CONTAINER,component:b("RTWebLoggingComponent").REDIAL}};b("deepFreezeValue")(a);e.exports=a}),null);
__d("RTWebLoggingCallType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({P2P:"p2p",MW:"mw",ESCALATED:"escalated"})}),null);
__d("RTCWebUserActionsDebugTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:RTCWebUserActionsDebugLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:RTCWebUserActionsDebugLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:RTCWebUserActionsDebugLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setCallID=function(a){this.$1.call_id=a;return this};c.setCallType=function(a){this.$1.call_type=a;return this};c.setCheckpoint=function(a){this.$1.checkpoint=a;return this};c.setClientTime=function(a){this.$1.client_time=a;return this};c.setCodebaseVersion=function(a){this.$1.codebase_version=a;return this};c.setComponent=function(a){this.$1.component=a;return this};c.setConferenceName=function(a){this.$1.conference_name=a;return this};c.setConferenceState=function(a){this.$1.conference_state=a;return this};c.setDeviceID=function(a){this.$1.device_id=a;return this};c.setErrorDomain=function(a){this.$1.error_domain=a;return this};c.setErrorType=function(a){this.$1.error_type=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setEventTimeElapsed=function(a){this.$1.event_time_elapsed=a;return this};c.setIsCaller=function(a){this.$1.is_caller=a;return this};c.setMediaType=function(a){this.$1.media_type=a;return this};c.setPage=function(a){this.$1.page=a;return this};c.setSurface=function(a){this.$1.surface=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={call_id:!0,call_type:!0,checkpoint:!0,client_time:!0,codebase_version:!0,component:!0,conference_name:!0,conference_state:!0,device_id:!0,error_domain:!0,error_type:!0,event:!0,event_time_elapsed:!0,is_caller:!0,media_type:!0,page:!0,surface:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("RTCWebUserActionsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:RTCWebUserActionsLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:RTCWebUserActionsLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:RTCWebUserActionsLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setCallID=function(a){this.$1.call_id=a;return this};c.setCallType=function(a){this.$1.call_type=a;return this};c.setCheckpoint=function(a){this.$1.checkpoint=a;return this};c.setClientTime=function(a){this.$1.client_time=a;return this};c.setCodebaseVersion=function(a){this.$1.codebase_version=a;return this};c.setComponent=function(a){this.$1.component=a;return this};c.setConferenceName=function(a){this.$1.conference_name=a;return this};c.setConferenceState=function(a){this.$1.conference_state=a;return this};c.setDeviceID=function(a){this.$1.device_id=a;return this};c.setErrorDomain=function(a){this.$1.error_domain=a;return this};c.setErrorType=function(a){this.$1.error_type=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setEventTimeElapsed=function(a){this.$1.event_time_elapsed=a;return this};c.setIsCaller=function(a){this.$1.is_caller=a;return this};c.setMediaType=function(a){this.$1.media_type=a;return this};c.setPage=function(a){this.$1.page=a;return this};c.setSurface=function(a){this.$1.surface=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={call_id:!0,call_type:!0,checkpoint:!0,client_time:!0,codebase_version:!0,component:!0,conference_name:!0,conference_state:!0,device_id:!0,error_domain:!0,error_type:!0,event:!0,event_time_elapsed:!0,is_caller:!0,media_type:!0,page:!0,surface:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("RTWebLoggingEvent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({TAP:"tap",IMPRESSION:"impression",ERROR:"error",RING_TONE_PLAYED:"ring_tone_played",CHECKPOINT:"checkpoint"})}),null);
__d("RTWebLoggingMediaType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({VIDEO:"video",AUDIO:"audio",ESCALATED:"escalated"})}),null);
__d("RTWebLoggingPage",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({MESSENGER_DOT_COM:"messenger_dot_com",FACEBOOK:"facebook",MOBILE_WEB:"mweb",WORKPLACE:"workplace"})}),null);
__d("RTWebUserActionLogger",["CurrentUser","FBRTCConsoleLogger","FBRTCSupport","RTCWebUserActionsDebugTypedLogger","RTCWebUserActionsTypedLogger","RTWebLoggingCallType","RTWebLoggingComponent","RTWebLoggingEvent","RTWebLoggingMediaType","RTWebLoggingPage","RTWebLoggingSharedInstance","immutable","performanceNow"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("immutable").Map;a=function(){__p&&__p();function a(){this.$2=g(),this.$3=new Set(),this.$4=new Set(),this.$5=b("RTWebLoggingSharedInstance").getInstance().getDeviceID(),this.$6=this.$7(),this.clearCache()}var c=a.prototype;c.clearCache=function(){this.$1={callID:void 0,callType:void 0,mediaType:void 0,conferenceName:void 0,conferenceState:void 0}};c.logImpression=function(a){this.logEvent(babelHelpers["extends"]({eventName:b("RTWebLoggingEvent").IMPRESSION},a))};c.logPreCallImpression=function(a){this.clearCache(),this.logImpression(a)};c.logPreCallClick=function(a){this.clearCache(),this.logClick(a)};c.logClick=function(a){this.logEvent(babelHelpers["extends"]({eventName:b("RTWebLoggingEvent").TAP},a))};c.logError=function(a){this.logEvent(babelHelpers["extends"]({eventName:b("RTWebLoggingEvent").ERROR},a))};c.startTimer=function(a){var c=b("performanceNow")();this.$2=this.$2.set(a,c);this.logCheckpoint({checkpoint:a+"_timerStart"});this.$8(a,{startTime:c})};c.logStopTimer=function(a){var b=a.checkpointName===void 0?a.timerName:a.checkpointName,c=a.event||{};c.timeElapsed=this.$9(a.timerName);this.logCheckpoint(babelHelpers["extends"]({checkpoint:b+"_timerEnd"},c));return c.timeElapsed};c.logCheckpoint=function(a){this.logEvent(babelHelpers["extends"]({eventName:b("RTWebLoggingEvent").CHECKPOINT},a))};c.$10=function(a){return a===null||a===void 0};c.logEvent=function(a){__p&&__p();var b=this.$1;b.callID=this.$10(a.callID)?b.callID:a.callID;b.callType=a.callType||b.callType;b.conferenceState=a.conferenceState||b.conferenceState;b.conferenceName=this.$10(a.conferenceName)?b.conferenceName:a.conferenceName;b.isCaller=a.isCaller==null?b.isCaller:a.isCaller;b.mediaType=a.mediaType||b.mediaType;this.$11(a,b);b=this.$12(a,b);this.$8(a.eventName,b)};c.$12=function(a,c){var d=new(b("RTCWebUserActionsTypedLogger"))();d.setCallType(c.callType).setDeviceID(this.$5).setClientTime(Date.now()).setErrorDomain(a.errorDomain).setErrorType(a.errorType).setComponent(a.component).setConferenceState(c.conferenceState).setEvent(a.eventName).setMediaType(c.mediaType).setPage(this.$6).setCallID(c.callID).setConferenceName(c.conferenceName).setSurface(a.surface).setCheckpoint(a.checkpoint).setEventTimeElapsed(a.timeElapsed).setIsCaller(c.isCaller).setCodebaseVersion("Old Codebase").log();return d.getData()};c.$11=function(a,c){var d=new(b("RTCWebUserActionsDebugTypedLogger"))();d.setCallType(c.callType).setDeviceID(this.$5).setClientTime(Date.now()).setErrorDomain(a.errorDomain).setErrorType(a.errorType).setComponent(a.component).setConferenceState(c.conferenceState).setEvent(a.eventName).setMediaType(c.mediaType).setPage(this.$6).setCallID(c.callID).setConferenceName(c.conferenceName).setSurface(a.surface).setCheckpoint(a.checkpoint).setEventTimeElapsed(a.timeElapsed).setIsCaller(c.isCaller).setCodebaseVersion("Old Codebase").log();return d.getData()};c.getCallType=function(a,c){c===void 0&&(c=!1);if(a===null||a===void 0)return null;if(a)return b("RTWebLoggingCallType").MW;else if(c)return b("RTWebLoggingCallType").ESCALATED;else return b("RTWebLoggingCallType").P2P};c.getAudioVideoComponent=function(a){return a===null||a===void 0?null:a?b("RTWebLoggingComponent").AUDIO_CALL:b("RTWebLoggingComponent").VIDEO_CALL};c.getMediaType=function(a,c){c===void 0&&(c=!1);if(c)return b("RTWebLoggingMediaType").ESCALATED;else if(a)return b("RTWebLoggingMediaType").AUDIO;else return b("RTWebLoggingMediaType").VIDEO};c.logErrorOnceforDomain=function(a,b){this.$3.has(a)||(this.$3.add(a),this.logError({errorDomain:a,errorType:b.toString()}))};c.logCheckpointOnceForDomain=function(a){var b=a.checkpoint;this.$4.has(b)||(this.$4.add(b),this.logCheckpoint(a))};c.clearLoggedDomains=function(){this.$3.clear(),this.$4.clear()};c.getWebLoggerInfoFromStore=function(a){a=a.callInfo;var b=a.callID,c=a.conferenceName;a=a.conferenceState;return{callID:b,conferenceName:c,conferenceState:a}};c.$7=function(){__p&&__p();if(b("FBRTCSupport").isMobileDevice())return b("RTWebLoggingPage").MOBILE_WEB;else if(b("CurrentUser").isWorkUser())return b("RTWebLoggingPage").WORKPLACE;var a=window.location.hostname;if(a.search("facebook")!==-1)return b("RTWebLoggingPage").FACEBOOK;else if(a.search("messenger")!==-1)return b("RTWebLoggingPage").MESSENGER_DOT_COM;return a};c.$9=function(a){var c=this.$2.get(a);if(c){this.$2=this.$2.remove(a);return parseInt(b("performanceNow")()-c,10)}return null};c.$8=function(a,c){a=a==null?"null":a;b("FBRTCConsoleLogger").getInstance().getLogHistory().log(a,JSON.stringify(c))};return a}();e.exports=new a()}),null);
__d("generateRTCCallID",["randomInt"],(function(a,b,c,d,e,f){"use strict";function a(){return b("randomInt")(0,4294967294)+1}e.exports=a}),null);
__d("FBRTCCore",["invariant","Bootloader","FBLogger","FBRTCAvailability","FBRTCCallUIWrapper","FBRTCSupport","RTWebCallTriggerMapping","RTWebLoggingCallType","RTWebUserActionLogger","generateRTCCallID","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=!1;a={startOutgoingCall:function(a,c,d,e){__p&&__p();e===void 0&&(e=!1);/\D/.test(a)&&g(0,2478);var f=b("generateRTCCallID")(),i=b("RTWebCallTriggerMapping")[c];(i===null||i===void 0)&&b("FBLogger")("rtweb").mustfix("Unexpected or unknown call trigger: %s",c);b("RTWebUserActionLogger").logPreCallClick(babelHelpers["extends"]({},i,{callID:f.toString(),mediaType:b("RTWebUserActionLogger").getMediaType(d),callType:b("RTWebLoggingCallType").P2P}));if(h)return;h=!0;b("setTimeout")(function(){h=!1},1e3);e&&!b("FBRTCSupport").isCollabSupported()?b("Bootloader").loadModules(["FBRTCUnsupportedBrowserMessage","CollabMessengerLogger"],function(b,c){b.showForUnsupportedCollabCall(),c.logBrowserNotSupported({peerID:a})},"FBRTCCore"):!b("FBRTCSupport").isWebrtcSupported()?b("Bootloader").loadModules(["FBRTCUnsupportedBrowserMessage"],function(a){a.showForOutgoingCall(),b("RTWebUserActionLogger").logError({callID:f.toString(),callType:b("RTWebLoggingCallType").P2P,mediaType:b("RTWebUserActionLogger").getMediaType(d),errorDomain:"unsupported browser"})},"FBRTCCore"):b("FBRTCCallUIWrapper").openAsCaller(a,f,c,d)},startGroupCall:function(a){__p&&__p();var c=a.conferenceName,d=a.hasVideo,e=a.serverInfoData,f=a.trigger;a=a.usersToRing;a=a===void 0?[]:a;if(h)return;h=!0;b("setTimeout")(function(){h=!1},1e3);if(!b("FBRTCSupport").isGroupCallWebtrcSupported()){b("Bootloader").loadModules(["MessengerRTCUnsupportedBrowserDialogController"],function(a){b("RTWebUserActionLogger").logError({callType:b("RTWebLoggingCallType").MW,conferenceName:c,mediaType:b("RTWebUserActionLogger").getMediaType(!d),errorDomain:"unsupported browser"}),a.render({hasVideo:d,isGroupCall:!0})},"FBRTCCore");return}b("FBRTCCallUIWrapper").openGroupCallUI(c,b("generateRTCCallID")(),a,d,d,f,e)},isAvailableForWebrtcCalling:function(a){return b("FBRTCAvailability").isCallable(a)}};e.exports=a}),null);
__d("RTWebStrings",["fbt"],(function(a,b,c,d,e,f,g){"use strict";a={busy:g._("\u53d6\u308a\u8fbc\u307f\u4e2d"),callAgain:g._("\u304b\u3051\u76f4\u3059"),callEnded:g._("\u901a\u8a71\u7d42\u4e86"),callFailed:g._("\u901a\u8a71\u7d42\u4e86"),callInterrupted:g._("\u901a\u8a71\u304c\u4e2d\u65ad\u3057\u307e\u3057\u305f"),cannotConnect:g._("\u901a\u8a71\u63a5\u7d9a\u3067\u304d\u307e\u305b\u3093"),chatLinksLeftVideoChat:g._("\u30b0\u30eb\u30fc\u30d7\u30d3\u30c7\u30aa\u30c1\u30e3\u30c3\u30c8\u3092\u9000\u51fa\u3057\u307e\u3057\u305f"),clientEncryptionError:g._("\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306e\u6697\u53f7\u5316\u30a8\u30e9\u30fc"),close:g._("\u9589\u3058\u308b"),connected:g._("\u63a5\u7d9a\u6e08\u307f"),connecting:g._("\u63a5\u7d9a\u4e2d\u2026"),connectionDropped:g._("\u63a5\u7d9a\u5207\u65ad"),connectionLost:g._("\u63a5\u7d9a\u304c\u5207\u65ad\u3055\u308c\u307e\u3057\u305f"),contacting:g._("\u547c\u3073\u51fa\u3057\u4e2d\u2026"),copiedVideoChatLink:g._("\u30b3\u30d4\u30fc\u3055\u308c\u307e\u3057\u305f"),copyVideoChatLink:g._("\u30d3\u30c7\u30aa\u30c1\u30e3\u30c3\u30c8\u30ea\u30f3\u30af\u3092\u30b3\u30d4\u30fc"),disconnected:g._("\u63a5\u7d9a\u3055\u308c\u3066\u3044\u307e\u305b\u3093"),dismiss:g._("\u9589\u3058\u308b"),hangingUp:g._("\u901a\u8a71\u7d42\u4e86\u4e2d\u2026"),inactive:g._("\u901a\u8a71\u306f\u30aa\u30d5\u30e9\u30a4\u30f3\u3067\u3059"),inAnotherCall:g._("\u8a71\u3057\u4e2d"),incomingVideoChat:g._("\u30d3\u30c7\u30aa\u30c1\u30e3\u30c3\u30c8\u7740\u4fe1\u4e2d"),invalidStreamConfiguration:g._("\u30eb\u30fc\u30e0\u306b\u63a5\u7d9a\u3057\u3066\u3044\u308b\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304c\u591a\u3059\u304e\u307e\u3059"),noAnswer:g._("\u5fdc\u7b54\u306a\u3057"),notNow:g._("\u5f8c\u3067"),participantLimitReached:g._("\u53c2\u52a0\u8005\u6570\u304c\u4e0a\u9650\u306b\u9054\u3057\u307e\u3057\u305f"),pleaseWait:g._("\u3057\u3070\u3089\u304f\u304a\u5f85\u3061\u304f\u3060\u3055\u3044"),profilePictureAlt:g._("\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u5199\u771f"),reconnecting:g._("\u518d\u63a5\u7d9a\u4e2d\u3067\u3059..."),redial:g._("\u30ea\u30c0\u30a4\u30e4\u30eb"),ringing:g._("\u547c\u3073\u51fa\u3057\u4e2d\u2026"),switchToWiFi:g._("\u901a\u8a71\u3059\u308b\u306b\u306fWi-Fi\u306b\u5207\u308a\u66ff\u3048\u3066\u304f\u3060\u3055\u3044"),unreachable:g._("\u901a\u8a71\u3067\u304d\u307e\u305b\u3093"),userVideoOff:function(a){return g._("{name}\u3055\u3093\u306e\u30ab\u30e1\u30e9\u306f\u30aa\u30d5\u3067\u3059",[g._param("name",a)])},viewerVideoOff:g._("\u30ab\u30e1\u30e9\u306f\u30aa\u30d5\u3067\u3059"),waitingForOthers:g._("\u4ed6\u306e\u4eba\u306e\u53c2\u52a0\u5f85\u3061\u3067\u3059...")};e.exports=a}),null);
__d("RTCUserRecord",["immutable"],(function(a,b,c,d,e,f){"use strict";a=b("immutable").Record({FBID:"UNDEFINED",isGuestUser:!1,isMessengerUser:!1,isPartiesUser:!1,lastConnectedAt:0,participantState:null,profilePictureUrl:null,profileUrl:null,roomLocation:null,screenStreams:b("immutable").Set(),streams:b("immutable").Set(),userName:"",userShortName:"",vanity:""});c=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(a);e.exports=c}),null);
__d("RTCUser",["FBRTCConstants","FBRTCParticipantCallState","RTCUserRecord","immutable","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBRTCConstants").MediaContentTypes;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.clone=function(){return new c(this.toObject())};d.setParticipantState=function(a){return(!this.participantState||this.participantState.state!==b("FBRTCParticipantCallState").CONNECTED)&&a.state===b("FBRTCParticipantCallState").CONNECTED?this.set("participantState",a).set("lastConnectedAt",Date.now()):!this.participantState||this.participantState.state!==a.state?this.set("participantState",a):this};d.getParticipantState=function(){return this.participantState&&this.participantState.state};d.hasAudio=function(){return this.getAllStreamAudioTracks().some(function(a){return a.length>0})};d.hasVideo=function(){return this.streams.some(function(a){return a.getVideoTracks().length>0})};d.hasLiveVideoTracks=function(){return this.streams.some(function(a){return a.getVideoTracks().some(function(a){return a.readyState==="live"})})};d.isAudioMuted=function(){var a=this;return!this.hasAudio()?!0:this.getAllStreamAudioTracks().every(function(b){return a.areAllTracksMuted(b)})};d.isVideoMuted=function(){var a=this;return!this.hasVideo()?!0:this.streams.every(function(b){return a.areAllTracksMuted(b.getVideoTracks())})};d.areAllTracksMuted=function(a){return!a.some(function(a){return a.enabled})};d.hasFunctioningVideoTrack=function(){return!this.hasVideo()?!1:this.streams.every(function(a){return a.getVideoTracks().some(function(a){return a.enabled&&!a.muted})})};d.toggleMuteAudio=function(a){var b=this;this.getAllStreamAudioTracks().forEach(function(a){return b.$RTCUser1(a)});return this.clone()};d.toggleMuteVideo=function(a){var b=this;this.streams.forEach(function(c){b.$RTCUser1(c.getVideoTracks(),a)});return this.clone()};d.stopVideo=function(){var a=this;this.streams.forEach(function(b){b.getVideoTracks().forEach(function(c){a.$RTCUser1(b.getVideoTracks(),!0),c.readyState!=="ended"&&(c.onended&&c.onended(),c.stop())})});return this.clone()};d.getAllStreamAudioTracks=function(){return this.streams.concat(this.screenStreams).map(function(a){return a.getAudioTracks()})};d.hasStream=function(){return!this.streams.isEmpty()};d.addStream=function(a){return this.set("streams",this.streams.add(b("nullthrows")(a)))};d.removeStream=function(a){return this.set("streams",this.streams["delete"](a))};d.getStream=function(){return this.hasStream()?this.streams.first():null};d.getActiveStream=function(){return this.hasStream()?this.streams.find(function(a){return"active"in a&&a.active}):null};d.replaceStream=function(a,b){return!this.streams.contains(a)?this:this.set("streams",this.streams["delete"](a).add(b))};d.removeAllStreams=function(){return this.set("streams",b("immutable").Set())};d.getScreenStream=function(){return this.screenStreams&&this.hasScreenStream()?this.screenStreams.first():null};d.hasScreenStream=function(){return!this.screenStreams.isEmpty()};d.addScreenStream=function(a){return this.set("screenStreams",this.screenStreams.add(a))};d.removeScreenStream=function(a){return this.set("screenStreams",this.screenStreams["delete"](a))};d.removeAllScreenStreams=function(){return this.set("screenStreams",b("immutable").Set())};d.replaceScreenStream=function(a,b){if(!this.screenStreams.contains(a))return this;return a===b?this:this.set("screenStreams",this.screenStreams.add(b)["delete"](a))};d.setRoomLocation=function(a){return this.set("roomLocation",a)};d.getRoomLocation=function(){return this.roomLocation};d.$RTCUser1=function(a,b){var c=b!=null?!b:this.areAllTracksMuted(a);a.forEach(function(a){return a.enabled=c})};d.getMediaTypeForTracks=function(){var a=new Map(),b=this.getScreenStream();b&&b.getVideoTracks().forEach(function(b){return a.set(b.id,g.SCREEN)});return a};return c}(b("RTCUserRecord"));e.exports=a}),null);
__d("RTCCallTitle.react",["MercuryIDs","MercuryParticipantListRenderer","React","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();var c=a.displayViewerName,d=a.viewer,e=a.participants;a=a.className;var f=b("MercuryIDs").getParticipantIDFromUserID(d);d=Object.keys(e.toJS());d.length>1&&(d=d.filter(function(a){return a!==f||c}));d=d.map(function(a){return e.get(a)});d=new(b("MercuryParticipantListRenderer"))().setUseShortName(!1).setUseAndSeparator(!1).renderParticipantList(d);return b("React").createElement("span",{className:a},d)};e.exports=a}),null);
__d("MessengerStateProcessor",["CurrentUser","MercuryAPIArgsSource","MercuryIDs","MercuryParticipantTypes","MercuryThreadIDMap","MercuryVanityIDMap.bs","MessengerParticipants.bs","MessengerState.bs","MessengerURIConstants"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={preprocess:function(a){__p&&__p();var c=a.activeThreadID;if(c){var d=b("MercuryIDs").getUserIDFromThreadID(c),e=d&&b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(d));if(e&&e.type!==b("MercuryParticipantTypes").EVENT)a.threadKey=e.vanity||d;else if(d&&!e){e=b("MercuryIDs").getParticipantIDFromUserID(d);a.threadKey=b("MercuryVanityIDMap.bs").hasID(e)?b("MercuryVanityIDMap.bs").getVanity(e):d}else{e=b("MercuryThreadIDMap").get();d=e.getServerIDFromClientIDNow(c);a.threadKey=d||b("MercuryIDs").tokenize(c).value}}delete a.activeThreadID;return a},postprocess:function(a){var c=b("MercuryThreadIDMap").get(),d=g(a.threadKey),e;e=b("MercuryIDs").isValid(d)?d:c.getClientIDFromServerIDNow(d);if(!e){d=b("MessengerParticipants.bs").getIDFromVanityOrFBID(d);d&&(e=b("MercuryIDs").getThreadIDFromParticipantID(d))}e&&(a.activeThreadID=e,a.serverThreadID=c.getServerIDFromClientIDNow(e));delete a.threadKey;return a},supportInboxPostprocess:function(a){a.threadKey&&(a.activeThreadID=b("MercuryIDs").getThreadIDFromSupportInboxItemID(a.threadKey));delete a.threadKey;return a}};function g(a){return!a?null:a.startsWith(b("MessengerURIConstants").GROUP_PREFIX)?a.substr(b("MessengerURIConstants").GROUP_PREFIX.length):a}e.exports=a}),null);
__d("MessengerURISerializer",["CurrentEnvironment","MercuryFilters.bs","MercuryIDs","MercuryTypeaheadConstants","MessagingTag","MessengerStateProcessor","MessengerURIConstants","MessengerView","URI","WWWBase","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="/?$",h="/",i=function(a,c){a.setPath(b("CurrentEnvironment").facebookdotcom?b("MessengerURIConstants").FACEBOOK_PREFIX+c:c)},j=function(a,c){var d=a.getPath();b("CurrentEnvironment").facebookdotcom&&!d.startsWith(b("MessengerURIConstants").FACEBOOK_PREFIX)&&(c=b("MessengerURIConstants").FACEBOOK_PREFIX+c);a.setPath(a.getPath()+c)};a={serialize:function(a){__p&&__p();var c=new(b("URI"))(b("WWWBase").uri);a=b("MessengerStateProcessor").preprocess(a);switch(a.masterView){case b("MessengerView").MASTER.PAYMENT:i(c,b("MessengerURIConstants").PAYMENT_PATH);break;case b("MessengerView").MASTER.PEOPLE:i(c,b("MessengerURIConstants").PEOPLE_PATH);break;case b("MessengerView").MASTER.SUPPORT:i(c,b("MessengerURIConstants").SUPPORT_PATH);break}switch(a.folder){case b("MessagingTag").OTHER:i(c,b("MessengerURIConstants").FILTERED_REQUESTS_PATH);break;case b("MessagingTag").ACTION_ARCHIVED:i(c,b("MessengerURIConstants").ARCHIVED_PATH);break;case b("MessagingTag").PENDING:i(c,b("MessengerURIConstants").MESSAGE_REQUESTS_PATH);break;case b("MessagingTag").MARKETPLACE_FOLDER:i(c,b("MessengerURIConstants").FOLDERS_PATH+"/"+a.folderKey);break}a.detailView===b("MessengerView").DETAIL.PAYTHREAD?(j(c,b("MessengerURIConstants").PAYMENT_PAY_PATH),a.threadKey&&c.addQueryData("id",a.threadKey)):a.detailView===b("MessengerView").DETAIL.PAYFRIENDPICKER?j(c,b("MessengerURIConstants").PAYMENT_PAY_PATH):a.detailView===b("MessengerView").DETAIL.COMPOSE?j(c,b("MessengerURIConstants").COMPOSE_SUBPATH):a.threadKey?a.masterView===b("MessengerView").MASTER.PAYMENT?(i(c,b("MessengerURIConstants").THREAD_PREFIX+a.threadKey),delete a.extraQueryParams.id,delete a.extraQueryParams.a,delete a.extraQueryParams.m):j(c,b("MessengerURIConstants").THREAD_PREFIX+a.threadKey):a.masterView===b("MessengerView").MASTER.PAYMENT?(i(c,""),delete a.extraQueryParams.id,delete a.extraQueryParams.a,delete a.extraQueryParams.m):j(c,"");a.extraQueryParams&&c.addQueryData(a.extraQueryParams);b("MercuryFilters.bs").isSupportedFilter(a.filter)&&c.addQueryData({filter:a.filter});if(a.query!=null)if(a.masterView===b("MessengerView").MASTER.SEE_ALL_PEOPLE||a.masterView===b("MessengerView").MASTER.SEE_ALL_GROUPS||a.masterView===b("MessengerView").MASTER.SEE_ALL_PAGES)c.addQueryData("t",a.seeAllType),c.addQueryData("sa",a.query);else{var d;c.addQueryData((d={},d[a.masterView===b("MessengerView").MASTER.SEARCH?"qa":"q"]=a.query,d))}a.threadIDs&&c.addQueryData({threadIDs:JSON.stringify(a.threadIDs)});a.mid&&c.addQueryData({mid:a.mid});return c},getNonMessengerState:function(){return{notMessenger:!0,filter:b("MercuryFilters.bs").all,folder:b("MessagingTag").INBOX,masterView:b("MessengerView").MASTER.RECENT}},deserialize:function(a){__p&&__p();var c={},d=a.getPath();if(b("CurrentEnvironment").facebookdotcom&&!(d.startsWith(b("MessengerURIConstants").FACEBOOK_PREFIX)||b("gkx")("997564")&&d=="/"))return this.getNonMessengerState();d=d.replace(b("MessengerURIConstants").FACEBOOK_PREFIX,"");var e;a=a.getQueryData();var f=a.filter,h=a.mid,i=a.q,j=a.qa,m=a.sa,n=a.t,o=a.threadIDs;a=babelHelpers.objectWithoutPropertiesLoose(a,["filter","mid","q","qa","sa","t","threadIDs"]);if(o)try{e=JSON.parse(o)}catch(a){}e?c.threadIDs=e.filter(function(a){return b("MercuryIDs").isValidThreadID(a)}):c.threadIDs=null;if(d.match("^"+b("MessengerURIConstants").PEOPLE_PATH))c.masterView=b("MessengerView").MASTER.PEOPLE;else if(d.match("^"+b("MessengerURIConstants").SUPPORT_PATH))c.masterView=b("MessengerView").MASTER.SUPPORT;else if(d.match("^"+b("MessengerURIConstants").PAYMENT_PATH))c.masterView=b("MessengerView").MASTER.PAYMENT;else if(j)c.masterView=b("MessengerView").MASTER.SEARCH;else if(m&&n)switch(n){case b("MercuryTypeaheadConstants").FRIEND_TYPE:case b("MercuryTypeaheadConstants").NON_FRIEND_TYPE:c.masterView=b("MessengerView").MASTER.SEE_ALL_PEOPLE;break;case b("MercuryTypeaheadConstants").PAGE_TYPE:c.masterView=b("MessengerView").MASTER.SEE_ALL_PAGES;break;case b("MercuryTypeaheadConstants").THREAD_TYPE:c.masterView=b("MessengerView").MASTER.SEE_ALL_GROUPS;break}else c.masterView=b("MessengerView").MASTER.RECENT;d.match("^"+b("MessengerURIConstants").FILTERED_REQUESTS_PATH)?c.folder=b("MessagingTag").OTHER:d.match("^"+b("MessengerURIConstants").ARCHIVED_PATH)?c.folder=b("MessagingTag").ACTION_ARCHIVED:d.match("^"+b("MessengerURIConstants").MESSAGE_REQUESTS_PATH)?c.folder=b("MessagingTag").PENDING:d.match("^"+b("MessengerURIConstants").FOLDERS_PATH)?c.folder=b("MessagingTag").MARKETPLACE_FOLDER:c.folder=b("MessagingTag").INBOX;if(d.match(b("MessengerURIConstants").COMPOSE_SUBPATH+g))c.detailView=b("MessengerView").DETAIL.COMPOSE;else if(d.match("^"+b("MessengerURIConstants").PAYMENT_PATH+b("MessengerURIConstants").PAYMENT_PAY_PATH))a&&a.id?(c.threadKey=a.id,c.detailView=b("MessengerView").DETAIL.PAYTHREAD):c.detailView=b("MessengerView").DETAIL.PAYFRIENDPICKER;else{o=k(d);o&&(c.threadKey=o,c.detailView=b("MessengerView").DETAIL.THREAD);o=l(d);o&&(c.folderKey=o)}b("MercuryFilters.bs").isSupportedFilter(f)?c.filter=f:c.filter=b("MercuryFilters.bs").all;c.mid=h;c.query=j||i;c.sa=m;c.seeAllType=n;c.extraQueryParams=a;return c.masterView===b("MessengerView").MASTER.SUPPORT?b("MessengerStateProcessor").supportInboxPostprocess(c):b("MessengerStateProcessor").postprocess(c)}};function k(a){a=a.match(b("MessengerURIConstants").THREAD_PREFIX+"([^/]+)"+g);return a&&decodeURIComponent(a[1])}function l(a){a=a.match(b("MessengerURIConstants").FOLDERS_PATH+h+"([^/]+)"+b("MessengerURIConstants").THREAD_PREFIX+"([^/]+)"+g);return a&&decodeURIComponent(a[1])}e.exports=a}),null);
__d("WorkGalahadChatChannelActions",["WorkGalahadDispatcher"],(function(a,b,c,d,e,f){"use strict";function a(a){b("WorkGalahadDispatcher").dispatch({type:"galahad/chat_change_folder",folder:a})}function c(a){b("WorkGalahadDispatcher").dispatch({type:"galahad/chat_change_filter",filter:a})}e.exports={changeFolder:a,changeFilter:c}}),null);
__d("MessengerActions",["invariant","Bootloader","EventProfiler","LogHistory","MercuryIDs","MercuryTypeaheadConstants","MessengerDispatcher","MessengerThreadFetchLoggerUtil","MessengerURISerializer","MessengerView","URI","WorkGalahadChatChannelActions","WorkGalahadSettings","goURI","keyMirror"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("keyMirror")({CANCEL_FILE_UPLOAD:null,EMPTY_FILES:null,LINK_PREVIEW:null,LOAD_MORE_RESULTS:null,LOADED_SHARE_DATA:null,LOADING_SHARE_DATA:null,REMOVE_SHARE_PREVIEW:null,PREPARE_FILES_FOR_SEND:null,REPLACE_STATE:null,SELECT_THREAD:null,UPDATE_MDOT_ME:null,UPDATE_THREAD_TAG:null,UPLOAD_FILE_FAILED:null,UPLOADED_FILE:null}),i=b("LogHistory").getInstance("messenger_actions"),j={Types:h,changeDetailView:function(a){l(function(b){return b.detailView!==a?{detailView:a}:null})},changeMasterView:function(a){l(function(c){if(c.masterView!==a){var d={masterView:a};c.masterView===b("MessengerView").MASTER.SEARCH&&(d.query=void 0,b("Bootloader").loadModules(["MessengerContentSearchFunnelLogger","MessengerContentSearchFunnelLoggerConstants"],function(a,b){a&&a.endFunnel(b.FUNNEL_LOGGER_TAGS.END_WITH_BACK_BUTTON)},"MessengerActions"));return d}return null})},selectThread:function(a,c){__p&&__p();if(c===b("MercuryTypeaheadConstants").MEETING_ROOM_PAGE_TYPE){!a&&g(0,5146);c=b("MercuryIDs").getUserIDFromThreadID(a);!c&&g(0,5147);var d=new(b("URI"))(),e=d.getQualifiedURI().getSubdomain();d.setDomain("facebook.com").setSubdomain(e).setPath("/"+c).setProtocol("https");window.open(d,"_blank");return}b("EventProfiler").tagCurrentActiveInteractionsAs("MessengerThreadSwitch");b("MessengerDispatcher").dispatch({type:h.SELECT_THREAD,threadID:a});l(function(c){if(c.activeThreadID===a)return null;var d={query:c.query,activeThreadID:a,detailView:b("MessengerView").DETAIL.THREAD,mid:null};a&&(b("MessengerThreadFetchLoggerUtil").markerStart(a),c.query!==void 0&&c.masterView!==b("MessengerView").MASTER.SEARCH&&(d.query=void 0,b("Bootloader").loadModules(["MessengerContentSearchFunnelLogger","MessengerContentSearchFunnelLoggerConstants"],function(a,b){if(!a&&!b)return;a.endFunnel(b.FUNNEL_LOGGER_TAGS.END_BY_CHANGING_THREADS)},"MessengerActions")));return d})},changeState:function(a){b("MessengerDispatcher").dispatch({type:h.REPLACE_STATE,nextState:a})},changeMDotMeReferral:function(a,c){a===void 0&&(a=null),c===void 0&&(c=null),b("MessengerDispatcher").dispatch({type:j.Types.UPDATE_MDOT_ME,refCode:a,refThreadID:c})},changeThreadTag:function(a,c){a===void 0&&(a=null),c===void 0&&(c=null),b("MessengerDispatcher").dispatch({type:j.Types.UPDATE_THREAD_TAG,messagingTags:a,threadID:c})},changeFolder:function(a,c){b("WorkGalahadSettings").isGalahadEnabled?b("WorkGalahadChatChannelActions").changeFolder(a):l(function(b){return b.folder!==a?c?{folder:a,folderKey:c}:{folder:a}:null})},changeFilter:function(a){b("WorkGalahadSettings").isGalahadEnabled?b("WorkGalahadChatChannelActions").changeFilter(a):l(function(b){return b.filter!==a?{filter:a}:null})},changeQuerySeeAll:function(a,c){l(function(d){if(d.queryAll!==a)switch(c){case b("MercuryTypeaheadConstants").MESSAGE_TYPE:return{query:a,masterView:b("MessengerView").MASTER.SEARCH};case b("MercuryTypeaheadConstants").FRIEND_TYPE:case b("MercuryTypeaheadConstants").NON_FRIEND_TYPE:return{query:a,masterView:b("MessengerView").MASTER.SEE_ALL_PEOPLE,seeAllType:c};case b("MercuryTypeaheadConstants").PAGE_TYPE:return{query:a,masterView:b("MessengerView").MASTER.SEE_ALL_PAGES,seeAllType:c};case b("MercuryTypeaheadConstants").THREAD_TYPE:return{query:a,masterView:b("MessengerView").MASTER.SEE_ALL_GROUPS,seeAllType:c}}return null})},changeQuery:function(a){l(function(b){return b.query!==a?{query:a}:null})},changeQueryAll:function(a){l(function(c){return c.queryAll!==a?{query:a,masterView:b("MessengerView").MASTER.SEARCH}:null})},searchForMessagesInAThread:function(a,c){var d={query:c,serverThreadID:a,activeThreadID:a,masterView:b("MessengerView").MASTER.SEARCH};l(function(a){return d})},changeMid:function(a){l(function(b){return b.mid!==a?{mid:a}:null})},changeID:function(a){l(function(b){return b.extraQueryParams.id!==a?{extraQueryParams:babelHelpers["extends"]({},b.extraQueryParams,{id:a})}:null})},prepareFilesForSend:function(a,c,d){i.debug("Add files from "+d,a);if(!a)return;b("MessengerDispatcher").dispatch({type:j.Types.PREPARE_FILES_FOR_SEND,threadID:a,files:c})},uploadedFile:function(a,c,d){if(!a)return;b("MessengerDispatcher").dispatch({type:j.Types.UPLOADED_FILE,threadID:a,uploadID:c,payload:d})},cancelFileUpload:function(a,c){if(!a)return;b("MessengerDispatcher").dispatch({type:j.Types.CANCEL_FILE_UPLOAD,threadID:a,uploadID:c})},uploadFileFailed:function(a,c){if(!a)return;b("MessengerDispatcher").dispatch({type:j.Types.UPLOAD_FILE_FAILED,threadID:a,uploadID:c})},cleanFiles:function(a){i.debug("clean files",a);if(!a)return;b("MessengerDispatcher").dispatch({type:j.Types.EMPTY_FILES,threadID:a})},loadingPreview:function(a,c){b("MessengerDispatcher").dispatch({type:j.Types.LINK_PREVIEW,threadID:a,match:c})},loadingShareData:function(a){b("MessengerDispatcher").dispatch({type:j.Types.LOADING_SHARE_DATA,threadID:a})},loadedShareData:function(a,c){b("MessengerDispatcher").dispatch({type:j.Types.LOADED_SHARE_DATA,threadID:a,attachmentData:c})},loadMoreResults:function(){b("MessengerDispatcher").dispatch({type:h.LOAD_MORE_RESULTS})},removeSharePreview:function(a){b("MessengerDispatcher").dispatch({type:j.Types.REMOVE_SHARE_PREVIEW,threadID:a})}};function k(a,b){return a.detailView==null}function l(a){var c=b("MessengerURISerializer").deserialize(new(b("URI"))(window.location.href));a=a(c);var d=k(c,a);a&&b("goURI")(b("MessengerURISerializer").serialize(Object.assign(c,a)),!1,d)}e.exports=j}),null);
__d("MessengerContactAdapters",["ImmutableObject","MercuryTypeaheadConstants","immutable"],(function(a,b,c,d,e,f){__p&&__p();a={fromSearchableEntry:function(a){__p&&__p();var c=a.getType(),d={alias:null,isMessengerUser:null,isWorkUser:null,isVerified:null,workForeignEntityInfo:null,participants:null,photo:a.getPhoto(),subtitle:a.getSubtitle(),thread:null,title:a.getTitle(),type:c,uid:a.getUniqueID(),timestamp:null,matchRanges:null};d.photo||(d.photo=null);var e=a.getAuxiliaryData();if(e){c==b("MercuryTypeaheadConstants").MESSAGE_TYPE&&(d.uid=e.thread_id);e.timestamp&&(d.timestamp=e.timestamp);c===b("MercuryTypeaheadConstants").MESSAGE_TYPE&&e.matchRanges!=null&&(d.matchRanges=e.matchRanges);a=c===b("MercuryTypeaheadConstants").MESSAGE_TYPE&&e.messageResultType==="groupConversation";c===b("MercuryTypeaheadConstants").THREAD_TYPE||a?(d.thread=new(b("ImmutableObject"))(e.thread),d.participants=b("immutable").Map().withMutations(function(a){e.participantsToRender.forEach(function(b){a.set(b.id,b)})})):(d.isMessengerUser=e.isMessengerUser,d.isWorkUser=e.isWorkUser,d.isVerified=e.isVerified,d.workForeignEntityInfo=e.workForeignEntityInfo,d.alias=e.alias)}return new(b("ImmutableObject"))(d)},fromMercuryParticipant:function(a){return new(b("ImmutableObject"))({alias:a.alias,uid:a.id,photo:a.image_src,title:a.name,subtitle:a.title?a.title:"",type:a.type,isMessengerUser:a.is_messenger_user,isWorkUser:a.is_work_user,isVerified:a.is_verified,isCoworker:a.is_coworker,href:a.href,timezone:a.timezone,workForeignEntityInfo:a.work_foreign_entity_info})}};e.exports=a}),null);
__d("MessengerProfileImageWrapperReact.bs",["cx","cssVar","React","ReactDOMRe.bs","CurrentUser","ReasonReact.bs","TooltipData","joinClasses","bs_js_primitive","MessagingThreadType","getViewportDimensions","MessengerDotComAndInboxM4Check.bs","LazyWorkMultiCompanyChatTooltipReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ReasonReact.bs").statelessComponent("MessengerProfileImageWrapperReact");function j(a,c,d,e,f,g,h,j,k,l,m,n){__p&&__p();var o=l!==void 0?l:"",p=function(){__p&&__p();if(c!==void 0)return b("React").createElement("div",{className:"_4ld_ _2pom"},b("React").createElement("div",{className:"_2pon _67in"},b("bs_js_primitive").valFromOption(c)));else{var a;if(d!==void 0||e!==void 0||k!==void 0)a=1;else return null;if(a===1)if(m)if(e!==void 0)if(b("CurrentUser").isWorkUser())return null;else{a=e;return b("React").createElement("div",{className:"_4ld_ _2pom"},b("React").createElement("div",{className:"_2pon"+(a?" _1zvi":"")+(a?"":" _2poo")}))}else if(k!==void 0)if(b("CurrentUser").isWorkUser()){a=k;var f=j!==void 0?j>45:!1;return b("React").createElement("div",{className:"_4ld_ _2pom"},b("ReasonReact.bs").element(void 0,void 0,b("LazyWorkMultiCompanyChatTooltipReact.bs").make([b("React").createElement("div",{className:(a&&!f?"_4rwy":"")+(a&&f?" _2zb5":"")})])))}else return null;else if(b("CurrentUser").isWorkUser())return null;else{a=d;return b("React").createElement("div",{className:"_4ld_ _2pom"},b("React").createElement("div",{className:"_2pon"+(a?" _2poo":"")+(a?"":" _2pop")}))}else return null}};return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],function(){__p&&__p();var c=j!==void 0?""+(String(j)+"px"):"auto",d=g!==void 0?g===b("MessagingThreadType").ROOM:!1,e;if(h!==void 0){var i=h;if(i==="")e={};else{var k=b("getViewportDimensions")().width,l=parseInt("700px".replace("px",""),10);k=k<=l;l=k?"above":"left";e=Object.assign({},b("TooltipData").propsFor(i,l))}}else e={};k=h!==void 0&&h!==""?0:void 0;i=d?{background:f!==void 0?f:"#0084ff",height:c,width:c}:{height:c,width:c};l={className:b("joinClasses")("_4ldz",o),style:{height:c,width:c}};a!==void 0&&(l["aria-hidden"]=b("bs_js_primitive").valFromOption(a));c={className:"_4ld-"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _7q1r":"")+(d?" _180i":""),style:i};k!==void 0&&(c.tabIndex=b("bs_js_primitive").valFromOption(k));return b("React").cloneElement(b("React").createElement("div",l,b("ReactDOMRe.bs").createElementVariadic("div",b("bs_js_primitive").some(c),n),p(0)),e)},i[9],i[10],i[11],i[12]]}a=b("ReasonReact.bs").wrapReasonForJs(i,function(a){var c=a.className;return j(b("bs_js_primitive").nullable_to_opt(a.ariaHidden),b("bs_js_primitive").nullable_to_opt(a.customBadge),b("bs_js_primitive").nullable_to_opt(a.isMessengerUser),void 0,b("bs_js_primitive").nullable_to_opt(a.threadColor),b("bs_js_primitive").nullable_to_opt(a.threadType),b("bs_js_primitive").nullable_to_opt(a.tooltipContent),b("bs_js_primitive").nullable_to_opt(a.size),a.isMultiCompany,c==null?"":c,a.showBadge,[].concat(a.children))});f.component=i;f.make=j;f.jsComponent=a}),null);
__d("MessengerContactImage.react",["Image.react","MessengerProfileImageWrapperReact.bs","React"],(function(a,b,c,d,e,f){__p&&__p();var g=b("MessengerProfileImageWrapperReact.bs").jsComponent;a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").createElement("div",{className:this.props.className},b("React").createElement(g,{isMessengerUser:this.props.isMessengerUser,isPartiesUser:this.props.isPartiesUser,size:this.props.size,customBadge:this.props.customBadge,showBadge:!1},b("React").createElement(b("Image.react"),{alt:"",height:this.props.size,src:this.props.src,width:this.props.size})))};return c}(b("React").PureComponent);e.exports=a}),null);
__d("MessengerDialogLayerShrinkOnHide",["cx","invariant","CSSFade","Layer","SubscriptionsHandler"],(function(a,b,c,d,e,f,g,h){__p&&__p();a=function(){"use strict";__p&&__p();function a(a){this._layer=a,this._subscriptionsHandler=new(b("SubscriptionsHandler"))()}var c=a.prototype;c.enable=function(){this._subscription=this._layer.subscribe("starthide",this._handleStartHide.bind(this))};c.disable=function(){this._subscription&&(this._subscription.unsubscribe(),this._subscription=null),this._subscriptionsHandler.release()};c._handleStartHide=function(){__p&&__p();var a=!0,c=b("Layer").subscribe("show",function(){c.unsubscribe(),a=!1}),d=setTimeout(function(){var b=this;c.unsubscribe();c=null;var d=function(){b._layer.finishHide()};a?this._animate(d):d()}.bind(this),0);this._subscriptionsHandler.addSubscriptions({remove:function(){clearTimeout(d)}});return!1};c._animate=function(a){var c=this._layer.getRoot();c!=null||h(0,70);var d=c.getElementsByClassName("_59s7");d&&d[0]&&d[0].classList.add("_2qby");b("CSSFade").hide(c,{callback:function(){a()},duration:200})};return a}();e.exports=a}),null);
__d("MessengerTypeaheadUtils",["fbt","ix","MercuryTypeaheadConstants","MessengerEnvironment","ReactDOM","SearchableEntry","gkx","immutable","mapObject","qex"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("immutable").OrderedMap,j=500,k=100,l="__special_search_entry__",m=[b("MercuryTypeaheadConstants").SEARCH_TYPE,b("MercuryTypeaheadConstants").FRIEND_TYPE,b("MercuryTypeaheadConstants").FB4C_TYPE,b("MercuryTypeaheadConstants").MESSAGE_TYPE,b("MercuryTypeaheadConstants").THREAD_TYPE,b("MercuryTypeaheadConstants").MEETING_ROOM_PAGE_TYPE,b("MercuryTypeaheadConstants").INTERNAL_BOT_PAGE_TYPE,b("MercuryTypeaheadConstants").NON_FRIEND_TYPE,b("MercuryTypeaheadConstants").PAGE_TYPE,b("MercuryTypeaheadConstants").GAME_TYPE],n=[b("MercuryTypeaheadConstants").SEARCH_TYPE,b("MercuryTypeaheadConstants").FRIEND_TYPE,b("MercuryTypeaheadConstants").FB4C_TYPE,b("MercuryTypeaheadConstants").MESSAGE_TYPE,b("MercuryTypeaheadConstants").THREAD_TYPE,b("MercuryTypeaheadConstants").MEETING_ROOM_PAGE_TYPE,b("MercuryTypeaheadConstants").INTERNAL_BOT_PAGE_TYPE,b("MercuryTypeaheadConstants").PAGE_TYPE,b("MercuryTypeaheadConstants").NON_FRIEND_TYPE,b("MercuryTypeaheadConstants").GAME_TYPE],o=(a={},a[b("MercuryTypeaheadConstants").SEARCH_TYPE]={header:""},a[b("MercuryTypeaheadConstants").FRIEND_TYPE]={header:g._("\u9023\u7d61\u5148")},a[b("MercuryTypeaheadConstants").FB4C_TYPE]={header:g._("\u540c\u50da")},a[b("MercuryTypeaheadConstants").MESSAGE_TYPE]={header:g._("\u30e1\u30c3\u30bb\u30fc\u30b8")},a[b("MercuryTypeaheadConstants").THREAD_TYPE]={header:g._("\u30b0\u30eb\u30fc\u30d7\u30b9\u30ec\u30c3\u30c9")},a[b("MercuryTypeaheadConstants").PAGE_TYPE]={header:g._("\u30d3\u30b8\u30cd\u30b9")},a[b("MercuryTypeaheadConstants").MEETING_ROOM_PAGE_TYPE]={header:g._("\u4f1a\u8b70\u5ba4")},a[b("MercuryTypeaheadConstants").INTERNAL_BOT_PAGE_TYPE]={header:g._("\u30dc\u30c3\u30c8")},a[b("MercuryTypeaheadConstants").NON_FRIEND_TYPE]={header:g._("\u305d\u306e\u4ed6\u306e\u4eba")},a.game={header:g._("\u30b2\u30fc\u30e0")},a);c={sortEntries:function(a,c){__p&&__p();var d=[],e=[],f=[],g=[],h=[],i=[],j=[],k=[],l=[],m=[];a.forEach(function(a){__p&&__p();switch(a.getType()){case b("MercuryTypeaheadConstants").FRIEND_TYPE:e.push(a);break;case b("MercuryTypeaheadConstants").FB4C_TYPE:f.push(a);break;case b("MercuryTypeaheadConstants").MESSAGE_TYPE:g.push(a);break;case b("MercuryTypeaheadConstants").THREAD_TYPE:h.push(a);break;case b("MercuryTypeaheadConstants").PAGE_TYPE:case b("MercuryTypeaheadConstants").COMMERCE_PAGE_TYPE:j.push(a);break;case b("MercuryTypeaheadConstants").NON_FRIEND_TYPE:i.push(a);break;case b("MercuryTypeaheadConstants").MEETING_ROOM_PAGE_TYPE:k.push(a);break;case b("MercuryTypeaheadConstants").INTERNAL_BOT_PAGE_TYPE:l.push(a);break;case b("MercuryTypeaheadConstants").SEARCH_TYPE:d.push(a);break;case b("MercuryTypeaheadConstants").GAME_TYPE:m.push(a);break}});if(b("qex")._("882163")){c=b("qex")._("899030");a=c===2||c===3?j.slice(0,c):j;return d.concat(e,f,g,h,k,l,a,i,m)}return d.concat(e,f,g,h,k,l,i,j,m)},sortEntriesWithoutPages:function(a){__p&&__p();var c=[],d=[],e=[],f=[];a.forEach(function(a){switch(a.getType()){case b("MercuryTypeaheadConstants").FRIEND_TYPE:c.push(a);break;case b("MercuryTypeaheadConstants").FB4C_TYPE:d.push(a);break;case b("MercuryTypeaheadConstants").THREAD_TYPE:e.push(a);break;case b("MercuryTypeaheadConstants").NON_FRIEND_TYPE:f.push(a);break}});return c.concat(d,e,f)},sortEntriesWithoutGroupsOrViewer:function(a,c){__p&&__p();var d=[],e=[],f=[];a.forEach(function(a){if(a.getUniqueID()===c)return;switch(a.getType()){case b("MercuryTypeaheadConstants").FRIEND_TYPE:d.push(a);break;case b("MercuryTypeaheadConstants").FB4C_TYPE:e.push(a);break;case b("MercuryTypeaheadConstants").NON_FRIEND_TYPE:f.push(a);break}});return d.concat(e,f)},getEntryOrder:function(a,c){if(c==null)if(b("qex")._("882163"))return n;else return m;else return c},orderEntries:function(a,c){var d=this,e=[];this.getEntryOrder(c).filter(function(a){return a!==b("MercuryTypeaheadConstants").SEARCH_TYPE}).concat(b("MercuryTypeaheadConstants").SEARCH_TYPE).forEach(function(b){return e.push.apply(e,a.filter(function(a){return d.areSectionsEqual(a.getType(),b)}))});return e},buildSingleSection:function(a){return i([[[""],a]])},buildListSections:function(a,c,d){__p&&__p();if(!a.length)return i();d=this.getEntryOrder(c,d);var e=b("mapObject")(o,function(a){return babelHelpers["extends"]({},a,{entries:[]})});e[b("MercuryTypeaheadConstants").COMMERCE_PAGE_TYPE]=e[b("MercuryTypeaheadConstants").PAGE_TYPE];var f=b("qex")._("861958");c===""&&f===!0&&(e[b("MercuryTypeaheadConstants").FRIEND_TYPE].header=g._("\u304a\u3059\u3059\u3081"));a.forEach(function(a){var b=a.getType();e[b]&&e[b].entries.push(a)});return i(d.filter(function(a){return e[a].entries.length}).map(function(a){return[[e[a].header,a],e[a].entries]}))},buildCustomSection:function(a,b){var c;return c={},c[a]=b,c},areSectionsEqual:function(a,c){return a===b("MercuryTypeaheadConstants").COMMERCE_PAGE_TYPE?c===b("MercuryTypeaheadConstants").COMMERCE_PAGE_TYPE||c===b("MercuryTypeaheadConstants").PAGE_TYPE:a===c},scrollEntryIntoView:function(a,c){var d=b("ReactDOM").findDOMNode(c),e=c.getScrollTop(),f=a.offsetTop-e;d=d.offsetHeight-a.offsetHeight;a=Math.abs(d-f);f>=d&&a<=k?c.scrollToPosition(e+f-d,!0,{duration:j}):f<0&&a<=d+k&&c.scrollToPosition(e+f,!0,{duration:j})},getMessageSearchEntry:function(a){return b("gkx")("860320")||!b("MessengerEnvironment").messengerui||a.length<2?null:new(b("SearchableEntry"))({uniqueID:l,title:g._("\u30e1\u30c3\u30bb\u30fc\u30b8\u4e2d\u306e\u300c{queryString}\u300d\u3092\u691c\u7d22",[g._param("queryString",a)]),photo:h("86924"),type:b("MercuryTypeaheadConstants").SEARCH_TYPE})},isMessageSearchEntry:function(a){return a.getUniqueID()===l}};e.exports=c}),null);
__d("MessengerGraphQLTypeaheadHighlighter",["Keys","MercuryTypeaheadConstants","MessengerTypeaheadUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={getNextHighlightedEntry:function(a,c,d,e){__p&&__p();var f=[];b("MessengerTypeaheadUtils").getEntryOrder(d).forEach(function(a){return f.push.apply(f,c.filter(function(c){return b("MessengerTypeaheadUtils").areSectionsEqual(c.getType(),a)}))});if(!e){if(f.length===0)return null;if(a===b("Keys").DOWN){d=f[0];return d.getType()===b("MercuryTypeaheadConstants").SEARCH_TYPE&&f.length>1?f[1]:d}return a===b("Keys").UP?f[f.length-1]:null}var g=e.getUniqueID();d=f.findIndex(function(a){return a.getUniqueID()===g});if(d===-1)return null;a===b("Keys").DOWN?(d+=1,d>=f.length&&(d=0)):a===b("Keys").UP&&(d-=1,d<0&&(d=f.length-1));return f[d]}};e.exports=a}),null);
__d("MessengerGraphQLTypeaheadAdapter",["fbt","MercuryIDs","MercuryParticipantTypes","MercuryTypeaheadConstants","SearchableEntry","WorkForeignEntityType","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("gkx")("857049");function i(a){return b("MercuryIDs").isValid(a)?a:b("MercuryIDs").getParticipantIDFromUserID(a)}function j(a){var b=a.scim_company_user&&a.scim_company_user.company_title;a=a.is_viewer_coworker?null:a.work_info&&a.work_info.work_community&&a.work_info.work_community.name;if(a&&b)return a+" \u2022 "+b;else if(a)return a;else if(b)return b;return null}function k(a,b){var c=null;a.members&&a.members.edges&&a.members.edges.length>0?c=a.members.edges.map(function(a){return a.node.name}).join(", "):a.is_work_user?c=j(a):b&&a.is_viewer_friend===!1&&(c=b);return c}var l={convertWorkChatProfileToEntry:function(a,c){var d;if(!a||!a.id||!a.name)return null;var e=b("MercuryParticipantTypes").NON_FRIEND;d=a.is_viewer_coworker||((d=a.work_foreign_entity_info)!=null?d.type:d)===b("WorkForeignEntityType").NOT_FOREIGN;a.is_work_user&&d&&(e=b("MercuryParticipantTypes").FB4C);return new(b("SearchableEntry"))({uniqueID:a.id,title:a.name,type:e,subtitle:c,photo:a.profile_picture&&a.profile_picture.uri,auxiliaryData:{isWorkUser:a.is_work_user,workForeignEntityInfo:a.work_foreign_entity_info},order:-a.viewer_affinity})},convertProfileToEntry:function(a,c){var d;if(!a||!a.id||!a.name)return null;var e=b("MercuryParticipantTypes").NON_FRIEND;d=a.is_viewer_coworker||((d=a.work_foreign_entity_info)!=null?d.type:d)===b("WorkForeignEntityType").NOT_FOREIGN;a.is_work_user&&d?e=b("MercuryParticipantTypes").FB4C:(a.is_viewer_friend||a.messenger_contact.is_on_viewer_contact_list||d&&a.viewer_affinity>0)&&(e=b("MercuryParticipantTypes").FRIEND);d=k(a,c);return new(b("SearchableEntry"))({uniqueID:a.id,title:a.name,type:e,subtitle:d,photo:a.profile_picture&&a.profile_picture.uri,uri:a.url,auxiliaryData:{isMemorializedUser:a.is_memorialized,isMessengerUser:a.is_messenger_user,isWorkUser:a.is_work_user,isVerified:!h&&a.is_verified,isActiveAccount:a.work_info&&a.work_info.is_active_account,workForeignEntityInfo:a.work_foreign_entity_info,alias:a.username},order:-a.viewer_affinity})},convertPageToEntry:function(a,c){if(!a||!a.id||!a.name)return null;return a.instant_game_info?this.convertGameToEntry(a,c):new(b("SearchableEntry"))({uniqueID:a.id,title:a.name,type:c,photo:a.profile_picture&&a.profile_picture.uri,uri:a.url,auxiliaryData:{isMessengerUser:a.is_messenger_user,isWorkUser:a.is_work_user,canViewerMessage:a.can_viewer_message,isVerified:!h&&a.is_verified,canViewerAddToGroupChat:a.can_viewer_add_to_group_chat},order:0})},convertGameToEntry:function(a,c){return!a||!a.id||!a.name||!a.instant_game_info?null:new(b("SearchableEntry"))({uniqueID:a.id,title:a.name,type:b("MercuryTypeaheadConstants").GAME_TYPE,photo:a.instant_game_info&&a.instant_game_info.icon_uri,uri:a.instant_game_info&&a.instant_game_info.game_uri,order:0})},convertMessageToEntry:function(a){__p&&__p();var c,d;c=a==null?void 0:(c=a.message_thread)==null?void 0:c.thread;d=a==null?void 0:(d=a.matched_message)==null?void 0:d.message;var e=a==null?void 0:a.thread_id,f=a==null?void 0:a.matched_message;a=Number(a==null?void 0:(a=a.message_thread)==null?void 0:a.approx_count);if(c==null||d==null||e==null||f==null||a==null)return null;var j="message:"+e,k=d.snippet,m=g._("\u4e00\u81f4\u3059\u308b\u30e1\u30c3\u30bb\u30fc\u30b8{number of messages}\u4ef6",[g._param("number of messages",a)]);m=a>1?m:k;k=d.timestamp;typeof k==="number"&&a===1?k*=1e3:k=void 0;a=a==1?(d=f)!=null?(d=d.search_result_context)!=null?d.match_ranges:d:d:null;f={matchRanges:a,timestamp:k,thread_id:e,messageResultType:"1on1Conversation"};d="";a=null;if(c.image!==void 0){c.thread_name&&(d=c.thread_name);c.image&&(a=c.image.uri);if(c.all_participants&&c.all_participants.nodes&&c.all_participants.count){if(d==""){k=c.all_participants.count;var n=c.all_participants.nodes.map(function(a){return a.messaging_actor.name}).filter(Boolean);d=l.getParticipantsText(!0,n,k)}n=c.all_participants.nodes.map(function(a){a=i(a.messaging_actor.id);return{id:a}});f=babelHelpers["extends"]({},f,{messageResultType:"groupConversation",participantsToRender:n,thread:{thread_id:e,image_src:a,participants:n.map(function(a){return a.id})}})}}else if(c.all_participants&&c.all_participants.nodes[0]&&c.all_participants.nodes[0].messaging_actor){k=c.all_participants.nodes[0].messaging_actor;k.name&&(d=k.name);k.profile_picture&&(a=k.profile_picture.uri);typeof k.is_memorialized==="boolean"&&(f.isMemorializedUser=k.is_memorialized);typeof k.is_messenger_user==="boolean"&&(f.isMessengerUser=k.is_messenger_user);typeof k.is_work_user==="boolean"&&(f.isWorkUser=k.is_work_user);typeof k.is_verified==="boolean"&&(!h&&(k.__typename==="User"||k.__typename==="Page")?f.isVerified=k.is_verified:f.isVerified=!1);typeof k.username==="string"&&(f.alias=k.username);k.work_foreign_entity_info&&(f.workForeignEntityInfo=k.work_foreign_entity_info)}return new(b("SearchableEntry"))({uniqueID:j,title:d,subtitle:m,type:b("MercuryTypeaheadConstants").MESSAGE_TYPE,photo:a,uri:null,order:0,auxiliaryData:f})},convertGroupToEntry:function(a,c){__p&&__p();var d;if(!a||!a.thread_key||!a.is_group_thread)return null;var e=a.thread_key.thread_fbid;if(!e)return null;var f=a.image&&a.image.uri;d=a==null?void 0:(d=a.other_participants)==null?void 0:d.edges;if(d==null)return null;d=d.map(function(a){return a.node.messaging_actor.name});d=l.getParticipantsText(!1,d,a.other_participants.count);var g=a.name,h=null;!g?g=d:h=d;if(!g)return null;d={};d.thread={thread_id:e,other_user_fbid:null,image_src:f,participants:a.other_participants.edges.map(function(a){return i(a.node.messaging_actor.id)})};d.participantsToRender=a.other_participants.edges.map(function(a){return{id:i(a.node.messaging_actor.id),is_messenger_user:a.node.messaging_actor.is_messenger_user,is_coworker:a.node.messaging_actor.is_viewer_coworker}});return new(b("SearchableEntry"))({uniqueID:e,order:c,photo:f,title:g,subtitle:h,type:b("MercuryParticipantTypes").THREAD,auxiliaryData:d})},convertMSQGroupToEntry:function(a,c,d){__p&&__p();var e,f;if(!a||!a.thread_key)return null;e=a==null?void 0:(e=a.thread_key)==null?void 0:e.thread_fbid;if(!e)return null;var g=a.image&&a.image.uri;f=a==null?void 0:(f=a.all_participants)==null?void 0:f.edges;if(f==null)return null;f=f.filter(function(a){return a.node.id!==d});var h=f.map(function(a){return a.node.messaging_actor.name});h=l.getParticipantsText(!0,h,a.all_participants.count);a=a.thread_name;var j=null;!a?a=h:j=h;if(!a)return null;h={};h.thread={thread_id:e,other_user_fbid:null,image_src:g,participants:f.map(function(a){return i(a.node.messaging_actor.id)})};h.participantsToRender=f.map(function(a){return{id:i(a.node.messaging_actor.id),is_messenger_user:a.node.messaging_actor.is_messenger_user,is_coworker:a.node.messaging_actor.is_viewer_coworker}});return new(b("SearchableEntry"))({uniqueID:e,order:c,photo:g,title:a,subtitle:j,type:b("MercuryParticipantTypes").THREAD,auxiliaryData:h})},getValidatedMatchesRanges:function(a,b){__p&&__p();if(!Array.isArray(a))return[];a=[].concat(a).filter(function(a){var c=a.length;a=a.offset;if(typeof c!=="number"||typeof a!=="number")return;return c>0&&a>=0&&a+c<=b.length}).sort(function(a,b){return a.offset-b.offset});var c=[];a.forEach(function(a,b){if(b!=0){b=c[c.length-1];b=b.offset+b.length;if(a.offset<b)return}c.push(a)});return c},getParticipantsText:function(a,b,c,d){__p&&__p();d===void 0&&(d=3);if(a===null||c==null)return b.join(", ");var e=1;a||(c+=e);var f=b.length<=d;a=a&&b.length===c;if(f&&a)return b.slice(0,-1).join(", ");f=b.slice(0,d);a=c-e-f.length;return a<1?f.join(", "):g._("{name of the first n participants}\u3055\u3093\u3001\u4ed6{number of other participants}\u4eba",[g._param("name of the first n participants",f.join(", ")),g._param("number of other participants",a)])}};e.exports=l}),null);
__d("MessengerNewGroupParticipantSuggestionQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"2339215389425518"};b.getQueryID=function(){return"339708329890231"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerNewGroupParticipantSuggestionLocalCacheManager",["AsyncRequest","MercurySingletonProvider","MessengerGraphQLTypeaheadAdapter","MessengerNewGroupParticipantSuggestionQueryWebGraphQLQuery","SearchSourceCallbackManager","TokenizeUtil","emptyFunction","immutable","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=function(){__p&&__p();function a(a,c){this.entriesPromise=null,this.orderedFriendEntries=null,this.alreadyParticipatingIDs=null,this.shouldRefetch=!1,this.cursor=null,this.threadFBID=a,this.alreadyParticipatingIDs=c,this.callbackManager=new(b("SearchSourceCallbackManager"))({parseFn:b("TokenizeUtil").parse,matchFn:b("TokenizeUtil").isQueryMatch,indexFn:null})}var c=a.prototype;c.onEntriesLoaded=function(a){__p&&__p();var c=this;if(this.orderedFriendEntries!==null&&!this.shouldRefetch){a(this.orderedFriendEntries);return}if(this.entriesPromise===null||this.shouldRefetch){var d=this.alreadyParticipatingIDs?this.alreadyParticipatingIDs.toArray():null;d=b("MessengerNewGroupParticipantSuggestionQueryWebGraphQLQuery").getURI({original_participant_ids:d,count:50});this.entriesPromise=new(b("AsyncRequest"))(d).setAllowCrossPageTransition(!0).exec().then(function(a){return a.getPayload().data}).then(function(a){var d=a.viewer.messenger_contextual_ranked_users.edges.map(function(a){return b("MessengerGraphQLTypeaheadAdapter").convertProfileToEntry(a.node)}).filter(function(a){return a!==null});c.callbackManager.addLocalEntries(d);c.orderedFriendEntries=d;d=(d=a)!=null?(d=d.viewer)!=null?(d=d.messenger_contextual_ranked_users)!=null?(d=d.page_info)!=null?d.has_next_page:d:d:d:d;d&&(c.cursor=a.viewer.messenger_contextual_ranked_users.page_info.end_cursor)})}this.entriesPromise&&b("promiseDone")(this.entriesPromise,function(){a(c.orderedFriendEntries),c.loadMoreFriends(),c.shouldRefetch=!1},b("emptyFunction"))};c.loadMoreFriends=function(){__p&&__p();var a=this;if(this.cursor==null)return;var c=this.cursor;this.cursor=null;b("promiseDone")(new(b("AsyncRequest"))(b("MessengerNewGroupParticipantSuggestionQueryWebGraphQLQuery").getLegacyURI({cursor:c})).setAllowCrossPageTransition(!0).exec().then(function(a){return a.getPayload()}),function(c){a.callbackManager.addLocalEntries(c.viewer.messenger_contextual_ranked_users.edges.map(function(a){return b("MessengerGraphQLTypeaheadAdapter").convertProfileToEntry(a.node)}).filter(function(a){return a!==null}))})};c.search=function(a,b){var c=this;this.onEntriesLoaded(function(){c.callbackManager.search(a,function(c){b(c,a)})})};c.participantsSame=function(a){return this.twoIDsListEquals(this.alreadyParticipatingIDs,a)};c.twoIDsListEquals=function(a,b){return a?b.size!==a.size?!1:b.isSuperset(a):b.size==0};c.setRefetchAndRefreshData=function(a){this.shouldRefetch=!0,this.alreadyParticipatingIDs=a};c.isBootstrapped=function(a){return this.orderedFriendEntries!==null&&this.participantsSame(a)};return a}();a=function(){__p&&__p();a.get=function(){return h.get()};function a(){this.threadFBIDToCacheMap=new Map()}var b=a.prototype;b.onEntriesLoaded=function(a,b,c){var d=this.threadFBIDToCacheMap.get(a);!d?(d=new g(a,b),this.threadFBIDToCacheMap.set(a,d)):d.participantsSame(b)||d.setRefetchAndRefreshData(b);d.onEntriesLoaded(c)};b.search=function(a,b,c,d){var e=this.threadFBIDToCacheMap.get(a);!e?(e=new g(a,b),this.threadFBIDToCacheMap.set(a,e)):e.participantsSame(b)||e.setRefetchAndRefreshData(b);e.search(c,d)};b.isBootstrapped=function(a,b){if(!a)return!1;a=this.threadFBIDToCacheMap.get(a);return a?a.isBootstrapped(b):!1};return a}();var h=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MessengerRoomWithAssocObjectAudienceWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"2046569042080039"};b.getQueryID=function(){return"2118248735074331"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerRoomWithAssocObjectAudienceLocalCacheManager",["AsyncRequest","MercurySingletonProvider","MessengerGraphQLTypeaheadAdapter","MessengerRoomWithAssocObjectAudienceWebGraphQLQuery","SearchSourceCallbackManager","TokenizeUtil","emptyFunction","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=function(){__p&&__p();function a(a){this.entriesPromise=null,this.audienceEntries=null,this.threadFBID=a,this.callbackManager=new(b("SearchSourceCallbackManager"))({parseFn:b("TokenizeUtil").parse,matchFn:b("TokenizeUtil").isQueryMatch,indexFn:null})}var c=a.prototype;c.onEntriesLoaded=function(a){__p&&__p();var c=this;if(this.audienceEntries!==null){a(this.audienceEntries,!0);return}if(this.entriesPromise===null){var d=b("MessengerRoomWithAssocObjectAudienceWebGraphQLQuery").getURI({thread_fbid:this.threadFBID,first:30});this.entriesPromise=new(b("AsyncRequest"))(d).setAllowCrossPageTransition(!0).exec().then(function(a){return a.getPayload()}).then(function(a){a=a.data.message_thread.messaging_audience_list.edges.map(function(a){return b("MessengerGraphQLTypeaheadAdapter").convertProfileToEntry(a.node)}).filter(function(a){return a!==null});c.callbackManager.addLocalEntries(a);c.audienceEntries=a})}this.entriesPromise&&b("promiseDone")(this.entriesPromise,function(){a(c.audienceEntries,!0)},b("emptyFunction"))};c.search=function(a,b){var c=this;this.onEntriesLoaded(function(){c.callbackManager.search(a,function(c){b(c,a)})})};c.isBootstrapped=function(){return this.audienceEntries!==null};return a}();a=function(){__p&&__p();a.get=function(){return h.get()};function a(){this.threadFBIDToCacheMap=new Map()}var b=a.prototype;b.onEntriesLoaded=function(a,b){var c=this.threadFBIDToCacheMap.get(a);c||(c=new g(a),this.threadFBIDToCacheMap.set(a,c));c.onEntriesLoaded(b)};b.search=function(a,b,c){var d=this.threadFBIDToCacheMap.get(a);d||(d=new g(a),this.threadFBIDToCacheMap.set(a,d));d.search(b,c)};b.isBootstrapped=function(a){if(!a)return!1;a=this.threadFBIDToCacheMap.get(a);return a?a.isBootstrapped():!1};return a}();var h=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("XMessengerDotComSettingsEditController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/settings/edit/",{})}),null);
__d("MessengerSettingsActions",["AsyncRequest","CurrentEnvironment","MessengerDesktopNotificationPermissions","MessengerDesktopNotifications","MessengerDispatcher","MessengerURIConstants","XMessengerDotComSettingsEditController","keyMirror"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("keyMirror")({CHANGE_SETTINGS:null,CHANGE_DESKTOP_NOTIFS:null});a={Types:g,changeSettings:function(a){var c=b("XMessengerDotComSettingsEditController").getURIBuilder().getURI();b("CurrentEnvironment").facebookdotcom&&c.setPath(b("MessengerURIConstants").FACEBOOK_PREFIX+c.getPath());new(b("AsyncRequest"))().setData({settings:a}).setURI(c).send();b("MessengerDispatcher").dispatch({type:g.CHANGE_SETTINGS,newSettings:a})},changeDesktopNotifs:function(a,c){a&&!b("MessengerDesktopNotifications").isGranted()?b("MessengerDesktopNotifications").requestPermission(function(d){if(d!==b("MessengerDesktopNotificationPermissions").GRANTED){b("MessengerDesktopNotifications").checkPermission()===b("MessengerDesktopNotificationPermissions").DENIED&&(c&&c());return}b("MessengerDispatcher").dispatch({type:g.CHANGE_DESKTOP_NOTIFS,desktopNotifsEnabled:a})}):b("MessengerDispatcher").dispatch({type:g.CHANGE_DESKTOP_NOTIFS,desktopNotifsEnabled:a})}};e.exports=a}),null);
__d("MessengerButtonReact.bs",["cx","bs_curry","React","LinkReact.bs","ReasonReact.bs","joinClasses","bs_js_primitive","bs_js_null_undefined"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(a,c,d){if(a){d.preventDefault();return 0}else if(c!==void 0)return b("bs_curry")._1(c,d);else return 0}function i(a){if(a!==void 0)return{color:a}}function j(a,c,d,e,f){c="_3quh _30yy"+(c===0?" _2t_":"")+(c===1?" _2u0":"")+(c===2?" _17u4":"")+(f===1?" _3ay_":"")+(d?" _4zab":"")+(e?" _fy2":"");if(a!==void 0)return b("joinClasses")(c,a);else return c}function a(a){__p&&__p();var c=a.ariaLabel,d=a.ariaHidden,e=a.role,f=a.tabIndex,g=a.target,k=a.onClick,l=a.disabled,m=l!==void 0?l:!1;l=a.className;var n=a.color,o=a.customColor;o=o!==void 0?o:!1;var p=a.label,q=a.type,r=a.use;r=r!==void 0?r:0;var s=a.href,t=a.wrapperClassName;t=t!==void 0?t:"";a=a.dataTestID;var u=function(a){return h(m,k,a)};l=j(l,q,m,o,r);q=i(n);if(s!==void 0)return b("ReasonReact.bs").element(void 0,void 0,b("LinkReact.bs").make(void 0,d,c,l,void 0,void 0,void 0,void 0,void 0,s,void 0,u,void 0,void 0,e,void 0,q,f,g,void 0,p));else{o=b("joinClasses")("_30vt",t);r={className:l,onClick:u};d!==void 0&&(r["aria-hidden"]=b("bs_js_primitive").valFromOption(d));c!==void 0&&(r["aria-label"]=b("bs_js_primitive").valFromOption(c));e!==void 0&&(r.role=b("bs_js_primitive").valFromOption(e));q!==void 0&&(r.style=b("bs_js_primitive").valFromOption(q));f!==void 0&&(r.tabIndex=b("bs_js_primitive").valFromOption(f));g!==void 0&&(r.target=b("bs_js_primitive").valFromOption(g));n=b("React").createElement("button",r,p);s=b("React").cloneElement(n,{"data-testid":b("bs_js_null_undefined").fromOption(a)});return b("React").createElement("span",{className:o},s)}}c=a;f.handleLinkClick=h;f.elementStyle=i;f.interactionElementClassName=j;f.make=c}),null);
__d("MessengerBootloadedSecondarySearchLogger",["Bootloader","MessengerSecondarySearchFunnelConstants","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[],h="",i={LOCAL_CONTACTS:[],ORDERED_GCF_FRIENDLIST:[],SHORT_PROFILES:[],SUGGESTED_RECIPIENTS:[]},j=!1,k=!1;c=b("MessengerSecondarySearchFunnelConstants").EVENTS;var l=c.CLICK_OTHER_THREAD,m=c.END,n=c.IMPRESSIONS,o=c.START,p=c.QUERY_CHANGED,q=c.RESULT_SELECTED,r=c.SOURCE_ENDED,s=c.SOURCE_STARTED,t=c.TOKEN_REMOVED;d=b("MessengerSecondarySearchFunnelConstants").END_ACTIONS;var u=d.ABANDON,v=d.SINGLE_RESULT_SELECTED;f=b("MessengerSecondarySearchFunnelConstants").SOURCES;var w=f.SERVER,x=f.SHORT_PROFILES,y=f.SUGGESTED_RECIPIENTS,z=f.LOCAL_CONTACTS,A=f.LOCAL_AND_SERVER,B=f.ORDERED_GCF_FRIENDLIST,C=b("MessengerSecondarySearchFunnelConstants").ENTRY_SURFACES.COMPOSER;function D(a){if(i.SUGGESTED_RECIPIENTS.includes(a))return y;else if(i.ORDERED_GCF_FRIENDLIST.includes(a))return B;else if(i.SHORT_PROFILES.includes(a))return x;else if(i.LOCAL_CONTACTS.includes(a))return z;else return w}function a(a){__p&&__p();if(!b("gkx")("678592"))return;b("Bootloader").loadModules(["MessengerSecondarySearchFunnelLogger"],function(c){__p&&__p();switch(a.name){case o:if(a.surface===C&&k===!0){c.reenterSearch(a.loggingID);break}j=!1;i={LOCAL_CONTACTS:[],ORDERED_GCF_FRIENDLIST:[],SHORT_PROFILES:[],SUGGESTED_RECIPIENTS:[]};c.startFunnel(a.client,a.surface,a.surface,null,a.loggingID);a.surface===C&&(k=!0);break;case m:var d=a.end_reason;a.surface===b("MessengerSecondarySearchFunnelConstants").SEARCH_SURFACES.BROADCAST&&(d=j?v:u);c.endFunnel(b("MessengerSecondarySearchFunnelConstants").END_REASONS.ACTION,d,a.loggingID,a.threadID,a.isNewThread);k=!1;break;case n:d=a.entries.map(function(a){a.data_source=[D(a.result_fbid)];return a});g=a.entries.map(function(a){return a.result_fbid});c.impressions(a.query,d,A,a.loggingID);break;case p:h=a.query;c.queryChanged(a.query,a.loggingID);break;case q:j=!0;d=D(a.id);var e=g.indexOf(a.id);c.resultSelected(a.id,e,a.type,a.query?a.query:h,d,a.surface,a.loggingID,a.selectionType);break;case r:e=!a.query||a.query===h;switch(a.source){case z:i.LOCAL_CONTACTS=a.ids?a.ids:[];break;case y:i.SUGGESTED_RECIPIENTS=a.ids?a.ids:[];break;case x:i.SHORT_PROFILES=a.ids?a.ids:[];e=!0;break;case B:i.ORDERED_GCF_FRIENDLIST=a.ids?a.ids:[];e=!0;break;default:break}c.sourceEnded(a.query,a.numResults,a.source,a.status,e,a.loggingID);break;case s:c.sourceStarted(a.query,a.source,a.loggingID);break;case t:c.tokenRemoved(a.deletedIDs,a.clearedAll,a.loggingID);break;case l:c.unfocusSearch(a.loggingID);break}},"MessengerBootloadedSecondarySearchLogger")}e.exports={logSearchEvent:a}}),null);
__d("MNPlatformAttributionTags",[],(function(a,b,c,d,e,f){e.exports={ATTRIBUTION_TAGS_PREFIX:"bnp:trigger:",CUSTOMER_CHAT_PLUGIN:"customer_chat_plugin",MESSENGERDOTCOM:"messengerdotcom",MESSENGER_WEB:"messenger_web",MESSENGER_WEB_SEARCH:"messenger_web_search",M_DOT_ME:"m_dot_me"}}),null);
__d("MessengerStore",["MessengerDispatcher","mixInEventEmitter"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1=b("MessengerDispatcher").register(this.__onDispatch.bind(this))}var c=a.prototype;c.getDispatchToken=function(){return this.$1};c.emitChange=function(){this.emit("change")};c.destroy=function(){b("MessengerDispatcher").unregister(this.$1)};return a}();b("mixInEventEmitter")(a,{change:!0});e.exports=a}),null);
__d("MessengerAttributionTagsStore",["MessengerActions","MessengerStore"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b;b=a.call(this)||this;b.$MessengerAttributionTagsStore1={messagingTags:null,threadID:null};return b}var d=c.prototype;d.getState=function(){return this.$MessengerAttributionTagsStore1};d.__onDispatch=function(a){switch(a.type){case b("MessengerActions").Types.UPDATE_THREAD_TAG:this.$MessengerAttributionTagsStore1.messagingTags=a.messagingTags;this.$MessengerAttributionTagsStore1.threadID=a.threadID;this.emitChange();break;case b("MessengerActions").Types.SELECT_THREAD:this.$MessengerAttributionTagsStore1.messagingTags=null;this.$MessengerAttributionTagsStore1.threadID=null;this.emitChange();break}};return c}(b("MessengerStore"));e.exports=new a()}),null);
__d("MNPlatformTagsDataManager",["MessagingSourceEnum","MessengerActions","MessengerAttributionTagsStore","MessengerDiscoveryEntryPoint","MessengerDiscoveryEntryPointsLoggingHelper","MNPlatformAttributionTags"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports={getTags:function(a){__p&&__p();a===void 0&&(a=null);var c=null,d=null;switch(a){case b("MessagingSourceEnum").PAGES_MESSAGE_SHORTLINK:c=b("MNPlatformAttributionTags").M_DOT_ME;break;case b("MessagingSourceEnum").MESSENGER_WEB:c=b("MNPlatformAttributionTags").MESSENGER_WEB;break;case b("MessagingSourceEnum").MESSENGER_WEB_SEARCH:c=b("MNPlatformAttributionTags").MESSENGER_WEB_SEARCH;d=b("MessengerDiscoveryEntryPointsLoggingHelper").getEntryPointsLoggingTagStr([b("MessengerDiscoveryEntryPoint").MESSENGERDOTCOM_WEB_SEARCH]);break;case b("MessagingSourceEnum").CUSTOMER_CHAT_PLUGIN:c=b("MNPlatformAttributionTags").CUSTOMER_CHAT_PLUGIN;break;case b("MessagingSourceEnum").PAGE_PLUGIN_MESSAGE:c=b("MessengerDiscoveryEntryPointsLoggingHelper").getEntryPointsLoggingTagStr([b("MessengerDiscoveryEntryPoint").MESSENGERDOTCOM_PAGES_PLUGIN]);break;default:c="";break}a=[c];d!==null&&a.push(d);return a},updateThreadTabAfterSelectThread:function(a,c){a===void 0&&(a=null);c===void 0&&(c=null);a=this.getTags(a);b("MessengerActions").changeThreadTag(a,c)},hasThreadTags:function(a){var c=b("MessengerAttributionTagsStore").getState();return!!(c.messagingTags&&a&&c.threadID&&c.threadID.toString()===a)},getThreadTags:function(){var a=b("MessengerAttributionTagsStore").getState();return a.messagingTags}}}),null);
__d("MessengerContentSearchFunnelLoggerConstants",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({BROWSE_MESSAGE_IN_THREAD:"browse_message_in_thread",CHANGE_QUERY:"change_query",END_CONTENT_SEARCH:"end_content_search",INITIATE_CONTENT_SEARCH:"initiate_content_search",LOAD_MORE_THREADS:"load_more_threads",NUM_BROWSE_ACTIONS_WITHIN_THREAD:"num_browse_actions_within_thread",SELECT_THREAD:"select_thread",THREAD_IMPRESSIONS:"thread_impressions",LOAD_MESSAGE_IN_THREAD:"load_message_in_thread",BROWSE_CONTEXT:"browse_context"});b=Object.freeze({SEARCH_FROM_INTEGRATED_MESSAGE_SEARCH:"search_from_integrated_message_search",SEARCH_WITHIN_THREAD:"search_within_thread",SEARCH_ALL_THREADS:"search_all_threads"});c=Object.freeze(babelHelpers["extends"]({},b,{END_WITH_DONE_BUTTON:"end_with_done_button",END_WITH_X_BUTTON:"end_with_x_button",END_WITH_BACK_BUTTON:"end_with_back_button",END_BY_CHANGING_THREADS:"end_by_changing_threads"}));e.exports={FUNNEL_NAME:"WWW_MESSENGER_CONTENT_SEARCH_FUNNEL",FUNNEL_LOGGER_EVENTS:a,FUNNEL_LOGGER_TAGS:c,ENTRY_SURFACES:b}}),null);
__d("MessengerPaymentFriendsQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"1959479940789272"};b.getQueryID=function(){return"2171073576453933"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerPaymentFriendsLocalCache",["AsyncRequest","MessengerGraphQLTypeaheadAdapter","MessengerPaymentFriendsQueryWebGraphQLQuery","SearchSourceCallbackManager","TokenizeUtil","emptyFunction","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new(b("SearchSourceCallbackManager"))({parseFn:b("TokenizeUtil").parse,matchFn:b("TokenizeUtil").isQueryMatch,indexFn:null}),h=null,i=null,j={onEntriesLoaded:function(a){__p&&__p();if(i){a(i);return}if(!h){var c=b("MessengerPaymentFriendsQueryWebGraphQLQuery").getURI({first:50});h=new(b("AsyncRequest"))(c).setAllowCrossPageTransition(!0).exec().then(function(a){return a.getPayload()}).then(function(a){var c=a.data.viewer.all_friends.edges.map(function(a){return b("MessengerGraphQLTypeaheadAdapter").convertProfileToEntry(a.node)}).filter(function(a){return a!==null});g.addLocalEntries(c);i=c;a.data.viewer.all_friends.page_info.end_cursor})}b("promiseDone")(h,function(){a(i)},b("emptyFunction"))},search:function(a,b){j.onEntriesLoaded(function(){g.search(a,function(c){b(c,a)})})},isBootstrapped:function(){return i!==null}};e.exports=j}),null);
__d("MessengerSearchQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"2189148087863081"};b.getQueryID=function(){return"2343018689305473"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerSearchSeeAllQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"2765614876786361"};b.getQueryID=function(){return"350794689172284"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerGroupSearchResultsQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"2950938174931326"};b.getQueryID=function(){return"666334973823993"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerMessageSearchResultsQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"2706854202719826"};b.getQueryID=function(){return"332444434106998"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerPageSearchResultsQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"2230378867058421"};b.getQueryID=function(){return"419711615545533"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerProfileSearchResultsQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"2530922320303835"};b.getQueryID=function(){return"1187203711467179"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerRoomAudienceSearchResultsQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"2239687859487185"};b.getQueryID=function(){return"398906294161848"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerSearchWebGraphQLFetcherUtils",["CurrentUser","MessengerGroupSearchResultsQueryWebGraphQLQuery","MessengerMessageSearchResultsQueryWebGraphQLQuery","MessengerPageSearchResultsQueryWebGraphQLQuery","MessengerProfileSearchResultsQueryWebGraphQLQuery","MessengerRoomAudienceSearchResultsQueryWebGraphQLQuery","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={formSearchRequests:function(a,c,d){__p&&__p();var e={profiles:[],pages:[],rooms:[],messages:[]},f=b("CurrentUser").isWorkUser()&&b("gkx")("903262")?"workchat":"web_messenger_composer";a.forEach(function(a){__p&&__p();switch(a){case"users":a=Math.floor(Math.random()*65536);e.profiles.push(new(b("MessengerProfileSearchResultsQueryWebGraphQLQuery"))({search_query:c,result_limit:d.userLimit,can_viewer_send_money:d.canViewerSendMoneyFilter,session:a.toString(),exclude_ids:d.localEntryIDs,context:f}));break;case"groups":e.profiles.push(new(b("MessengerGroupSearchResultsQueryWebGraphQLQuery"))({search_query:c,result_limit:d.groupLimit,exclude_ids:d.localEntryIDs,context:f}));break;case"messages":e.messages.push(new(b("MessengerMessageSearchResultsQueryWebGraphQLQuery"))({search_query:c,result_limit:d.messageLimit,exclude_ids:[],context:f}));break;case"pages":e.pages.push(new(b("MessengerPageSearchResultsQueryWebGraphQLQuery"))({search_query:c,result_limit:d.pageLimit,messenger_commerce:!0,include_games:!0,internal_bot:!1,vc_endpoint:!1,context:f}));d.shouldQueryInternalBot===!0&&e.pages.push(new(b("MessengerPageSearchResultsQueryWebGraphQLQuery"))({search_query:c,result_limit:d.pageLimit,messenger_commerce:!1,include_games:!1,internal_bot:!0,vc_endpoint:!1,context:f}));d.shouldQueryVCEndpoint===!0&&e.pages.push(new(b("MessengerPageSearchResultsQueryWebGraphQLQuery"))({search_query:c,result_limit:d.pageLimit,messenger_commerce:!1,include_games:!1,internal_bot:!1,vc_endpoint:!0,context:f}));break;case"rooms":d.threadFBID!=null&&e.rooms.push(new(b("MessengerRoomAudienceSearchResultsQueryWebGraphQLQuery"))({search_query:c,result_limit:d.userLimit,thread_fbid:d.threadFBID}))}});return e},formMSQMessageSearchRequest:function(a,c){var d=[];d.push(new(b("MessengerMessageSearchResultsQueryWebGraphQLQuery"))({search_query:a,result_limit:c,exclude_ids:[],context:"web_messenger_composer"}));return d}};e.exports=a}),null);
__d("MessengerUniversalSearchFunnelLoggerConstants",[],(function(a,b,c,d,e,f){"use strict";a={END:"end",IMPRESSIONS:"impressions",QUERY_CHANGED:"query_changed",REENTERED:"reentered",RESULT_SELECTED:"result_selected",SOURCE_ENDED:"source_ended",SOURCE_STARTED:"source_started",START:"start"};b={FIRST:"first",SEE_ALL:"see_all"};c={USER_CONTACT:"user_contact",USER_NON_CONTACT:"user_non_contact",GROUP:"group",PAGE:"page",GAME:"game",TINCAN:"tincan",COWORKER:"coworker",MESSAGE:"message",OTHER:"other"};d={MESSENGER_DOT_COM:"messenger_dot_com",WWW:"www"};f=Object.freeze({INBOX:"inbox",SIDEBAR:"sidebar"});var g={NULL_STATE:"null_state",TYPEAHEAD:"typeahead"},h={LOCAL:"local",SERVER:"server",SERVER_XCONTROLLER:"server_xcontroller",LOCAL_AND_SERVER:"local_and_server",SERVER_USERS_GROUPS:"server_users_groups",SERVER_PAGES:"server_pages",SERVER_ROOMS:"server_rooms"},i={FAILED:"failed",FINISHED:"finished"},j={LOCAL:"local",SERVER:"server"},k={END_ACTION:"end_action"},l=Object.freeze({ABANDON:"abandon",RESULT_SELECTED:"result_selected",MESSAGE_SEARCH:"message_search",ENTER_INTEGRATED_MESSAGE_SEARCH:"enter_integrated_message_search",SEND:"send",CALL:"call"});e.exports={NAME:"MESSENGER_UNIVERSAL_SEARCH_FUNNEL",TYPE:"UNIVERSAL",END_ACTIONS:l,END_REASONS:k,ENTRY_SURFACES:f,EVENTS:a,INTERFACES:d,QUERY_PROGRESS:i,RESULT_PAGES:b,RESULT_SURFACES:g,RESULT_TYPES:c,SOURCES:h,UI_SECTIONS:j}}),null);
__d("MessengerSearchWebGraphQLFetcher",["Promise","requireCond","Bootloader","CurrentUser","MercuryConfig","MercuryParticipantTypes","MercuryTypeaheadConstants","MessengerBootloadedSecondarySearchLogger","MessengerGraphQLTypeaheadAdapter","MessengerSearchQueryWebGraphQLQuery","MessengerSearchSeeAllQueryWebGraphQLQuery","MessengerSearchWebGraphQLFetcherUtils","MessengerSecondarySearchFunnelConstants","MessengerUniversalSearchFunnelLoggerConstants","MessengerView","PromiseUtil","WebGraphQL","cr:998965","compactArray","gkx"],(function(a,b,c,d,e,f){__p&&__p();var g=b("MessengerUniversalSearchFunnelLoggerConstants").TYPE,h=b("MessengerSecondarySearchFunnelConstants").SEARCH_SURFACES.OMNIPICKER,i=b("MercuryConfig").SearchMorePeople?b("MercuryConfig").SearchMorePeople:b("MercuryTypeaheadConstants").COMPOSER_NON_FRIENDS_MAX,j=b("gkx")("857049")?b("MercuryTypeaheadConstants").COMPOSER_FRIENDS_MAX:5,k=3;a=function(){"use strict";__p&&__p();function a(a,b){this.$1=0,this.$2=0,this.$3=0,this.$4=0,this.$5=0,this.$7="",this.$1=0,this.$2=0,this.$5=0,this.$6=a,this.$7=b}var c=a.prototype;c.fetchEntries=function(a,c,d,e,f){__p&&__p();var g=this;c=b("MessengerSearchWebGraphQLFetcherUtils").formSearchRequests(c,a,d);var h=c.pages,i=c.profiles,j=c.rooms,k=c.messages;if(h.length>0){this.$8("pages",a);this.$2=0;d=b("PromiseUtil").exponentialBackoff(function(){return b("Promise").all(b("WebGraphQL").execAll(h))});b("PromiseUtil").repeatWhileErrorUntil(d,function(b){return g.$9(b,a,e)},function(b){return g.$10(b,a,f)})()}if(i.length>0){this.$8("users_groups",a);this.$1=0;c=b("PromiseUtil").exponentialBackoff(function(){return b("Promise").all(b("WebGraphQL").execAll(i))});b("PromiseUtil").repeatWhileErrorUntil(c,function(b){g.$11(b,a,e)},function(b){return g.$12(b,a,f)})()}if(j.length>0){this.$8("rooms",a);this.$5=0;d=b("PromiseUtil").exponentialBackoff(function(){return b("Promise").all(b("WebGraphQL").execAll(j))});b("PromiseUtil").repeatWhileErrorUntil(d,function(b){g.$13(b,a,e)},function(b){return g.$14(b,a,f)})()}c=b("gkx")("975043");if(k.length>0&&c){this.$8("messages",a);this.$3=0;d=b("PromiseUtil").exponentialBackoff(function(){return b("Promise").all(b("WebGraphQL").execAll(k))});b("PromiseUtil").repeatWhileErrorUntil(d,function(b){g.$15(b,a,e)},function(b){return g.$16(b,a,f)})()}};c.fetchMSQEntries=function(a,c,d,e){__p&&__p();var f=this;if(c>0){this.$3=0;var g=b("MessengerSearchWebGraphQLFetcherUtils").formMSQMessageSearchRequest(a,c);this.$8("messages",a);c=b("PromiseUtil").exponentialBackoff(function(){return b("Promise").all(b("WebGraphQL").execAll(g))});b("PromiseUtil").repeatWhileErrorUntil(c,function(b){f.$15(b,a,d)},function(b){return f.$16(b,a,e)})()}this.$4=0;var h=[];h.push(new(b("MessengerSearchQueryWebGraphQLQuery"))({query:a}));c=b("PromiseUtil").exponentialBackoff(function(){return b("Promise").all(b("WebGraphQL").execAll(h))});b("PromiseUtil").repeatWhileErrorUntil(c,function(b){return f.$17(b,a,d)},function(b){return f.$18(b,a,e)})()};c.fetchMSSAQEntries=function(a,c,d,e,f,g){__p&&__p();var h=this;g===void 0&&(g=[]);if(c==="")return;this.$4=0;var i=[];switch(c){case b("MessengerView").MASTER.SEE_ALL_PEOPLE:i.push(new(b("MessengerSearchSeeAllQueryWebGraphQLQuery"))({query:a,exclude_ids:g,supported_types:[{result_type:"USER",limit:d}]}));break;case b("MessengerView").MASTER.SEE_ALL_GROUPS:i.push(new(b("MessengerSearchSeeAllQueryWebGraphQLQuery"))({query:a,exclude_ids:g,supported_types:[{result_type:"GROUP",limit:d}]}));break;case b("MessengerView").MASTER.SEE_ALL_PAGES:i.push(new(b("MessengerSearchSeeAllQueryWebGraphQLQuery"))({query:a,exclude_ids:g,supported_types:[{result_type:"PAGE",limit:d}]}));break}c=b("PromiseUtil").exponentialBackoff(function(){return b("Promise").all(b("WebGraphQL").execAll(i))});b("PromiseUtil").repeatWhileErrorUntil(c,function(b){return h.$17(b,a,e)},function(b){return h.$18(b,a,f)})()};c.$17=function(a,c,d){__p&&__p();var e=this;a=a[0];a=a==null?void 0:(a=a.messenger_search)==null?void 0:(a=a.result_modules)==null?void 0:(a=a.nodes)==null?void 0:(a=a[0])==null?void 0:(a=a.search_results)==null?void 0:a.edges;var f=[],g=0;a!=null&&a.forEach(function(a){__p&&__p();if(a.node&&a.node.__typename){var c=a.node.__typename;if(c==="User"){var d=b("MessengerGraphQLTypeaheadAdapter").convertProfileToEntry(a.node,null);d&&f.push(d)}if(c==="MessengerViewerGroupThread"){d=b("CurrentUser").getID();d=b("MessengerGraphQLTypeaheadAdapter").convertMSQGroupToEntry(a.node,g,d);d&&f.push(d);g++}if(c==="Page"){d=b("MessengerGraphQLTypeaheadAdapter").convertPageToEntry(a.node,e.$19(a.node));d&&f.push(d)}}});d(f,"singleServerQuery");this.$20("single_server_query",c,f)};c.fetchWorkChatSingleQueryEntries=function(a,c,d,e){__p&&__p();var f=this;if(b("cr:998965")==null)return;var g=[];g.push(b("cr:998965").formSearchRequests(a,c));c=b("PromiseUtil").exponentialBackoff(function(){return b("Promise").all(b("WebGraphQL").execAll(g))});b("PromiseUtil").repeatWhileErrorUntil(c,function(b){return f.$21(b,a,d)},function(b){return f.$22(b,a,e)})()};c.$21=function(a,c,d){__p&&__p();var e=this,f;a=a[0];if(this.$6()!==c)return;f=a==null?void 0:(f=a.entities_named)==null?void 0:f.user_group_results;var g=[],h=!1;!b("gkx")("857049")&&b("gkx")("980932")&&(h=!0);if(f!=null&&(f==null?void 0:f.edges)!=null&&(f==null?void 0:f.edges.length)>0){f=f.edges;f.map(function(a,c){var d=a.node;if(d!=null&&d.is_group_thread!=null){c=b("MessengerGraphQLTypeaheadAdapter").convertGroupToEntry(d,c);c&&g.push(c)}else{c=b("MessengerGraphQLTypeaheadAdapter").convertWorkChatProfileToEntry(d,h?a.subtext:null);c&&g.push(c)}})}f=a==null?void 0:(f=a.entities_named)==null?void 0:f.bot_results;if(f!=null&&(f==null?void 0:f.edges)!=null&&(f==null?void 0:f.edges.length)>0){f=f==null?void 0:f.edges;f.map(function(a,c){c=b("MessengerGraphQLTypeaheadAdapter").convertPageToEntry(a.node,e.$19(a.node));c&&g.push(c)})}a=a==null?void 0:(f=a.entities_named)==null?void 0:f.vc_results;if(a!=null&&(a==null?void 0:a.edges)!=null&&(a==null?void 0:a.edges.length)>0){f=a==null?void 0:a.edges;f.map(function(a,c){c=b("MessengerGraphQLTypeaheadAdapter").convertPageToEntry(a.node,e.$19(a.node));c&&g.push(c)})}d(g,"singleServerQuery");this.$20("wc_single_server_query",c,g)};c.$15=function(a,c,d){__p&&__p();a=a[0];if(this.$6()!==c)return;a=a==null?void 0:(a=a.entities_named)==null?void 0:(a=a.search_results)==null?void 0:a.edges;var e=[];a!=null&&a.forEach(function(a){a=b("MessengerGraphQLTypeaheadAdapter").convertMessageToEntry(a.node);a&&e.push(a)});d(e,"messages");this.$20("messages",c,e)};c.$13=function(a,c,d){if(this.$6()!==c)return;a=(a=a[0])!=null?(a=a.message_thread)!=null?(a=a.messaging_audience_list)!=null?a.nodes:a:a:a;if(a){a=b("compactArray")(a.map(function(a){return b("MessengerGraphQLTypeaheadAdapter").convertProfileToEntry(a)}));d(a,"usersGroups");this.$20("rooms",c,a)}};c.$11=function(a,c,d){__p&&__p();if(this.$6()!==c)return;var e=[],f=[],g=!1;!b("gkx")("857049")&&b("gkx")("980932")&&(g=!0);for(var a=a,h=Array.isArray(a),i=0,a=h?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j;if(h){if(i>=a.length)break;j=a[i++]}else{i=a.next();if(i.done)break;j=i.value}j=j;j=(j=j)!=null?(j=j.entities_named)!=null?(j=j.search_results)!=null?j.edges:j:j:j;j&&j.length>0&&j[0].node&&(j[0].node.is_group_thread!=null?e=j.map(function(a,c){return b("MessengerGraphQLTypeaheadAdapter").convertGroupToEntry(a.node,c)}):j[0].node.is_messenger_user!=null&&(f=j.map(function(a,c){return b("MessengerGraphQLTypeaheadAdapter").convertProfileToEntry(a.node,g===!0?a.subtext:null)}),f=this.$23(b("compactArray")(f))))}j=b("compactArray")(f.concat(e));d(j,"usersGroups");this.$20("users_groups",c,j)};c.$23=function(a){__p&&__p();var c=[],d=[],e=[];for(var a=a,f=Array.isArray(a),g=0,a=f?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=a.length)break;h=a[g++]}else{g=a.next();if(g.done)break;h=g.value}h=h;if(!h)continue;h.getType()===b("MercuryParticipantTypes").FRIEND&&c.length<j?c.push(h):h.getType()===b("MercuryParticipantTypes").NON_FRIEND&&e.length<i?e.push(h):h.getType()===b("MercuryParticipantTypes").FB4C&&d.length<b("MercuryTypeaheadConstants").COMPOSER_FB4C_MAX&&d.push(h)}return c.concat(d,e)};c.$9=function(a,c,d){__p&&__p();var e=this;if(this.$6()!==c)return;var f=[];for(var a=a,g=Array.isArray(a),h=0,a=g?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=a.length)break;i=a[h++]}else{h=a.next();if(h.done)break;i=h.value}i=i;i=(i=i)!=null?(i=i.entities_named)!=null?(i=i.search_results)!=null?i.edges:i:i:i;i=i?i.map(function(a){a=a.node;return b("MessengerGraphQLTypeaheadAdapter").convertPageToEntry(a,e.$19(a))}):[];f=f.concat(b("compactArray")(i.slice(0,b("MercuryTypeaheadConstants").COMPOSER_PAGES_MAX)))}d(f,"pages");this.$20("pages",c,f)};c.$19=function(a){if(!a||!a.category_type)return b("MercuryParticipantTypes").PAGE;if(a.category_type===b("MercuryTypeaheadConstants").WORKPLACE_BOT_CATEGORY_TYPE)return b("MercuryTypeaheadConstants").INTERNAL_BOT_PAGE_TYPE;else if(a.category_type==="MEETING_ROOM")return b("MercuryTypeaheadConstants").MEETING_ROOM_PAGE_TYPE;return b("MercuryTypeaheadConstants").PAGE_TYPE};c.$12=function(a,b,c){if(b===this.$6()){if(this.$1<k){this.$1+=1;return!0}c(a,"usersGroups")}return!1};c.$10=function(a,b,c){if(b===this.$6()){if(this.$2<k){this.$2+=1;return!0}c(a,"pages")}return!1};c.$16=function(a,b,c){if(b===this.$6()){if(this.$3<k){this.$3+=1;return!0}c(a,"messages")}return!1};c.$14=function(a,b,c){if(b===this.$6()){if(this.$5<k){this.$5+=1;return!0}c(a,"rooms")}return!1};c.$18=function(a,b,c){if(b===this.$6()){if(this.$4<k){this.$4+=1;return!0}c(a,"singleServerQuery")}return!1};c.$22=function(a,b,c){if(b===this.$6()){if(this.$4<k){this.$4+=1;return!0}c(a,"singleServerQuery")}return!1};c.$24=function(a){__p&&__p();var c="";switch(a){case"users_groups":c=b("MessengerUniversalSearchFunnelLoggerConstants").SOURCES.SERVER_USERS_GROUPS;break;case"pages":c=b("MessengerUniversalSearchFunnelLoggerConstants").SOURCES.SERVER_PAGES;break;case"rooms":c=b("MessengerUniversalSearchFunnelLoggerConstants").SOURCES.SERVER_ROOMS;break;default:c=""}return c};c.$8=function(a,c){var d=this;if(this.$7===g)b("Bootloader").loadModules(["MessengerUniversalSearchFunnelLogger"],function(e){var b=d.$24(a);e.logSourceStarted(c,b)},"MessengerSearchWebGraphQLFetcher");else if(this.$7===h){var e=this.$24(a);b("MessengerBootloadedSecondarySearchLogger").logSearchEvent({name:b("MessengerSecondarySearchFunnelConstants").EVENTS.SOURCE_STARTED,query:c,source:e,loggingID:b("MessengerSecondarySearchFunnelConstants").LOGGING_IDS.M_APP_COMPOSER})}};c.$20=function(a,c,d){__p&&__p();var e=this;if(this.$7===g)b("Bootloader").loadModules(["MessengerUniversalSearchFunnelLogger"],function(g){var f=e.$24(a);g.logSourceEnded(c,f,d.length,b("MessengerUniversalSearchFunnelLoggerConstants").QUERY_PROGRESS.FINISHED,e.$6()===c)},"MessengerSearchWebGraphQLFetcher");else if(this.$7===h){var f=this.$24(a);b("MessengerBootloadedSecondarySearchLogger").logSearchEvent({name:b("MessengerSecondarySearchFunnelConstants").EVENTS.SOURCE_ENDED,query:c,source:f,ids:d.map(function(a){return a.getUniqueID()}),status:b("MessengerSecondarySearchFunnelConstants").SOURCE_STATUSES.FINISHED,loggingID:b("MessengerSecondarySearchFunnelConstants").LOGGING_IDS.M_APP_COMPOSER})}};return a}();e.exports=a}),null);
__d("MessengerSpinnerReact.bs",["cx","ix","fbt","Image.bs","React","ReasonReact.bs","joinClasses"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=h("86853"),k=h("86857"),l=h("86854"),m=b("ReasonReact.bs").statelessComponent("MessengerSpinnerReact");function n(a,c,d,e,f){__p&&__p();var g=a!==void 0?a:"",h=c!==void 0?c:"blue",n=d!==void 0?d:24,o=e!==void 0?e:!1,p=function(){var a=n===24;if(a){a=h==="blue";if(a)return j;else return k}else return l},q=function(){return b("ReasonReact.bs").element(void 0,void 0,b("Image.bs").make(b("joinClasses")(g,"_3u55 _3qh2"),void 0,i._("\u8aad\u307f\u8fbc\u307f\u4e2d..."),!0,p(0),n,void 0,n,void 0,[]))};return[m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7],function(){if(o)return b("React").createElement("div",{className:"_8a6k"},q(0));else return q(0)},m[9],m[10],m[11],m[12]]}a=b("ReasonReact.bs").wrapReasonForJs(m,function(a){var b=a.className,c=a.color,d=a.size;a=a.center;return n(b==null?"":b,c==null?"blue":c,d==null?24:d,a==null?!1:a,[])});c=32;d=24;f.large_size=c;f.medium_size=d;f.blue_src=j;f.grey_src=k;f.large_blue_src=l;f.component=m;f.make=n;f.jsComponent=a}),null);
__d("MessengerSpinner.react",["MessengerSpinnerReact.bs"],(function(a,b,c,d,e,f){e.exports=b("MessengerSpinnerReact.bs").jsComponent,e.exports.large_size=b("MessengerSpinnerReact.bs").large_size,e.exports.medium_size=b("MessengerSpinnerReact.bs").medium_size}),null);
__d("MessengerFriendsWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"1720594534660350"};b.getQueryID=function(){return"1852062858177546"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("TopMessengerFriendsAndGroupsWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"1978892428852690"};b.getQueryID=function(){return"127838424757019"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerTypeaheadLocalCache",["AsyncRequest","MessengerConfig","MessengerFriendsWebGraphQLQuery","MessengerGraphQLTypeaheadAdapter","SearchSourceCallbackManager","TokenizeUtil","TopMessengerFriendsAndGroupsWebGraphQLQuery","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new(b("SearchSourceCallbackManager"))({parseFn:b("TokenizeUtil").parse,matchFn:b("TokenizeUtil").isQueryMatch,indexFn:null}),h=null,i=null,j=null,k=null;function l(){if(b("MessengerConfig").BootstrapTypeaheadFromBuddylist||!j)return;var a=j;j=null;b("promiseDone")(new(b("AsyncRequest"))(b("MessengerFriendsWebGraphQLQuery").getLegacyURI({cursor:a})).setAllowCrossPageTransition(!0).exec().then(function(a){return a.getPayload()}),function(a){g.addLocalEntries(a.viewer.all_friends.edges.map(function(a){return b("MessengerGraphQLTypeaheadAdapter").convertProfileToEntry(a.node)}).filter(function(a){return a!==null}))})}var m={onEntriesLoaded:function(a){if(h!==null&&i!==null){a(h,i,!1);return}k===null&&(k=m.fetchEntriesFromServer());b("promiseDone")(k,function(){a(h,i,!0),l()},function(a){throw a})},fetchEntriesFromServer:function(){var a=b("MessengerConfig").BootstrapTypeaheadFromBuddylist;a=b("TopMessengerFriendsAndGroupsWebGraphQLQuery").getLegacyURI({use_buddylist:a,first:100});a=new(b("AsyncRequest"))(a).setAllowCrossPageTransition(!0).exec().then(function(a){return a.getPayload()}).then(function(a){return m.handlePayload(a)});return a},handlePayload:function(a){__p&&__p();var c=b("MessengerConfig").BootstrapTypeaheadFromBuddylist,d=(c?a.viewer.chat_buddylist:a.viewer.all_friends.edges).map(function(a){return b("MessengerGraphQLTypeaheadAdapter").convertProfileToEntry(c?a.represented_profile:a.node)}).filter(function(a){if(a===null)return!1;a=a.getAuxiliaryData();a=a&&a.isMemorializedUser;return!a}),e=a.viewer.message_threads.edges.map(function(a,c){return b("MessengerGraphQLTypeaheadAdapter").convertGroupToEntry(a.node,c)}).filter(function(a){return a!==null});g.addLocalEntries(d);g.addLocalEntries(e);h=d;i=e;a.viewer.all_friends&&a.viewer.all_friends.page_info&&a.viewer.all_friends.page_info.has_next_page&&(j=a.viewer.all_friends.page_info.end_cursor)},search:function(a,b){m.onEntriesLoaded(function(){g.search(a,function(c){b(c,a)})})},isBootstrapped:function(){return h!==null&&i!==null}};e.exports=m}),null);
__d("ImageBlockReact.bs",["ReasonReact.bs","ImageBlock.react","bs_js_null_undefined"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f){return b("ReasonReact.bs").wrapJsForReason(b("ImageBlock.react"),{className:b("bs_js_null_undefined").fromOption(a),contentClassName:b("bs_js_null_undefined").fromOption(c),imageClassName:b("bs_js_null_undefined").fromOption(d),spacing:b("bs_js_null_undefined").fromOption(e)},f)}f.make=a}),null);
__d("MercuryThreadTimestampReact.bs",["React","formatDate","ReasonReact.bs","joinClasses","bs_js_primitive"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ReasonReact.bs").statelessComponent("MercuryThreadTimestampReact");function h(a,c,d,e,f){var h=e!==void 0?e:"";return[g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],function(){if(a!==void 0){var e=a,f=new Date(e),g=c!==void 0?c:f.toLocaleDateString();f=d!==void 0?d:b("formatDate")(f,"g:ia");return b("React").cloneElement(b("React").createElement("abbr",{className:b("joinClasses")(h,"timestamp"),title:g},f),{"data-utime":e/1e3})}else return b("React").createElement("abbr",void 0)},g[9],g[10],g[11],g[12]]}a=b("ReasonReact.bs").wrapReasonForJs(g,function(a){return h(b("bs_js_primitive").nullable_to_opt(a.time),b("bs_js_primitive").nullable_to_opt(a.title),b("bs_js_primitive").nullable_to_opt(a.text),a.className,[])});f.component=g;f.make=h;f.jsComponent=a}),null);
__d("MessengerContactActions.bs",[],(function(a,b,c,d,e,f){"use strict";a={ADD_OWNER:"ADD_OWNER",FREE_CALL:"FREE_CALL",MESSAGE:"MESSAGE",PROFILE:"PROFILE",REMOVE:"REMOVE",REMOVE_OWNER:"REMOVE_OWNER",SELECT:"SELECT",REPORT_GROUP_CHAT_USER:"REPORT_GROUP_CHAT_USER"};f.actions=a}),null);
__d("MessengerContactImageReact.bs",["Image.bs","React","bs_belt_Option","ReasonReact.bs","bs_js_primitive","bs_js_null_undefined","MessengerContactImage.react","MessengerProfileImageWrapperReact.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ReasonReact.bs").statelessComponent("MessengerContactImageReact");function h(a,c,d,e,f,h,i,j){var k=i!==void 0?i:!1;return[g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],function(){return b("React").createElement("div",{className:b("bs_belt_Option").getWithDefault(a,"")},b("ReasonReact.bs").element(void 0,void 0,b("MessengerProfileImageWrapperReact.bs").make(!0,c,d,e,void 0,void 0,void 0,f,k,void 0,k,[b("ReasonReact.bs").element(void 0,void 0,b("Image.bs").make(void 0,"",void 0,void 0,h,f,void 0,f,void 0,[]))])))},g[9],g[10],g[11],g[12]]}c=b("ReasonReact.bs").wrapReasonForJs(g,function(a){return h(b("bs_js_primitive").nullable_to_opt(a.className),b("bs_js_primitive").nullable_to_opt(a.customBadge),b("bs_js_primitive").nullable_to_opt(a.isMessengerUser),b("bs_js_primitive").nullable_to_opt(a.isPartiesUser),a.size,b("bs_js_primitive").nullable_to_opt(a.src),b("bs_js_primitive").nullable_to_opt(a.isMultiCompany),[])});function a(a,c,d,e,f,g,h,i){return b("ReasonReact.bs").wrapJsForReason(b("MessengerContactImage.react"),{className:b("bs_js_null_undefined").fromOption(a),customBadge:b("bs_js_null_undefined").fromOption(c),isMessengerUser:b("bs_js_null_undefined").fromOption(d),isPartiesUser:b("bs_js_null_undefined").fromOption(e),size:f,src:b("bs_js_null_undefined").fromOption(g),isMultiCompany:b("bs_js_null_undefined").fromOption(h)},i)}d=[a];e=b("bs_belt_Option").getWithDefault;f.$pipe$unknown=e;f.component=g;f.make=h;f.jsComponent=c;f.StraightJSComponent=d}),null);
__d("MessengerLocalTimeReact.bs",["cx","fbt","React","ReasonReact.bs","joinClasses","MercuryThreadTimestampReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function a(a){__p&&__p();var c=a.className;a=a.participantTimeZone;if(a!==void 0){a=a-new Date().getTimezoneOffset()*-60;if(a===0)return null;else{a=new Date(Date.now()+a*1e3);var d=a.getHours();d=d<6||d>22;c=b("joinClasses")("_10rk",c);return b("React").createElement("span",{className:c},b("React").createElement("span",{className:d?"_2f3x":""},"(",b("ReasonReact.bs").element(void 0,void 0,b("MercuryThreadTimestampReact.bs").make(a.getTime(),void 0,void 0,void 0,[]))," ",h._("\u73fe\u5730\u6642\u9593"),")"))}}else return null}c=22;d=6;e=a;f.nightStartHour=c;f.nightEndHour=d;f.make=e}),null);
__d("MessengerTextWithEntitiesReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerTextWithEntities.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e){return b("ReasonReact.bs").wrapJsForReason(b("MessengerTextWithEntities.react"),{renderEmoji:b("bs_js_null_undefined").fromOption(a),renderEmoticons:b("bs_js_null_undefined").fromOption(c),text:b("bs_js_null_undefined").fromOption(d)},e)}f.make=a}),null);
__d("MercuryParticipantsImage.react",["MessengerParticipants.bs","React","SplitImage.react","areEqual"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$2=!0,c.state={participantImages:[]},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){this.$3(this.props)};d.UNSAFE_componentWillReceiveProps=function(a){this.$3(a)};d.componentWillUnmount=function(){this.$2=!1,this.$1&&this.$1.remove()};d.shouldComponentUpdate=function(a,c){return a.size!==this.props.size||!b("areEqual")(c.participantImages,this.state.participantImages)};d.$4=function(){var a=this.props.participants;return!a||a.length===0?"":a.join("-")};d.render=function(){return this.state.participantImages.length>0?b("React").createElement(b("SplitImage.react"),{border:!0,className:this.props.className||"",halfView:this.props.halfView,srcs:this.state.participantImages,size:Number(this.props.size),key:this.$4()}):null};d.$3=function(a){var c=this;this.$1&&this.$1.remove();!a.participants||!a.participants.length?this.setState({participantImages:[]}):this.$1=b("MessengerParticipants.bs").getOrderedBigImageMulti(a.participants,function(b){a.partiesProfileImages&&(b=b.concat(a.partiesProfileImages)),c.$2&&c.setState({participantImages:b})})};return c}(b("React").Component);e.exports=a}),null);
__d("MercuryThreadImage.react",["cx","ImmutableObject","MercuryIDs","MercuryParticipantsConstants","MercuryParticipantsImage.react","MessagingThreadType","Pixelz.react","React","areEqual"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.shouldComponentUpdate=function(a,c){return a.thread.image_src!==this.props.thread.image_src||!b("areEqual")(a.thread.participants,this.props.thread.participants)||a.size!==this.props.size||a.viewer!==this.props.viewer||a.useBackground!==this.props.useBackground};d.render=function(){__p&&__p();var a=this.props.thread,c=this.props.size||b("MercuryParticipantsConstants").BIG_IMAGE_SIZE,d=a.image_src;if(d)return this.props.useBackground?b("React").createElement("div",{style:{height:c,backgroundImage:"url("+d+")",backgroundPosition:"50% 50%",backgroundRepeat:"no-repeat",backgroundSize:"cover",width:c}}):b("React").createElement(b("Pixelz.react"),{alt:"",height:c,resizeMode:"cover",src:d,width:c});if(a.thread_type===b("MessagingThreadType").ROOM){d={height:c+"px",width:c+"px"};a.solid_color&&(d.background=a.solid_color);return b("React").createElement("span",{className:"_asv _asw",style:d},a.name[0])}d=b("MercuryIDs").isCanonical(a.thread_id);var e=b("MercuryIDs").getParticipantIDFromUserID(this.props.viewer),f=[];a.participants&&(a.participants.length===1&&a.participants[0]===e?f=[].concat(a.participants):(f=a.participants.filter(function(a){return a!==e}),d||(f=f.slice(0,3))));return b("React").createElement(b("MercuryParticipantsImage.react"),{className:this.props.className,halfView:this.props.halfView,participants:f,size:c})};return c}(b("React").Component);c.propTypes={halfView:a.bool,thread:a.instanceOf(b("ImmutableObject")).isRequired,viewer:a.string.isRequired,size:a.number,useBackground:a.bool,className:a.string};e.exports=c}),null);
__d("MercuryThreadImageReact.bs",["ReasonReact.bs","bs_js_null_undefined","MercuryThreadImage.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f){return b("ReasonReact.bs").wrapJsForReason(b("MercuryThreadImage.react"),{size:b("bs_js_null_undefined").fromOption(a),thread:c,useBackground:b("bs_js_null_undefined").fromOption(d),viewer:e},f)}f.make=a}),null);
__d("OptionType.bs",["bs_curry","bs_js_primitive"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d){if(a!==void 0)if(c!==void 0)return b("bs_curry")._2(d,b("bs_js_primitive").valFromOption(a),b("bs_js_primitive").valFromOption(c));else return!1;else return c===void 0}function c(a,c){if(a!==void 0)if(c!==void 0)return b("bs_js_primitive").valFromOption(a)===b("bs_js_primitive").valFromOption(c);else return!1;else return c===void 0}f.equals=a;f.equalsReference=c}),null);
__d("MessengerThreadImageReact.bs",["cx","React","Utils.bs","MercuryIDs","OptionType.bs","ReasonReact.bs","bs_js_primitive","WorkForeignEntityInfo.bs","MercuryThreadImageReact.bs","MessengerProfileImageWrapperReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(a,c){__p&&__p();var d=a.other_user_fbid,e=c.size;a=b("MercuryIDs").isCanonical(a.thread_id);if(d==null||!(a&&e!==0))return!1;else{a=b("MercuryIDs").getParticipantIDFromUserID(d);e=c.get(a);if(!(e==null)&&!(e==null))return e.is_messenger_user;else return!1}}var i=b("ReasonReact.bs").statelessComponentWithRetainedProps("MessengerThreadImageReact");function j(a,c,d,e,f,g,j,k,l){__p&&__p();var m=c!==void 0?c:!1,n=d!==void 0?d:!1,o=e!==void 0?e:!1;return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],function(a){var c=a[1][2];a=a[0][2];if(a[0]!==c[0]||a[3]!==c[3]||!b("OptionType.bs").equalsReference(a[4],c[4])||a[5]!==c[5]||a[6]!==c[6]||a[1]!==c[1]||a[2]!==c[2]||a[7]!==c[7])return!0;else return a[8]!==c[8]},function(){var c=!b("WorkForeignEntityInfo.bs").areAllCoworkers(g),d=c?void 0:n?b("bs_js_primitive").some(b("React").createElement("div",{className:"_466z"})):m?b("bs_js_primitive").some(b("React").createElement("div",{className:"_4670"})):void 0,e={};a!==void 0&&(e.className=b("bs_js_primitive").valFromOption(a));return b("React").createElement("div",e,b("ReasonReact.bs").element(void 0,void 0,b("MessengerProfileImageWrapperReact.bs").make(void 0,d,h(j,g),void 0,b("bs_js_primitive").nullable_to_opt(j.solid_color),b("bs_js_primitive").nullable_to_opt(j.thread_type),void 0,f,c,void 0,o&&b("MercuryIDs").isCanonical(j.thread_id)||c,[b("ReasonReact.bs").element(void 0,void 0,b("MercuryThreadImageReact.bs").make(f,j,!0,k,[]))])))},i[9],[a,m,n,o,f,h(j,g),!b("WorkForeignEntityInfo.bs").areAllCoworkers(g),j,k],i[11],i[12]]}a=b("ReasonReact.bs").wrapReasonForJs(i,function(a){return j(b("bs_js_primitive").nullable_to_opt(a.className),b("Utils.bs").isTruthy(a.isPresenceForWork),b("Utils.bs").isTruthy(a.isDoNotDisturb),b("Utils.bs").isTruthy(a.showBadge),b("bs_js_primitive").nullable_to_opt(a.size),a.participants,a.thread,a.viewer,[])});f.getIsMessengerUser=h;f.component=i;f.make=j;f.jsComponent=a}),null);
__d("MessengerContactListRowReact.bs",["cx","ix","fbt","FBID.bs","bs_block","bs_curry","Image.bs","React","Utils.bs","gkx","bs_caml_obj","BadgeReact.bs","Link.react","MercuryIDs","ReactDOMRe.bs","ReasonReact.bs","TooltipData","joinClasses","bs_js_primitive","MessengerState.bs","PresenceStatus","ImageBlockReact.bs","MercuryTimestamp","bs_js_null_undefined","WorkForeignEntityInfo.bs","AvailableListConstants","MercuryParticipantTypes","MessengerContactActions.bs","MessengerLocalTimeReact.bs","MessengerAdminGroupUtils","MessengerThreadImageReact.bs","MessengerContactImageReact.bs","MercuryThreadTimestampReact.bs","MessengerDotComAndInboxM4Check.bs","MessengerTextWithEntitiesReact.bs","MessengerGraphQLTypeaheadAdapter","MercuryIgnoredBlockedParticipants.bs","VideoCallWebDriverIDs"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();function j(a,c){if(a!==void 0)return b("bs_js_primitive").valFromOption(a).contains(c);else return!1}function k(a,c,d){var e=d.thread,f=d.participants,g=d.type===b("MercuryParticipantTypes").THREAD||d.type===b("MercuryParticipantTypes").MESSAGE,h=d.photo,i,j,k;c!==void 0?f==null||!g?i=1:(j=b("bs_js_primitive").valFromOption(c),k=f,i=2):e==null||f==null||!g?i=1:(j=e,k=f,i=2);switch(i){case 1:if(h==null)return b("React").createElement("div",{className:"_5l39"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _85_s":"")});else{c=!b("WorkForeignEntityInfo.bs").isContactCoworker(d);return b("ReasonReact.bs").element(void 0,void 0,b("MessengerContactImageReact.bs").make("_5l39"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _85_s":"")+" _5rmm",void 0,b("bs_js_primitive").nullable_to_opt(d.isMessengerUser),void 0,32,h,c,[]))}case 2:return b("ReasonReact.bs").element(void 0,void 0,b("MessengerThreadImageReact.bs").make("_5l39"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _85_s":""),void 0,void 0,void 0,32,k,j,a,[]))}}function l(a){var c=a.type===b("MercuryParticipantTypes").PAGE;a=b("WorkForeignEntityInfo.bs").isContactCoworker(a);if(c&&a)return b("ReasonReact.bs").element(void 0,void 0,b("BadgeReact.bs").make("medium","bot",[]));else return null}function m(a){a=a.isVerified;a=a==null?!1:a;if(a)return b("ReasonReact.bs").element(void 0,void 0,b("BadgeReact.bs").make("medium","verified",[]));else return null}function n(a,c){__p&&__p();var d=[],e=[0];c.forEach(function(c){__p&&__p();var f=c.offset;c=c.offset+c.length|0;if(e[0]<f){var g=a.substring(e[0],f);d.push(g)}g=b("React").createElement("span",{className:"_7u0a"},a.substring(f,c));d.push(g);e[0]=c;return 0});c=a.substring(e[0],a.length);d.push(c);return d}function o(a){return b("React").createElement("div",{className:"_3q34"},b("ReasonReact.bs").element(void 0,void 0,b("MessengerTextWithEntitiesReact.bs").make(!0,!0,a.title,[])),l(a),m(a))}function p(a){__p&&__p();var c=a.subtitle,d=0;if(c==null||c==="")d=1;else{var e=b("MessengerGraphQLTypeaheadAdapter").getValidatedMatchesRanges(a.matchRanges,c);c=n(c,e);e=b("bs_caml_obj").caml_equal(a.type,b("MercuryParticipantTypes").MESSAGE);var f=a.timestamp;if(e&&!(f==null)){e=f;return b("React").createElement("div",void 0,o(a),b("React").createElement("div",{className:"_5l-3"},b("ReactDOMRe.bs").createElementVariadic("span",{className:"_3q35 _7s4c"},c),b("React").createElement("span",{className:"_7s4d"},"\xb7"),b("ReasonReact.bs").element(void 0,void 0,b("MercuryThreadTimestampReact.bs").make(e,b("MercuryTimestamp").getAbsoluteTimestamp(e),b("MercuryTimestamp").getRelativeTimestamp(e),"_7s4e",[]))))}else f=2;if(f===2)return b("React").createElement("div",void 0,o(a),b("ReactDOMRe.bs").createElementVariadic("div",{className:"_3q35"},c))}if(d===1){e={className:"_5ywd"};f=b("bs_js_primitive").nullable_to_opt(a.timezone);f!==void 0&&(e.participantTimeZone=b("bs_js_primitive").valFromOption(f));return b("React").createElement("div",{className:"_364g"},a.title,b("React").createElement(b("MessengerLocalTimeReact.bs").make,e),l(a),m(a))}}function q(a,c,d){__p&&__p();if(b("gkx")("818495")){var e=[!1],f=b("FBID.bs").ofString(a.uid);if(f!==void 0&&d!==void 0){var g=b("bs_js_primitive").valFromOption(d);b("MessengerState.bs").compute(c,function(a){e[0]=b("MercuryIgnoredBlockedParticipants.bs").qualifiesAs(c,a.blocked_ids,g);return 0})}if(e[0])return b("React").createElement("div",void 0,o(a),b("React").createElement("div",{className:"_3q35"},i._("\u30d6\u30ed\u30c3\u30af\u6e08\u307f")));else return p(a)}else return p(a)}function r(a){__p&&__p();var c=a.subtitle,d;if(c==null||c==="")d=1;else return b("React").createElement("div",{className:"_364g"},c,b("React").createElement("span",{className:"_7l-p"},b("ReasonReact.bs").element(void 0,void 0,b("MessengerTextWithEntitiesReact.bs").make(!0,!0,a.title.substring(c.length+3|0,a.title.length),[]))));if(d===1){c={className:"_5ywd"};d=b("bs_js_primitive").nullable_to_opt(a.timezone);d!==void 0&&(c.participantTimeZone=b("bs_js_primitive").valFromOption(d));return b("React").createElement("div",{className:"_364g _7l-p"},a.title.substring(3,a.title.length),b("React").createElement(b("MessengerLocalTimeReact.bs").make,c))}}function s(a,c){var d=c.type;if(a!==void 0&&a&&!(d==null||!(d===b("MercuryParticipantTypes").FRIEND||d===b("MercuryParticipantTypes").USER))){a=b("MercuryIDs").getUserIDFromParticipantID(c.uid);if(a==null)return!1;else return b("PresenceStatus").get(a)===b("AvailableListConstants").ACTIVE}else return!1}var t=b("React").createElement("span",{className:"_5rh4"},i._("\u8ffd\u52a0\u6e08\u307f")),u=b("React").createElement("span",{className:"_5rh4"},i._("\u62db\u5f85\u6e08\u307f")),v=b("ReasonReact.bs").element(void 0,void 0,b("Image.bs").make("_1kqm",void 0,void 0,void 0,h("86852"),void 0,void 0,void 0,void 0,[]));function w(a,c){c[1][2][0]=a==null?void 0:b("bs_js_primitive").some(a);return 0}function x(a){__p&&__p();a=a[1];var c=a[4],d=a[5],e=a[2][0];if(c!==void 0&&c&&d!==void 0&&e!==void 0){c=b("bs_js_primitive").valFromOption(e);b("bs_curry")._1(d,c);e=a[6];if(e!==void 0)return b("bs_curry")._1(e,c);else return 0}else return 0}function y(a){__p&&__p();var c=a[1],d=c[1][4];a=a[0][1][5];var e=c[1][2][0];if(d!==void 0&&d&&a!==void 0&&e!==void 0){d=b("bs_js_primitive").valFromOption(e);b("bs_curry")._1(a,d);e=c[1][6];if(e!==void 0)return b("bs_curry")._1(e,d);else return 0}else return 0}function a(){__p&&__p();var a=b("ReasonReact.bs").reducerComponent("MessengerContactListRowReact"),c=function(c,d,e,f,g,h,l,m,n,o,p,z,A,B,C,D,E,F,G,H,I,J,K){__p&&__p();var L=D!==void 0?D:"",M=function(a){if(h!==void 0)return 0;else{a.stopPropagation();a.preventDefault();return 0}},N=function(a,c){if(a===b("MessengerContactActions.bs").actions.SELECT)if(f!==void 0)return b("bs_js_primitive").valFromOption(f)(d,c);else return 0;else if(g!==void 0)return b("bs_curry")._2(g,a,d);else return 0},O=function(){var a=b("Utils.bs").isSomeTrue(o);if(a&&e!==void 0)return b("bs_curry")._1(e,d);else return 0},P=function(a){a.stopPropagation();return N(b("MessengerContactActions.bs").actions.SELECT,a)},Q=function(a){__p&&__p();var c=a[3];a=a[1];if(E!==void 0){var d=b("bs_js_primitive").valFromOption(E).get(a[0].uid);d=d==null?[null,!0]:[d,!0]}else d=[null,!1];if(j(C,a[0].uid))return t;else if(j(p,a[0].uid))return u;else if(j(F,a[0].uid))return v;else if(d[1])return d[0];else if(s(G,a[0]))return b("React").createElement("div",{className:"_jg2"});else{d=b("bs_js_null_undefined").fromOption(l);var e=a[0].thread;e=H!==void 0?b("MessengerAdminGroupUtils").isAdminRequired(b("bs_js_primitive").valFromOption(H)):e==null?!1:b("MessengerAdminGroupUtils").isAdminRequired(e);var f=a[0].thread,g,k=0,m;H!==void 0?(m=b("bs_js_primitive").valFromOption(H),k=1):f==null?g=!1:(m=f,k=1);if(k===1){f=b("MercuryIDs").isValid(a[0].uid);k=f?b("bs_js_primitive").nullable_to_opt(b("MercuryIDs").getUserIDFromParticipantID(a[0].uid)):b("FBID.bs").ofString(a[0].uid);f=k!==void 0?b("MessengerAdminGroupUtils").isAdmin(d,b("bs_js_primitive").valFromOption(k)):!1;g=b("MessengerAdminGroupUtils").isOwner(f,m)}k=g?b("React").createElement("span",{className:"_5qsj"},i._("\u7ba1\u7406\u8005")):null;if(h!==void 0)return b("React").createElement("div",void 0,k,b("React").createElement(b("bs_js_primitive").valFromOption(h),{className:"_rwo",admins:d,contact:a[0],extrasEnabled:n,isAdminRequired:e,isOpen:a[1],onAction:N,onToggle:function(a){return b("bs_curry")._1(c,[a])},viewer:J}));else return k}};return[a[0],a[1],a[2],function(a){var e=d===a[3];if(e)return a;else return[b("bs_curry")._1(c,d),a[1],a[2],d,a[4],a[5],a[6]]},x,y,a[6],a[7],function(a){var c=a[1],d=b("joinClasses")(L,"_5l37"+(b("Utils.bs").optionBoolToBool(z)?" _1k1p":"")+(c[1]?" _rwn":"")),e=I!==void 0?b("TooltipData").propsFor(I,"left"):{},f=b("VideoCallWebDriverIDs").RTC_PICKER_DIALOG_CONTACT_LIST_ITEM,g=c[0].type===b("MercuryParticipantTypes").ASSISTANT_TYPEAHEAD;g=g?r(c[0]):q(c[0],J,H);g=b("React").createElement(b("Link.react"),{onClick:P,onMouseDown:M,onMouseEnter:O,tabIndex:0,children:b("ReasonReact.bs").element(void 0,void 0,b("ImageBlockReact.bs").make(void 0,"_5l38",void 0,"medium",[k(J,H,c[0]),g,Q(a)]))});g=b("React").cloneElement(g,{"data-testid":f+c[0].uid});f=b("Utils.bs").isSomeTrue(m);if(f)return b("React").createElement("li",{ref:b("bs_curry")._1(a[0],w),className:d},g);else return b("React").cloneElement(b("React").createElement("li",{ref:b("bs_curry")._1(a[0],w),className:d,role:"option"}),e,g)},function(){return[b("bs_curry")._1(c,d),!1,[void 0],d,z,B,A]},a[10],function(a,c){return b("bs_block").__(0,[[c[0],a[0],c[2],c[3],c[4],c[5],c[6]]])},a[12]]},d=b("ReasonReact.bs").wrapReasonForJs(a,function(a){return c(a.contactAdapter,a.rawContact,b("bs_js_primitive").nullable_to_opt(a.onHighlight),b("bs_js_primitive").nullable_to_opt(a.onSelect),b("bs_js_primitive").nullable_to_opt(a.onAction),b("bs_js_primitive").nullable_to_opt(a.actionsClass),b("bs_js_primitive").nullable_to_opt(a.admins),b("bs_js_primitive").nullable_to_opt(a.disableRole),a.extraActionsEnabled,b("bs_js_primitive").nullable_to_opt(a.hasHoverState),b("bs_js_primitive").nullable_to_opt(a.invitedEntryIDs),b("bs_js_primitive").nullable_to_opt(a.isHighlighted),b("bs_js_primitive").nullable_to_opt(a.onRenderHighlight),b("bs_js_primitive").nullable_to_opt(a.onScrollIntoView),b("bs_js_primitive").nullable_to_opt(a.originalEntryIDs),b("bs_js_primitive").nullable_to_opt(a.rowClassName),b("bs_js_primitive").nullable_to_opt(a.rowElements),b("bs_js_primitive").nullable_to_opt(a.selectedEntryIDs),b("bs_js_primitive").nullable_to_opt(a.showPresence),b("bs_js_primitive").nullable_to_opt(a.thread),b("bs_js_primitive").nullable_to_opt(a.tooltipContent),a.viewer,[])});return[d,c]}c=32;d=3;f.videoCallWebDriverIDs=b("VideoCallWebDriverIDs");f.imageSize=c;f.assistantTypeaheadPrefixLength=d;f.idsContain=j;f.renderContactImage=k;f.renderBotBadge=l;f.renderVerifiedBadge=m;f.renderSnippet=n;f.renderContactTitle=o;f.renderRegularContact=p;f.renderContactText=q;f.renderAssistantTypeaheadText=r;f.getPresenceStatus=s;f.isOriginal=t;f.isInvited=u;f.isSelected=v;f.setThisRef=w;f.didMount=x;f.didUpdate=y;f.createMake=a}),null);
__d("MessengerContactList.react",["cx","fbt","MessengerContactListRowReact.bs","ImageBlock.react","ImmutableObject","Link.react","MercuryIDs","MessengerActions","MessengerDotComAndInboxM4Check.bs","MessengerSpinner.react","MessengerState.bs","MessengerTypeaheadUtils","React","gkx","immutable","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("MessengerContactListRowReact.bs").createMake();var i=a[0];a[1];var j=b("gkx")("818495");c=b("React").PropTypes;d=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(a,c){__p&&__p();var e=c[0];c=c[1];var f=d.props.rowComponent||i;return b("React").createElement("div",{key:e,className:"_29hk"},d.$5(e,c),b("React").createElement("ul",{id:d.props.controlleeID,role:d.props.disableRole?void 0:"listbox",className:"_29hl"},a.map(function(a,c){c=c===0?b("joinClasses")(d.props.rowClassName,"_3h3c"):d.props.rowClassName;var e=a.id||a.getUniqueID(),g=d.props.thread;if(j&&e&&!g){var h=b("MercuryIDs").getThreadIDFromUserID(e);g=b("MessengerState.bs").getThreadMetaNow(d.props.viewer,h);g||b("MessengerState.bs").getThreadMeta(d.props.viewer,h,function(a){g=a})}return b("React").createElement(f,{actionsClass:d.props.actionsClass,admins:d.props.admins,contactAdapter:d.props.contactAdapter,disableRole:d.props.disableRole,extraActionsEnabled:!!d.props.extraActionsEnabled,hasHoverState:d.props.hasHoverState,invitedEntryIDs:d.props.invitedEntryIDs,isHighlighted:d.props.highlightedEntry&&d.props.highlightedEntry.getUniqueID()===a.getUniqueID(),key:e,onAction:d.props.onAction,onHighlight:d.props.onHighlight,onRenderHighlight:d.props.onRenderHighlight,onScrollIntoView:d.props.onScrollIntoView,onSelect:d.props.onSelect,originalEntryIDs:d.props.originalEntryIDs,rawContact:a,rowClassName:c,rowElements:d.props.rowElements,selectedEntryIDs:d.props.selectedEntryIDs,showPresence:d.props.showPresence,thread:g,tooltipContent:a.getAuxiliaryData&&a.getAuxiliaryData().tooltipContent,viewer:d.props.viewer})})))},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){return b("React").createElement("div",{className:this.props.className},this.props.listSections.map(this.$1).toArray(),this.props.showLoadMore?this.$2():this.$3(),this.$4())};d.$5=function(a,c){var d=this;if(!a)return null;var e=b("MessengerDotComAndInboxM4Check.bs").yes?"_225b _6ybl":"_225b";return this.props.showSeeAll?b("React").createElement("div",{className:e},a,b("React").createElement("a",{className:"_87n7",onMouseDown:function(a){d.props.onSeeAllSelect&&c!==null&&d.props.onSeeAllSelect(c,a)}},h._("\u3059\u3079\u3066\u8868\u793a"))):b("React").createElement("div",{className:e},a)};d.$2=function(){return this.props.isLoading?this.$3():b("React").createElement("div",{className:"_8a02"},b("React").createElement(b("Link.react"),{href:"#",onClick:b("MessengerActions").loadMoreResults,tabIndex:-1},h._("\u3082\u3063\u3068\u898b\u308b")))};d.$3=function(){return!this.props.isLoading?null:b("React").createElement(b("ImageBlock.react"),{className:"_225c",spacing:"medium"},b("React").createElement(b("MessengerSpinner.react"),{className:"_2i59",color:"grey"}),b("React").createElement("div",{className:"_4g0h"},h._("\u691c\u7d22\u4e2d\u2026")))};d.$4=function(){if(this.props.queryString&&this.props.queryString.length>0&&!this.props.isLoading){var a=this.props.listSections.filter(function(a){return a.length!=1||!b("MessengerTypeaheadUtils").isMessageSearchEntry(a[0])}).size;if(a<1)if(b("MessengerDotComAndInboxM4Check.bs").yes)return b("React").createElement("div",{className:"_8b0j"},b("React").createElement("span",{className:"_8b0k"},this.props.seeAllType?h._("{seeAllType}\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002",[h._param("seeAllType",this.props.seeAllType)]):h._("\u4e00\u81f4\u3059\u308b\u7d50\u679c\u306f\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f")),b("React").createElement("span",{className:"_8b0l"},h._("\u300c{query}\u300d\u306b\u4e00\u81f4\u3059\u308b\u7d50\u679c\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u5165\u529b\u306b\u8aa4\u308a\u306e\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u3001\u5b8c\u5168\u306a\u5358\u8a9e\u3092\u4f7f\u7528\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002",[h._param("query",this.props.queryString)])));else return b("React").createElement("div",{className:"_3xcx"},h._("\u4e00\u81f4\u3059\u308b\u7d50\u679c\u304c\u3042\u308a\u307e\u305b\u3093\u3067\u3057\u305f"))}return null};return c}(b("React").PureComponent);d.propTypes={actionsClass:c.func,admins:c.object,controlleeID:c.string,contactAdapter:c.func.isRequired,disableRole:c.bool,extraActionsEnabled:c.bool,hasHoverState:c.bool,highlightedEntry:c.object,invitedEntryIDs:c.instanceOf(b("immutable").Set),isLoading:c.bool,listSections:c.instanceOf(b("immutable").OrderedMap).isRequired,onAction:c.func,onHighlight:c.func,onRenderHighlight:c.func,onScrollIntoView:c.func,onSeeAllSelect:c.func,onSelect:c.func,originalEntryIDs:c.instanceOf(b("immutable").Set),queryString:c.string,rowClassName:c.string,rowElements:c.instanceOf(b("immutable").Map),selectedEntryIDs:c.instanceOf(b("immutable").Set),showLoadMore:c.bool,showPresence:c.bool,thread:c.instanceOf(b("ImmutableObject")),viewer:c.string.isRequired};e.exports=d}),null);
__d("MessengerTypeaheadResultView.react",["cx","Bootloader","Keys","MercuryTypeaheadConstants","MessengerContactAdapters","MessengerContactList.react","MessengerGraphQLTypeaheadHighlighter","MessengerSecondarySearchFunnelConstants","MessengerTypeaheadUtils","React","SearchableEntry","gkx","immutable","joinClasses","qex","wrapNullableForReact"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=50;a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=null,d.onKeyDown=function(a,c){if(a===b("Keys").RETURN){d.props.onSelectHighlighted(c);return}if(!d.$1)return;c=b("MessengerGraphQLTypeaheadHighlighter").getNextHighlightedEntry(a,d.$1,d.props.queryString,d.props.highlightedEntry);d.props.onNextHighlighted(c)},d.$3=function(a){d.props.onNextHighlighted(a)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.UNSAFE_componentWillMount=function(){this.$1=this.$2(this.props)};d.componentDidMount=function(){var a=this;this.props.onMount(this.onKeyDown,function(){return a.$1})};d.UNSAFE_componentWillUpdate=function(a){this.$1=this.$2(a)};d.componentWillUnmount=function(){this.props.onUnmount()};d.render=function(){var a=this.$1;if(!a)return null;var c=[b("MercuryTypeaheadConstants").SEARCH_TYPE,b("MercuryTypeaheadConstants").FRIEND_TYPE,b("MercuryTypeaheadConstants").FB4C_TYPE,b("MercuryTypeaheadConstants").MESSAGE_TYPE,b("MercuryTypeaheadConstants").THREAD_TYPE,b("MercuryTypeaheadConstants").PAGE_TYPE,b("MercuryTypeaheadConstants").NON_FRIEND_TYPE,b("MercuryTypeaheadConstants").MEETING_ROOM_PAGE_TYPE,b("MercuryTypeaheadConstants").INTERNAL_BOT_PAGE_TYPE,b("MercuryTypeaheadConstants").GAME_TYPE];a=b("MessengerTypeaheadUtils").buildListSections(a,this.props.queryString,c);c=!1;this.props.isTokenizer!==null&&(c=b("qex")._("1063079")&&!this.props.isTokenizer&&this.props.queryString.length>1);return b("React").createElement(b("MessengerContactList.react"),{controlleeID:this.props.controlleeID,className:b("joinClasses")(this.props.className,"_4p-s"),contactAdapter:b("MessengerContactAdapters").fromSearchableEntry,hasHoverState:this.props.hasHoverState,highlightedEntry:b("wrapNullableForReact")(this.props.highlightedEntry),isLoading:!1,listSections:a,onHighlight:this.$3,onScrollIntoView:this.props.onScrollIntoView,onSeeAllSelect:this.props.onSeeAllSelect,onSelect:this.props.onSelect,originalEntryIDs:this.props.originalEntryIDs,queryString:this.props.queryString,selectedEntryIDs:this.props.selectedEntryIDs,showPresence:!1,showSeeAll:c?c:!1,viewer:this.props.viewer,rowComponent:this.props.rowComponent})};d.$2=function(a){__p&&__p();var c=a.localEntries,d={};c.forEach(function(a){d[a.getUniqueID()]=!0});var e=b("MessengerTypeaheadUtils").sortEntries(this.$4(a,d),a.queryString),f=null;if(b("gkx")("678616")){var g=Date.now(),i=function(a){return a.map(function(a){return[a.getUniqueID(),a]})};f=b("immutable").OrderedMap(i(c)).merge(i(e)).filter(function(b){return!a.selectedEntryIDs.contains(b.getUniqueID())}).slice(0,h).toArray();var j=Date.now()-g;b("Bootloader").loadModules(["MessengerSearchWWWTypedLogger"],function(a){new a().setStage("messenger_rendering_dedup").setLatency(j).log()},"MessengerTypeaheadResultView.react")}else f=c.concat(e).filter(function(b){return!a.selectedEntryIDs.contains(b.getUniqueID())}).slice(0,h);this.$5(a.queryString,f,a.localEntryIDs);return f};d.$4=function(a,b){return a.serverResults.filter(function(c){return c&&!b[c.getUniqueID()]&&a.customResultFilterFn(c)})};d.$5=function(a,c,d){__p&&__p();this.props.isTokenizer?b("Bootloader").loadModules(["MessengerBootloadedSecondarySearchLogger","MessengerSearchLoggerUtil"],function(d,e){var f=c.map(function(a){return{result_fbid:a.getUniqueID(),result_type:e.getLoggingTypeFromMercuryType(a.getType())}});d.logSearchEvent({name:b("MessengerSecondarySearchFunnelConstants").EVENTS.IMPRESSIONS,query:a,entries:f,loggingID:b("MessengerSecondarySearchFunnelConstants").LOGGING_IDS.M_APP_COMPOSER})},"MessengerTypeaheadResultView.react"):b("Bootloader").loadModules(["MessengerSearchLoggerUtil","MessengerUniversalSearchFunnelLogger","MessengerUniversalSearchFunnelLoggerConstants"],function(e,f,g){var h=b("immutable").OrderedMap();c.forEach(function(a){var b=a.getUniqueID(),c=b.split(":").pop();a={result_fbid:c,result_type:e.getLoggingTypeFromMercuryType(a.getType()),rank_section:g.SOURCES.LOCAL_AND_SERVER,data_source:[d.includes(c)?g.SOURCES.LOCAL:g.SOURCES.LOCAL_AND_SERVER]};h=h.set(b,a)});f.logImpressions(h,a,g.RESULT_SURFACES.TYPEAHEAD,g.SOURCES.LOCAL_AND_SERVER)},"MessengerTypeaheadResultView.react")};return c}(b("React").Component);c.propTypes={controlleeID:a.string.isRequired,canViewerSendMoneyFilter:a.bool,className:a.string.isRequired,localEntries:a.arrayOf(a.instanceOf(b("SearchableEntry"))).isRequired,localEntryIDs:a.arrayOf(a.string.isRequired).isRequired,hasHoverState:a.bool.isRequired,highlightedEntry:a.object,onMount:a.func.isRequired,onNextHighlighted:a.func.isRequired,onScrollIntoView:a.func.isRequired,onSeeAllSelect:a.func,onSelect:a.func.isRequired,onSelectHighlighted:a.func.isRequired,onUnmount:a.func.isRequired,originalEntryIDs:a.instanceOf(b("immutable").Set).isRequired,queryString:a.string.isRequired,selectedEntryIDs:a.instanceOf(b("immutable").Set).isRequired,serverResults:a.arrayOf(a.instanceOf(b("SearchableEntry"))).isRequired,shouldQueryInternalBot:a.bool.isRequired,shouldQueryPages:a.bool.isRequired,shouldQueryVCEndpoint:a.bool.isRequired,viewer:a.string.isRequired,forGroup:a.bool,rowComponent:a.func,customResultFilterFn:a.func};c.defaultProps={controlleeID:"",className:"",customResultFilterFn:function(){return!0}};e.exports=c}),null);
__d("MessengerTypeaheadTopFriendsView.react",["cx","Keys","MessengerContactAdapters","MessengerContactList.react","MessengerGraphQLTypeaheadHighlighter","MessengerTypeaheadUtils","React","immutable","joinClasses","wrapNullableForReact"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.onKeyDown=function(a,c){if(a===b("Keys").RETURN){d.props.onSelectHighlighted(c);return}c=b("MessengerGraphQLTypeaheadHighlighter").getNextHighlightedEntry(a,d.props.entries.toArray(),d.props.queryString,d.props.highlightedEntry);d.props.onNextHighlighted(c)},d.$1=function(a){d.props.onNextHighlighted(a)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.UNSAFE_componentWillMount=function(){this.props.hasHoverState&&(this.props.entries.size>0&&this.props.onNextHighlighted(this.props.entries.first()))};d.componentDidMount=function(){var a=this;this.props.onMount(this.onKeyDown,function(){return a.props.entries.toArray()})};d.componentWillUnmount=function(){this.props.onUnmount()};d.render=function(){return b("React").createElement(b("MessengerContactList.react"),{controlleeID:this.props.controlleeID,className:b("joinClasses")(this.props.className,"_4p-s"),contactAdapter:b("MessengerContactAdapters").fromSearchableEntry,hasHoverState:this.props.hasHoverState,highlightedEntry:b("wrapNullableForReact")(this.props.highlightedEntry),isLoading:!!this.props.queryString,listSections:b("MessengerTypeaheadUtils").buildListSections(this.props.entries.toArray(),this.props.queryString),onHighlight:this.$1,onScrollIntoView:this.props.onScrollIntoView,onSelect:this.props.onSelect,originalEntryIDs:this.props.originalEntryIDs,queryString:this.props.queryString,selectedEntryIDs:this.props.selectedEntryIDs,showPresence:!1,viewer:this.props.viewer,rowComponent:this.props.rowComponent})};return c}(b("React").Component);c.propTypes={controlleeID:a.string.isRequired,className:a.string.isRequired,entries:a.instanceOf(b("immutable").List).isRequired,hasHoverState:a.bool.isRequired,highlightedEntry:a.object,onNextHighlighted:a.func.isRequired,onMount:a.func.isRequired,onScrollIntoView:a.func.isRequired,onSelect:a.func.isRequired,onSelectHighlighted:a.func.isRequired,onUnmount:a.func.isRequired,originalEntryIDs:a.instanceOf(b("immutable").Set).isRequired,queryString:a.string.isRequired,selectedEntryIDs:a.instanceOf(b("immutable").Set).isRequired,viewer:a.string.isRequired,rowComponent:a.func};c.defaultProps={controlleeID:"",className:""};e.exports=c}),null);
__d("MessengerGraphQLTypeaheadView.react",["cx","fbt","Bootloader","CurrentUser","ImageBlock.react","MercuryConfig","MercuryParticipantTypes","MercuryTypeaheadConstants","MessengerBootloadedSecondarySearchLogger","MessengerNewGroupParticipantSuggestionLocalCacheManager","MessengerPaymentFriendsLocalCache","MessengerRoomPrivacyMode","MessengerRoomWithAssocObjectAudienceLocalCacheManager","MessengerSearchWebGraphQLFetcher","MessengerSecondarySearchFunnelConstants","MessengerSpinner.react","MessengerTypeaheadLocalCache","MessengerTypeaheadResultView.react","MessengerTypeaheadTopFriendsView.react","MessengerTypeaheadUtils","MessengerUniversalSearchFunnelLoggerConstants","React","createCancelableFunction","debounce","immutable","gkx","qex"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("React").PropTypes;var i=b("MessengerSecondarySearchFunnelConstants").SEARCH_SURFACES.OMNIPICKER,j=b("MessengerUniversalSearchFunnelLoggerConstants").TYPE,k=function(a){if(!a||a.length===0)return null;var c=a[0];return c.getType()!==b("MercuryTypeaheadConstants").SEARCH_TYPE?c:a.length>1?a[1]:null},l=b("gkx")("857049")?5:8,m=10;c=100;d=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={localEntries:b("immutable").List(),queryCompleteStatus:{usersGroups:!1,pages:!1},serverResults:[],highlightedEntry:null},d.$1=null,d.$2=null,d.$3=null,d.$4=null,d.$5=!0,d.$6=b("MessengerRoomWithAssocObjectAudienceLocalCacheManager").get(),d.$7=b("MessengerNewGroupParticipantSuggestionLocalCacheManager").get(),d.$8=null,d.$9=!1,d.$10=null,d.$11=0,d.$14=function(a,c,e,f,g,h){__p&&__p();if(b("gkx")("959184")&&d.props.queryString.length<2)return;d.$5&&d.setState({serverResults:[]});c=d.state.localEntries.toArray().filter(function(a){return a.getType()!==b("MercuryTypeaheadConstants").SEARCH_TYPE}).map(function(a){return a.getUniqueID()});var i=[];e||i.push("groups");f||i.push("pages");d.props.enableMessageSearch&&i.push("messages");g===null?i.push("users"):i.push("rooms");e={userLimit:m,messageLimit:3,groupLimit:b("MercuryConfig").MaxThreadResults,pageLimit:5,getQueryString:d.$13,canViewerSendMoneyFilter:h,localEntryIDs:c,threadFBID:g,shouldQueryInternalBot:d.props.shouldQueryInternalBot,shouldQueryVCEndpoint:d.props.shouldQueryVCEndpoint};f=b("qex")._("971247");h=b("CurrentUser").isWorkUser()&&b("gkx")("991794");f&&d.$10!==null?d.$10.fetchMSQEntries(a,d.props.isTokenizer?0:e.messageLimit,d.$30,d.$31):h&&d.$10!=null?d.$10.fetchWorkChatSingleQueryEntries(a,e,d.$30,d.$31):d.$10!==null&&d.$10.fetchEntries(a,i,e,d.$30,d.$31)},d.$30=function(a,b){if(d.$5){d.setState(function(c){return{serverResults:c.serverResults.concat(a),queryCompleteStatus:b==="singleServerQuery"?Object.assign({},c.queryCompleteStatus,{usersGroups:!0},{pages:!0}):Object.assign({},c.queryCompleteStatus,(c={},c[b]=!0,c))}});return}},d.$31=function(a,b){d.setState(function(a){return{queryCompleteStatus:Object.assign({},a.queryCompleteStatus,(a={},a[b]=!0,a))}})},d.$13=function(){return d.props.queryString},d.$22=function(a,b){d.$3=a,d.$4=b,d.$15()},d.$24=function(){d.$3=null,d.$4=null},d.$16=function(a){d.setState({highlightedEntry:a})},d.$23=function(a){d.state.highlightedEntry&&d.props.onSelect(d.state.highlightedEntry,a)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){var a=this,c;this.$11=(c=b("qex")._("839673"))!=null?c:l;this.$12();c=this.props.isTokenizer?i:j;this.$10=new(b("MessengerSearchWebGraphQLFetcher"))(function(){return a.$13()},c);this.$2=b("debounce")(this.$14,150,this,!0)};d.componentDidUpdate=function(a){this.props!==a&&this.$15()};d.$15=function(){__p&&__p();if(!this.$4)return;var a=this.$4(),b=k(this.$8);this.$8=a;a=k(a);if(!a)return;if(this.state.highlightedEntry&&this.state.highlightedEntry.getUniqueID()===a.getUniqueID())return;b=!b||b.getUniqueID()!==a.getUniqueID();(b||!this.state.highlightedEntry||this.$9)&&this.$16(a);this.$9=!1};d.UNSAFE_componentWillReceiveProps=function(a){__p&&__p();var c=this;if(!a.queryString)this.setState({highlightedEntry:null}),this.$12();else if(a.queryString!==this.props.queryString){this.$9=!0;this.setState({queryCompleteStatus:{userGroupQueryFinished:!1,pagesQueryFinished:!1},serverResults:[]});var d=a.roomAssociatedObject&&a.roomAssociatedObject.privacy_mode;this.$2&&this.$2(a.queryString,b("MercuryConfig").MaxThreadResults,a.excludeGroups,a.excludePages,d===b("MessengerRoomPrivacyMode").WHITELISTED_MODE?a.threadFBID:null,a.canViewerSendMoneyFilter);if(d===b("MessengerRoomPrivacyMode").WHITELISTED_MODE){this.$17(a);return}if(this.props.canViewerSendMoneyFilter){this.$18(a);return}if(this.props.includeExistingParticipantIDs){this.$19(a);return}b("MessengerTypeaheadLocalCache").search(a.queryString,function(d,e){__p&&__p();if(c.$5&&e===a.queryString){d=b("MessengerTypeaheadUtils").sortEntries(d,e).slice(0,c.props.maxEntries);var f=c.props.enableMessageSearch?b("MessengerTypeaheadUtils").getMessageSearchEntry(e):null;f&&d.unshift(f);f=b("immutable").List(d).filter(function(a){if(c.props.excludeGroups&&a.getType()===b("MercuryParticipantTypes").THREAD)return!1;return c.props.excludePages&&a.getType()===b("MercuryParticipantTypes").PAGE?!1:!0});c.$20(f,e);c.$21(f,e);c.setState({localEntries:f})}})}};d.shouldComponentUpdate=function(a,b){return a.queryString!==this.props.queryString||a.isFocused!==this.props.isFocused||a.excludeGroups!==this.props.excludeGroups||a.excludePages!==this.props.excludePages||b.localEntries!==this.state.localEntries||b.queryCompleteStatus!==this.state.queryCompleteStatus||b.highlightedEntry!==this.state.highlightedEntry};d.componentWillUnmount=function(){this.$1&&this.$1.cancel(),this.$2&&this.$2.reset(),this.$5=!1};d.render=function(){if(!this.props.isFocused&&!this.props.queryString||!b("MessengerTypeaheadLocalCache").isBootstrapped()&&!this.$6.isBootstrapped(this.props.threadFBID)&&!b("MessengerPaymentFriendsLocalCache").isBootstrapped()&&!this.$7.isBootstrapped(this.props.threadFBID,this.props.originalEntryIDs))if(b("gkx")("678607"))return b("React").createElement(b("ImageBlock.react"),{className:"_225c",spacing:"medium"},b("React").createElement(b("MessengerSpinner.react"),{className:"_2i59",color:"grey"}),b("React").createElement("div",{className:"_4g0h"},h._("\u691c\u7d22\u4e2d\u2026")));else return null;if(!this.props.queryString)return b("React").createElement(b("MessengerTypeaheadTopFriendsView.react"),{className:this.props.typeaheadViewClassName,entries:this.state.localEntries,hasHoverState:this.props.hasHoverState,highlightedEntry:this.state.highlightedEntry,onMount:this.$22,onNextHighlighted:this.$16,onScrollIntoView:this.props.onScrollIntoView,onSelect:this.props.onSelect,onSelectHighlighted:this.$23,onUnmount:this.$24,originalEntryIDs:this.props.originalEntryIDs,queryString:this.props.queryString,selectedEntryIDs:this.props.selectedEntryIDs,viewer:this.props.viewer,rowComponent:this.props.rowComponent});var a=this.state.queryCompleteStatus.usersGroups&&(this.props.excludePages||this.state.queryCompleteStatus.pages),c=!b("gkx")("1053071")&&this.props.queryString.length<2;return b("React").createElement("div",null,this.state.queryCompleteStatus.usersGroups||c?this.$25():this.$26(),this.state.queryCompleteStatus.usersGroups&&!a?this.$27():null)};d.$26=function(){var a=this.state.localEntries.slice(0,this.$11);return b("React").createElement(b("MessengerTypeaheadTopFriendsView.react"),{className:this.props.typeaheadViewClassName,entries:this.$28(a,this.props.queryString),hasHoverState:this.props.hasHoverState,highlightedEntry:this.state.highlightedEntry,onNextHighlighted:this.$16,onMount:this.$22,onScrollIntoView:this.props.onScrollIntoView,onSelect:this.props.onSelect,onSelectHighlighted:this.$23,onUnmount:this.$24,originalEntryIDs:this.props.originalEntryIDs,queryString:this.props.queryString,selectedEntryIDs:this.props.selectedEntryIDs,viewer:this.props.viewer,rowComponent:this.props.rowComponent})};d.$27=function(){return b("React").createElement(b("ImageBlock.react"),{className:"_225c",spacing:"medium"},b("React").createElement(b("MessengerSpinner.react"),{className:"_2i59",color:"grey"}),b("React").createElement("div",{className:"_4g0h"},h._("\u691c\u7d22\u4e2d\u2026")))};d.$25=function(a){var c=this.$29(),d=this.state.localEntries.slice(0,this.$11);return b("React").createElement(b("MessengerTypeaheadResultView.react"),babelHelpers["extends"]({},a,{className:this.props.typeaheadViewClassName,hasHoverState:this.props.hasHoverState,highlightedEntry:this.state.highlightedEntry,isTokenizer:this.props.isTokenizer,localEntries:d.toArray(),onMount:this.$22,onNextHighlighted:this.$16,onScrollIntoView:this.props.onScrollIntoView,onSeeAllSelect:this.props.onSeeAllSelect,onSelect:this.props.onSelect,onSelectHighlighted:this.$23,onUnmount:this.$24,originalEntryIDs:this.props.originalEntryIDs,selectedEntryIDs:this.props.selectedEntryIDs,serverResults:this.state.serverResults,viewer:this.props.viewer,rowComponent:this.props.rowComponent},c))};d.$28=function(a,b){var c=this;b=a.filter(function(a){return!c.props.selectedEntryIDs.contains(a.getUniqueID())});return b};d.onKeyDown=function(a,b){this.$3&&this.$3(a,b)};d.$17=function(a){var c=this;this.$6.search(a.threadFBID,a.queryString,function(d,e){if(c.$5&&e===a.queryString){d=b("MessengerTypeaheadUtils").sortEntries(d,e).slice(0,c.props.maxEntries);c.setState({localEntries:b("immutable").List(d)})}})};d.$32=function(){var a=this;this.setState({localEntries:b("immutable").List()});this.$1=b("createCancelableFunction")(function(c){c=c.slice(0,30);a.setState({localEntries:b("immutable").List(c)})});this.$6.onEntriesLoaded(this.props.threadFBID,function(b){a.$1&&a.$1(b),a.$1=null})};d.$19=function(a){var c=this;this.$7.search(a.threadFBID,a.originalEntryIDs,a.queryString,function(d,e){if(c.$5&&e===a.queryString){d=b("MessengerTypeaheadUtils").sortEntries(d,e).slice(0,c.props.maxEntries);c.setState({localEntries:b("immutable").List(d)})}})};d.$33=function(){var a=this;this.setState({localEntries:b("immutable").List()});this.$1=b("createCancelableFunction")(function(c){a.setState({localEntries:b("immutable").List(c.slice(0,50))})});this.$7.onEntriesLoaded(this.props.threadFBID,this.props.originalEntryIDs,function(b){a.$1&&a.$1(b),a.$1=null})};d.$18=function(a){var c=this;b("MessengerPaymentFriendsLocalCache").search(a.queryString,function(d,e){if(c.$5&&e===a.queryString){d=b("MessengerTypeaheadUtils").sortEntries(d,e).slice(0,c.props.maxEntries);c.setState({localEntries:b("immutable").List(d)})}})};d.$34=function(){var a=this;this.setState({localEntries:b("immutable").List()});this.$1=b("createCancelableFunction")(function(c){a.setState({localEntries:b("immutable").List(c)})});b("MessengerPaymentFriendsLocalCache").onEntriesLoaded(function(b){a.$1&&a.$1(b),a.$1=null})};d.$12=function(){__p&&__p();var a=this,c=this.props.roomAssociatedObject&&this.props.roomAssociatedObject.privacy_mode;if(c===b("MessengerRoomPrivacyMode").WHITELISTED_MODE){this.$32();return}if(this.props.canViewerSendMoneyFilter){this.$34();return}if(this.props.includeExistingParticipantIDs){this.$33();return}this.setState({localEntries:b("immutable").List()});this.$1=b("createCancelableFunction")(function(c,d,e){c=c.slice(0,50);a.props.excludeGroups||(c=c.concat(d));if(!e||!a.props.queryString){d=a.props.enableMessageSearch?b("MessengerTypeaheadUtils").getMessageSearchEntry(a.props.queryString):null;d&&c.unshift(d);a.props.queryString===""&&a.$35(c);a.setState({localEntries:b("immutable").List(c)})}});b("MessengerTypeaheadLocalCache").onEntriesLoaded(function(b,c,d){a.$1&&a.$1(b,c,d),a.$1=null})};d.$29=function(){var a=this.props.canViewerSendMoneyFilter,c=this.state.localEntries.toArray();c=c.filter(function(a){return a.getType()!==b("MercuryTypeaheadConstants").SEARCH_TYPE}).map(function(a){return a.getUniqueID()});var d=b("MercuryConfig").MaxThreadResults,e=this.props.roomAssociatedObject&&this.props.roomAssociatedObject.privacy_mode;e=e===b("MessengerRoomPrivacyMode").WHITELISTED_MODE;var f=!this.props.excludeGroups&&this.props.queryString&&this.props.queryString.length>1&&!e,g=!this.props.excludeGroups&&c.length>0&&!e,h=!this.props.excludeGroups&&(!g||b("CurrentUser").isEmployee())&&!e,i=!1,j=!this.props.excludePages&&!e,k=this.props.shouldQueryVCEndpoint&&(b("CurrentUser").isEmployee()||b("CurrentUser").isWorkUser())&&!e,l=this.props.shouldQueryInternalBot&&b("CurrentUser").isEmployee()&&b("CurrentUser").isWorkUser()&&!e,m=e,n=this.props.threadFBID;return{queryString:this.props.queryString,canViewerSendMoneyFilter:a,localEntryIDs:c,maxThreadResults:d,shouldQueryGroups:i,shouldQueryPages:j,shouldQueryThreadName:f,shouldQueryParticipantIDs:g,shouldQueryParticipantNames:h,shouldQueryVCEndpoint:k,shouldQueryInternalBot:l,shouldQueryRoomsAudience:e,shouldSkipQueryUsers:m,threadFBID:n,customResultFilterFn:this.props.customResultFilterFn,forGroup:this.props.forGroup}};d.$21=function(a,c){__p&&__p();var d=this;this.props.isTokenizer?b("Bootloader").loadModules(["MessengerSearchLoggerUtil"],function(e){if(d.props.queryString===c){var f=a.map(function(a){return{result_fbid:a.getUniqueID(),result_type:e.getLoggingTypeFromMercuryType(a.getType())}});b("MessengerBootloadedSecondarySearchLogger").logSearchEvent({name:b("MessengerSecondarySearchFunnelConstants").EVENTS.IMPRESSIONS,query:"",loggingID:b("MessengerSecondarySearchFunnelConstants").LOGGING_IDS.M_APP_COMPOSER,entries:f})}},"MessengerGraphQLTypeaheadView.react"):b("Bootloader").loadModules(["MessengerUniversalSearchFunnelLogger","MessengerSearchLoggerUtil"],function(e,f){if(d.props.queryString===c){var g=b("immutable").OrderedMap();a.forEach(function(a){var c=a.getUniqueID();a={result_fbid:c,result_type:f.getLoggingTypeFromMercuryType(a.getType()),rank_section:b("MessengerUniversalSearchFunnelLoggerConstants").SOURCES.LOCAL,data_source:[b("MessengerUniversalSearchFunnelLoggerConstants").SOURCES.LOCAL]};g=g.set(c,a)});e.logImpressions(g,c)}},"MessengerGraphQLTypeaheadView.react")};d.$35=function(a){b("Bootloader").loadModules(["MessengerUniversalSearchFunnelLogger"],function(b){b.logNullStateImpressions(a,a.length)},"MessengerGraphQLTypeaheadView.react")};d.$20=function(a,c){__p&&__p();var d=this;this.props.isTokenizer?b("MessengerBootloadedSecondarySearchLogger").logSearchEvent({name:b("MessengerSecondarySearchFunnelConstants").EVENTS.SOURCE_ENDED,query:c,ids:a.map(function(a){return a.getUniqueID()}),source:b("MessengerSecondarySearchFunnelConstants").SOURCES.LOCAL_CONTACTS,numResults:a.size,status:b("MessengerSecondarySearchFunnelConstants").SOURCE_STATUSES.FINISHED,loggingID:b("MessengerSecondarySearchFunnelConstants").LOGGING_IDS.M_APP_COMPOSER}):b("Bootloader").loadModules(["MessengerUniversalSearchFunnelLogger","MessengerSearchLoggerUtil"],function(e,f){var g=a;if(d.props.queryString===c){var h=b("immutable").OrderedMap();g.forEach(function(a){var c=a.getUniqueID();a={result_fbid:c,result_type:f.getLoggingTypeFromMercuryType(a.getType()),rank_section:b("MessengerUniversalSearchFunnelLoggerConstants").SOURCES.LOCAL,data_source:[b("MessengerUniversalSearchFunnelLoggerConstants").SOURCES.LOCAL]};h=h.set(c,a)});e.logImpressions(h,c)}},"MessengerGraphQLTypeaheadView.react")};return c}(b("React").Component);d.propTypes={includeExistingParticipantIDs:a.bool,canViewerSendMoneyFilter:a.bool,enableMessageSearch:a.bool.isRequired,excludeGroups:a.bool.isRequired,excludePages:a.bool.isRequired,forGroup:a.bool,isFocused:a.bool.isRequired,hasHoverState:a.bool.isRequired,maxEntries:a.number.isRequired,onScrollIntoView:a.func.isRequired,onSeeAllSelect:a.func,onSelect:a.func.isRequired,originalEntryIDs:a.instanceOf(b("immutable").Set).isRequired,queryString:a.string.isRequired,roomAssociatedObject:a.object,selectedEntryIDs:a.instanceOf(b("immutable").Set).isRequired,shouldQueryInternalBot:a.bool.isRequired,shouldQueryVCEndpoint:a.bool.isRequired,threadFBID:a.string,typeaheadViewClassName:a.string.isRequired,viewer:a.string.isRequired,rowComponent:a.func,customResultFilterFn:a.func};d.defaultProps={maxEntries:c,typeaheadViewClassName:""};e.exports=d}),null);
__d("MessengerScrollableArea.react",["cx","React","ReactDOM","ScrollableArea.react","Style","UserAgent","clearImmediate","joinClasses","setImmediate","throttle"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=20;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.$1=!1;d.$2=null;d.$4=function(){if(d.$1){var a;d.props.onScroll&&(a=d.props).onScroll.apply(a,arguments)}};d.$5=function(){__p&&__p();if(!b("UserAgent").isBrowser("IE"))return;if(!d.refs||!d.refs.scrollable)return;var a=d.refs.scrollable.refs.wrap,c=d.refs.scrollable.refs.body;if(!c||!a)return;c=b("ReactDOM").findDOMNode(c);a=b("ReactDOM").findDOMNode(a);a=a.offsetWidth-a.clientWidth;a>0&&b("Style").set(c,"margin-right",-a+"px")};d.$3=b("throttle")(d.$4,50);return d}var d=c.prototype;d.componentDidMount=function(){this.$2=b("setImmediate")(this.$5),this.$1=!0};d.componentWillUnmount=function(){b("clearImmediate")(this.$2),this.$1=!1};d.render=function(){var a=this.props.needsFastScrollHandler?this.$4:this.$3;return b("React").createElement(b("ScrollableArea.react"),{className:b("joinClasses")("_5f0v",this.props.className),height:this.props.height,onScroll:a,persistent:!0,ref:"scrollable",shadow:!1,tabIndex:this.props.tabIndex,width:this.props.width},this.props.children)};d.getArea=function(){return this.refs.scrollable.getArea()};d.scrollToBottom=function(a){var b=this.getArea();b&&this.scrollToPosition(b.getScrollHeight(),!!a)};d.scrollToTop=function(a){var b=this.getArea();b&&b.scrollToTop(!!a)};d.scrollToPosition=function(a,b,c){b===void 0&&(b=!1);c===void 0&&(c={});var d=this.getArea();if(!d)return;d.setScrollTop(a,b,c)};d.isScrolledToBottom=function(){return this.isScrolledToBottomWithHeight(0)};d.isScrolledToBottomWithHeight=function(a){var b=this.getArea();return!b?!1:b.getScrollTop()+b.getClientHeight()+a>=b.getScrollHeight()-h};d.isScrolledToTop=function(){var a=this.getArea();return!a?!0:a.getScrollTop()<=h};d.getScrollTop=function(){var a=this.getArea();return!a?0:a.getScrollTop()};return c}(b("React").Component);e.exports=a}),null);
__d("MessengerGraphQLSearchTypeahead.react",["fbt","cx","ix","Bootloader","BootloadOnRender.react","ContextualLayer.react","CurrentUser","Event","Image.react","InstantGameContextType","JSResource","Keys","LazyComponent.react","MercuryIDs","MessengerContentSearchFunnelLoggerConstants","MessengerUniversalSearchFunnelLoggerConstants","gkx","immutable","MercuryThreadIDMap","MercuryTypeaheadConstants","MercuryVanityIDMap.bs","MessagingSourceEnum","MessengerActions","MessengerDotComAndInboxM4Check.bs","MessengerGraphQLTypeaheadView.react","MessengerScrollableArea.react","MessengerSpinner.react","MessengerState.bs","MessengerTypeaheadUtils","MNPlatformTagsDataManager","QuicksilverSources","React","ReactDOM","ReactLayeredComponentMixin_DEPRECATED","clearImmediate","emptyFunction","joinClasses","setImmediate"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("MercuryThreadIDMap").get();a=b("React").PropTypes;var k=i("86933"),l=30,m=100;c=b("React").createClass({displayName:"MessengerGraphQLSearchTypeahead",mixins:[b("ReactLayeredComponentMixin_DEPRECATED")],_input:null,_timer:null,_view:null,propTypes:{includeExistingParticipantIDs:a.bool,canViewerSendMoneyFilter:a.bool,className:a.string.isRequired,context:a.object,enableMessageSearch:a.bool.isRequired,excludeGroups:a.bool.isRequired,excludePages:a.bool.isRequired,customResultFilterFn:a.func,forGroup:a.bool,hasHoverState:a.bool.isRequired,hideClearButton:a.bool.isRequired,hideResults:a.bool,isFacebookChat:a.bool.isRequired,isFocused:a.bool.isRequired,isTokenizer:a.bool.isRequired,onBackspace:a.func.isRequired,onBlur:a.func.isRequired,onChange:a.func.isRequired,onClear:a.func.isRequired,onClick:a.func.isRequired,onFocus:a.func.isRequired,onScrollIntoView:a.func.isRequired,onSelect:a.func.isRequired,originalEntryIDs:a.instanceOf(b("immutable").Set).isRequired,placeholder:a.string.isRequired,queryString:a.string,roomAssociatedObject:a.object,scrollableViewClassName:a.string.isRequired,selectedEntryIDs:a.instanceOf(b("immutable").Set).isRequired,shouldQueryInternalBot:a.bool.isRequired,shouldQueryVCEndpoint:a.bool.isRequired,tabIndex:a.number,threadFBID:a.string,typeaheadViewClassName:a.string.isRequired,useLayer:a.bool.isRequired,viewer:a.string.isRequired,width:a.number,rowComponent:a.func,searchInputPortalRef:a.instanceOf(HTMLDivElement)},getInitialState:function(){return{gameID:null}},getDefaultProps:function(){return{includeExistingParticipantIDs:!1,canViewerSendMoneyFilter:!1,isFacebookChat:!1,isTokenizer:!1,onBackspace:b("emptyFunction"),onChange:b("emptyFunction"),onClear:b("emptyFunction"),onClick:b("emptyFunction"),onScrollIntoView:b("emptyFunction"),originalEntryIDs:b("immutable").Set(),placeholder:"",scrollableViewClassName:"",selectedEntryIDs:b("immutable").Set(),typeaheadViewClassName:"",useLayer:!1}},componentDidMount:function(){this._timer=b("setImmediate")(this._syncInputWidth)},componentDidUpdate:function(){b("clearImmediate")(this._timer),this._timer=b("setImmediate")(this._syncInputWidth)},componentWillUnmount:function(){b("clearImmediate")(this._timer)},renderLayers:function(){var a=this;if(!this.props.useLayer)return{};var c=null,d=null;this.props.context?c=this.props.context:d=function(){return a._input};return{typeaheadView:b("React").createElement(b("ContextualLayer.react"),{context:c,contextRef:d,position:"below",shown:(this.props.queryString||b("gkx")("678607"))&&this.props.isFocused,shouldSetARIAProperties:!1},this._renderView())}},render:function(){var a=this,c=this.props.useLayer?null:this._renderView(),d=b("CurrentUser").isWorkUser()&&this.props.searchInputPortalRef!=null?this.props.searchInputPortalRef:null,e=b("React").createElement("label",{className:"_58ak"},b("React").createElement("input",{autoComplete:"off",className:"_58al _7tpc",onBlur:this._handleBlur,onClick:this.props.onClick,onChange:function(){},onFocus:function(b){return a.props.onFocus()},onKeyDown:function(b){return a._handleKeyDown(b)},placeholder:this.props.placeholder,ref:function(b){return a._input=b},spellCheck:!1,tabIndex:this.props.tabIndex,type:"text",value:this.props.queryString,"aria-label":b("CurrentUser").isWorkUser()?g._("Workchat\u3092\u691c\u7d22"):g._("Messenger\u3092\u691c\u7d22")}));return b("React").createElement("div",{className:(this.props.isTokenizer?"":"_1nq2")+(b("MessengerDotComAndInboxM4Check.bs").yes?" _7vup":"")+(this.props.isTokenizer?" _3mkz":"")},b("React").createElement("span",{className:b("joinClasses")(this.props.className,"_58ah"+(this.props.hideResults?" _1a03":"")),onChange:this.props.onChange,onSelect:b("emptyFunction"),tabIndex:null},d!=null?b("ReactDOM").createPortal(e,d):e,c),b("React").createElement(b("Image.react"),{onMouseDown:this._onClear,className:(this.props.hideClearButton?"hidden_elem":"")+" _2xme",src:k}),b("React").createElement("span",{ref:"textSizeProxy",className:"_58-3","aria-hidden":"true"},this.props.queryString||this.props.placeholder),this._renderGame())},focusInput:function(){this._input&&this._input.focus()},_onClear:function(){this.props.hideResults&&this._logClearContentSearch(),this.props.onClear()},_syncInputWidth:function(){if(!this.props.isTokenizer)return;var a=b("ReactDOM").findDOMNode(this.refs.textSizeProxy);a=a?a.offsetWidth:0;if(a===0)return;this._input&&(this._input.style.width=a+"px")},_renderGame:function(){return!this.state.gameID?null:b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("MessengerGamesQuicksilverPlayerContainer.react").__setRef("MessengerGraphQLSearchTypeahead.react"),placeholder:b("React").createElement(b("MessengerSpinner.react"),null),component:b("React").createElement(b("LazyComponent.react"),{initialContextType:b("InstantGameContextType").SOLO,initialContextSourceID:null,initialGameID:this.state.gameID,onHide:this._handleHideGame,initialSource:b("QuicksilverSources").MESSENGER_SEARCH,sourceID:null})})},_renderView:function(){__p&&__p();var a=this;if(!this.props.isFocused)return null;if(!this.props.queryString){var c=b("gkx")("678607")?!1:this.props.isTokenizer&&!this.props.forGroup;if(c)return null}c=this.props.isTokenizer?l:m;c=b("React").createElement(b("MessengerGraphQLTypeaheadView.react"),{includeExistingParticipantIDs:this.props.includeExistingParticipantIDs,canViewerSendMoneyFilter:this.props.canViewerSendMoneyFilter,enableMessageSearch:this.props.enableMessageSearch,excludeGroups:this.props.excludeGroups,excludePages:this.props.excludePages,customResultFilterFn:this.props.customResultFilterFn,forGroup:this.props.forGroup,isFocused:this.props.isFocused,isTokenizer:this.props.isTokenizer,hasHoverState:this.props.hasHoverState,maxEntries:c,onScrollIntoView:this._handleScrollIntoView,onSeeAllSelect:this._handleSeeAllSelect,onSelect:this._handleSelect,originalEntryIDs:this.props.originalEntryIDs,queryString:this.props.queryString,ref:function(b){return a._view=b},roomAssociatedObject:this.props.roomAssociatedObject,shouldQueryInternalBot:this.props.shouldQueryInternalBot,shouldQueryVCEndpoint:this.props.shouldQueryVCEndpoint,selectedEntryIDs:this.props.selectedEntryIDs,threadFBID:this.props.threadFBID,typeaheadViewClassName:this.props.typeaheadViewClassName,viewer:this.props.viewer,rowComponent:this.props.rowComponent});if(this.props.isTokenizer)return b("React").createElement(b("MessengerScrollableArea.react"),{className:this.props.scrollableViewClassName,ref:"scrollable",width:this.props.width},c);else return c},_handleScrollIntoView:function(a){if(!a)return;if(!this.props.isTokenizer){this.props.onScrollIntoView(a);return}this.refs.scrollable&&b("MessengerTypeaheadUtils").scrollEntryIntoView(a,this.refs.scrollable)},_getThreadID:function(a,c){b("MessengerState.bs").getThreadMeta(b("CurrentUser").getID(),b("MercuryIDs").getThreadIDFromUserID(a),function(a){return c(a.thread_id)})},_handleSeeAllSelect:function(a,c){c&&c.preventDefault();c=this.props.queryString;var d=b("MercuryTypeaheadConstants").SEARCH_TYPE;this._endSearchFunnelStartContentSearchFunnel(c,d,!0);b("MessengerActions").changeQuerySeeAll(c,a)},_handleSelect:function(a,c){__p&&__p();c&&c.preventDefault();c=this.props.queryString;var d=a.getType(),e=a.getUniqueID().split(":").pop(),f=a.getAuxiliaryData().alias;if(f){var g=b("MercuryIDs").getParticipantIDFromUserID(e);b("MercuryVanityIDMap.bs").set(f,g)}switch(d){case b("MercuryTypeaheadConstants").GAME_TYPE:this.setState({gameID:e});return;case b("MercuryTypeaheadConstants").SEARCH_TYPE:this._endSearchFunnelStartContentSearchFunnel(c,d);b("MessengerActions").changeQueryAll(c);return;case b("MercuryTypeaheadConstants").MESSAGE_TYPE:this._updateToThread(e,a);this._endSearchFunnelStartContentSearchFunnel(c,d);break;default:this._updateToThread(e,a)}b("MNPlatformTagsDataManager").updateThreadTabAfterSelectThread(b("MessagingSourceEnum").MESSENGER_WEB_SEARCH,e)},_updateToThread:function(a,c){var d=this,e=function(a){return d.props.onSelect(a,c.getType(),c)};c.getType()===b("MercuryTypeaheadConstants").THREAD_TYPE||c.getAuxiliaryData().messageResultType==="groupConversation"?j.getClientIDFromServerID(a,e):this._getThreadID(a,e)},_handleHideGame:function(){this.setState({gameID:null})},_handleKeyDown:function(a){var c=a.keyCode;c===b("Keys").DOWN||c===b("Keys").UP||c===b("Keys").RETURN?this.props.hideResults&&c===b("Keys").RETURN?b("MessengerActions").changeQueryAll(this.props.queryString):this._view&&this._view.onKeyDown&&this._view.onKeyDown(c,a):c===b("Keys").BACKSPACE?this.props.onBackspace(a):c===b("Keys").ESC&&(this._input&&this._input.blur())},_handleBlur:function(){var a=this,c=null,d=b("Event").listen(window,"blur",function(){d.remove(),b("clearImmediate")(c)});c=b("setImmediate")(function(){d.remove(),a.props.onBlur()})},_logClearContentSearch:function(){b("Bootloader").loadModules(["MessengerContentSearchFunnelLogger"],function(a){return a&&a.endFunnel(b("MessengerContentSearchFunnelLoggerConstants").FUNNEL_LOGGER_TAGS.END_WITH_X_BUTTON)},"MessengerGraphQLSearchTypeahead.react")},_endSearchFunnelStartContentSearchFunnel:function(a,c,d){var e=this;d===void 0&&(d=!1);!d&&c!==b("MercuryTypeaheadConstants").SEARCH_TYPE?(b("Bootloader").loadModules(["MessengerUniversalSearchFunnelLogger"],function(a){a.logResultSelected(e.state.query,e.props.threadFBID||"",c,b("MessengerUniversalSearchFunnelLoggerConstants").RESULT_SURFACES.TYPEAHEAD,b("MessengerUniversalSearchFunnelLoggerConstants").RESULT_PAGES.FIRST)},"MessengerGraphQLSearchTypeahead.react"),b("Bootloader").loadModules(["MessengerUniversalSearchFunnelLogger"],function(a){return a.endFunnel(b("MessengerUniversalSearchFunnelLoggerConstants").END_REASONS.END_ACTION,b("MessengerUniversalSearchFunnelLoggerConstants").END_ACTIONS.ENTER_INTEGRATED_MESSAGE_SEARCH,null,b("MessengerUniversalSearchFunnelLoggerConstants").ENTRY_SURFACES.INBOX,b("MessengerUniversalSearchFunnelLoggerConstants").RESULT_PAGES.FIRST)},"MessengerGraphQLSearchTypeahead.react")):(!d&&c===b("MercuryTypeaheadConstants").SEARCH_TYPE||d&&c===b("MercuryTypeaheadConstants").MESSAGE_TYPE)&&(b("Bootloader").loadModules(["MessengerUniversalSearchFunnelLogger"],function(a){a.logResultSelected(e.state.query,e.props.threadFBID||"",b("MercuryTypeaheadConstants").MESSAGE_TYPE,b("MessengerUniversalSearchFunnelLoggerConstants").RESULT_SURFACES.TYPEAHEAD,b("MessengerUniversalSearchFunnelLoggerConstants").RESULT_PAGES.SEE_ALL)},"MessengerGraphQLSearchTypeahead.react"),b("Bootloader").loadModules(["MessengerUniversalSearchFunnelLogger"],function(a){return a.endFunnel(b("MessengerUniversalSearchFunnelLoggerConstants").END_REASONS.END_ACTION,b("MessengerUniversalSearchFunnelLoggerConstants").END_ACTIONS.MESSAGE_SEARCH,null,b("MessengerUniversalSearchFunnelLoggerConstants").ENTRY_SURFACES.INBOX,b("MessengerUniversalSearchFunnelLoggerConstants").RESULT_PAGES.SEE_ALL)},"MessengerGraphQLSearchTypeahead.react"));b("Bootloader").loadModules(["MessengerContentSearchFunnelLogger"],function(d){return d.startFunnel(a,c===b("MercuryTypeaheadConstants").SEARCH_TYPE?b("MessengerContentSearchFunnelLoggerConstants").ENTRY_SURFACES.SEARCH_ALL_THREADS:b("MessengerContentSearchFunnelLoggerConstants").ENTRY_SURFACES.SEARCH_FROM_INTEGRATED_MESSAGE_SEARCH)},"MessengerGraphQLSearchTypeahead.react")}});e.exports=c}),null);
__d("MessengerTokenizerToken.react",["cx","Keys","React","SearchableEntry","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;var h=100;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$2=function(a){a.keyCode===b("Keys").BACKSPACE&&(a.preventDefault(),d.props.onRemove&&d.props.onRemove(d.props.entry))},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){return b("React").createElement("span",{className:b("joinClasses")(this.props.className,"_14-8"),label:null,onClick:this.$1,onKeyDown:this.$2,role:"option",tabIndex:this.props.index+h},b("React").createElement("span",{"aria-label":this.props.label,title:this.props.label,className:"_14-9"},this.props.label))};d.$1=function(a){a.stopPropagation()};return c}(b("React").Component);c.propTypes={className:a.string,entry:a.instanceOf(b("SearchableEntry")),index:a.number,label:a.string.isRequired,onRemove:a.func};e.exports=c}),null);
__d("MessengerGraphQLTokenizer.react",["cx","invariant","MessengerBootloadedSecondarySearchLogger","MessengerGraphQLSearchTypeahead.react","MessengerSecondarySearchFunnelConstants","MessengerTokenizerToken.react","React","immutable","joinClasses","setImmediate"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=!0,d.state={focused:d.props.autoFocus,queryString:""},d.focusInput=function(){d.refs.typeahead&&d.refs.typeahead.focusInput()},d.$4=function(){if(!d.$1)return;d.setState({focused:!1})},d.$8=function(){if(!d.$1)return;d.setState({focused:!0})},d.$5=function(a){if(d.state.queryString||d.props.entries.size===0)return;d.$10(d.props.entries.last());a.preventDefault();b("setImmediate")(d.focusInput)},d.$6=function(a){if(!d.$1)return;a.target instanceof HTMLInputElement||h(0,1185);a=a.target.value;b("MessengerBootloadedSecondarySearchLogger").logSearchEvent({name:b("MessengerSecondarySearchFunnelConstants").EVENTS.QUERY_CHANGED,query:a,loggingID:b("MessengerSecondarySearchFunnelConstants").LOGGING_IDS.M_APP_COMPOSER});d.setState({queryString:a})},d.$7=function(){if(!d.$1)return;b("MessengerBootloadedSecondarySearchLogger").logSearchEvent({name:b("MessengerSecondarySearchFunnelConstants").EVENTS.QUERY_CHANGED,query:null,loggingID:b("MessengerSecondarySearchFunnelConstants").LOGGING_IDS.M_APP_COMPOSER});d.setState({queryString:""});d.props.onClear&&d.props.onClear()},d.$9=function(a,c,e){__p&&__p();if(!d.$1)return;a=d.props.entries;var f=e.getUniqueID();if(d.props.originalEntryIDs.contains(f))return;else if(a.some(function(a){return a.getUniqueID()===f})){d.$10(e);return}d.props.onAddEntryAttempt(e);b("MessengerBootloadedSecondarySearchLogger").logSearchEvent({name:b("MessengerSecondarySearchFunnelConstants").EVENTS.QUERY_CHANGED,query:"",loggingID:b("MessengerSecondarySearchFunnelConstants").LOGGING_IDS.M_APP_COMPOSER});d.setState({queryString:""})},d.$10=function(a){d.props.onRemoveEntryAttempt(a)},d.$3=function(a){d.focusInput()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){this.$1=!0,this.props.autoFocus&&b("setImmediate")(this.focusInput)};d.componentWillUnmount=function(){this.$1=!1};d.render=function(){var a=this,c=this.props.entries.map(function(b,c){return a.$2(b,c)}),d=c.size>0?"":this.props.placeholder,e=this.props.forceHideClearButton||this.state.queryString===""&&this.props.entries.isEmpty();return b("React").createElement("div",null,b("React").createElement("div",{className:b("joinClasses")(this.props.className,"_14-7")},b("React").createElement("div",{className:b("joinClasses")("_58-2","clearfix"),onClick:this.$3},c,b("React").createElement(b("MessengerGraphQLSearchTypeahead.react"),{includeExistingParticipantIDs:this.props.includeExistingParticipantIDs,canViewerSendMoneyFilter:this.props.canViewerSendMoneyFilter,className:"_58-0",context:this.props.context,enableMessageSearch:this.props.enableMessageSearch,excludeGroups:this.props.excludeGroups,excludePages:this.props.excludePages,customResultFilterFn:this.props.customResultFilterFn,forGroup:this.props.forGroup,hasHoverState:this.props.hasHoverState,hideClearButton:e,isFacebookChat:!1,isFocused:this.state.focused,isTokenizer:!0,onBlur:this.$4,onBackspace:this.$5,onChange:this.$6,onClear:this.$7,onFocus:this.$8,onSelect:this.$9,originalEntryIDs:this.props.originalEntryIDs,placeholder:d,queryString:this.state.queryString,ref:"typeahead",roomAssociatedObject:this.props.roomAssociatedObject,selectedEntryIDs:b("immutable").Seq(this.props.entries).map(function(a){return a.getUniqueID()}).toSet(),scrollableViewClassName:this.props.scrollableViewClassName,shouldQueryInternalBot:this.props.shouldQueryInternalBot,shouldQueryVCEndpoint:this.props.shouldQueryVCEndpoint,tabIndex:this.props.tabIndex,threadFBID:this.props.threadFBID,useLayer:this.props.useLayer,viewer:this.props.viewer,width:this.props.width}))),this.state.queryString===""&&!this.state.focused?this.props.defaultEntries:null)};d.$2=function(a,c){return b("React").createElement(b("MessengerTokenizerToken.react"),{className:"_2ei6",key:a.getUniqueID(),label:a.getTitle(),entry:a,index:c,onRemove:this.$10})};return c}(b("React").PureComponent);c.propTypes={autoFocus:a.bool.isRequired,canViewerSendMoneyFilter:a.bool,includeExistingParticipantIDs:a.bool,className:a.string.isRequired,context:a.object,defaultEntries:a.element,enableMessageSearch:a.bool.isRequired,entries:a.instanceOf(b("immutable").List).isRequired,excludeGroups:a.bool.isRequired,excludePages:a.bool.isRequired,forGroup:a.bool,forceHideClearButton:a.bool,hasHoverState:a.bool.isRequired,customResultFilterFn:a.func,onAddEntryAttempt:a.func.isRequired,onClear:a.func,onRemoveEntryAttempt:a.func.isRequired,originalEntryIDs:a.instanceOf(b("immutable").Set).isRequired,placeholder:a.node.isRequired,roomAssociatedObject:a.object,scrollableViewClassName:a.string.isRequired,shouldQueryInternalBot:a.bool.isRequired,shouldQueryVCEndpoint:a.bool.isRequired,tabIndex:a.number,threadFBID:a.string,useLayer:a.bool.isRequired,viewer:a.string.isRequired,width:a.number.isRequired};e.exports=c}),null);
__d("MessengerTabIndices",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({NEW_MESSAGE_TOKENIZER:9998,GROUP_NAME_INPUT:9999,COMPOSER_INPUT:1e4});e.exports=a}),null);
__d("MessengerComposeViewHeader.react",["cx","fbt","ImmutableObject","MessengerButtonReact.re","MessengerDotComAndInboxM4Check.bs","MessengerGraphQLTokenizer.react","MessengerTabIndices","React","clearImmediate","gkx","immutable","joinClasses","setImmediate"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerButtonReact.re").make;a=b("React").PropTypes;var j=320;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={tokenizerContext:null,excludeGroups:!1,excludePages:!1,forGroup:!1},d.$1=null,d.$2=function(){d.$1=b("setImmediate")(function(){d.refs.tokenizer&&d.refs.tokenizer.focusInput()})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){this.$2(),this.setState({tokenizerContext:this.refs.tokenizerContext})};d.componentDidUpdate=function(a){this.props.recipients!==a.recipients&&this.props.onResize()};d.UNSAFE_componentWillReceiveProps=function(a){a.recipients!==this.props.recipients&&(a.recipients.size===0?this.setState({excludeGroups:!1,excludePages:!1,forGroup:!1}):a.isWorkUser?this.setState({excludeGroups:!0,excludePages:!1,forGroup:!0}):this.setState({excludeGroups:!0,excludePages:!0,forGroup:!0}))};d.componentWillUnmount=function(){this.$1&&b("clearImmediate")(this.$1)};d.render=function(){var a={enableMessageSearch:!1,hasHoverState:!0,originalEntryIDs:b("immutable").Set(),scrollableViewClassName:"_2y8_",shouldQueryInternalBot:!0,shouldQueryVCEndpoint:!1,width:j,customResultFilterFn:function(){return!0}};return b("React").createElement("div",{className:b("joinClasses")("_2y8y"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _6zw0":"")+" _5l-3",this.props.className),onClick:this.$2,role:"presentation"},b("React").createElement("div",{className:"_2y8z",ref:b("gkx")("678607")?"tokenizerContext":""},h._("\u5b9b\u5148:")),b("React").createElement("div",{className:"_66s6"},b("React").createElement(b("MessengerGraphQLTokenizer.react"),babelHelpers["extends"]({autoFocus:!0,className:"_2y8-",context:this.state.tokenizerContext,entries:this.props.recipients,excludeGroups:this.state.excludeGroups,excludePages:this.state.excludePages,forGroup:this.state.forGroup,forceHideClearButton:this.props.forceHideClearButton,onAddEntryAttempt:this.props.onAddRecipient,onClear:this.props.onClear,onRemoveEntryAttempt:this.props.onRemoveRecipient,placeholder:h._("\u4eba\u307e\u305f\u306f\u30b0\u30eb\u30fc\u30d7\u306e\u540d\u524d\u3092\u5165\u529b"),ref:"tokenizer",tabIndex:b("MessengerTabIndices").NEW_MESSAGE_TOKENIZER,useLayer:!0,viewer:this.props.viewer},a)),b("gkx")("678607")?null:b("React").createElement("div",{ref:"tokenizerContext"})),this.$3())};d.$3=function(){return this.props.shouldShowCreateGroupButton?b("React").createElement(i,{className:"_6wh5",label:h._("\u65b0\u3057\u3044\u30c1\u30e3\u30c3\u30c8\u3092\u4f5c\u6210"),onClick:this.props.onCreateGroupButtonClicked,role:"button",tabIndex:0,type:"primary"}):null};return c}(b("React").PureComponent);c.propTypes={forceHideClearButton:a.bool.isRequired,onAddRecipient:a.func.isRequired,onClear:a.func,onRemoveRecipient:a.func.isRequired,onResize:a.func.isRequired,recipients:a.instanceOf(b("immutable").List).isRequired,thread:a.instanceOf(b("ImmutableObject")),viewer:a.string.isRequired,isWorkUser:a.bool.isRequired,shouldShowCreateGroupButton:a.bool,onCreateGroupButtonClicked:a.func};c.defaultProps={shouldShowCreateGroupButton:!1,isWorkUser:!1};e.exports=c}),null);
__d("bs_belt_List",["bs_curry","bs_belt_Array","bs_js_primitive","bs_belt_SortArray"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){if(a)return b("bs_js_primitive").some(a[0])}function c(a){if(a)return a[0];else throw new Error("headExn")}function d(a){if(a)return a[1]}function e(a){if(a)return a[1];else throw new Error("tailExn")}function g(a,b){return[b,a]}function h(a,c){__p&&__p();if(c<0)return void 0;else{a=a;c=c;while(!0){var d=c,e=a;if(e)if(d===0)return b("bs_js_primitive").some(e[0]);else{c=d-1|0;a=e[1];continue}else return void 0}}}function i(a,b){__p&&__p();if(b<0)throw new Error("getExn");else{a=a;b=b;while(!0){var c=b,d=a;if(d)if(c===0)return d[0];else{b=c-1|0;a=d[1];continue}else throw new Error("getExn")}}}function j(a,b,c,d){__p&&__p();while(!0){var e=d,f=c,g=b;if(g){var h=g[1];g=g[0];var i=[g,0];if(a(g)){f[1]=i;c=i;b=h;continue}else{e[1]=i;d=i;b=h;continue}}else return 0}}function k(a,b,c){__p&&__p();while(!0){var d=c,e=b,f=a;if(f){var g=f[0],h=[g[0],0];g=[g[1],0];e[1]=h;d[1]=g;c=g;b=h;a=f[1];continue}else return 0}}function l(a,b){__p&&__p();while(!0){var c=b,d=a;if(d){var e=[d[0],0];c[1]=e;b=e;a=d[1];continue}else return c}}function m(a,b,c){__p&&__p();while(!0){var d=c,e=b;if(e){var f=e[1];e=e[0];if(a(e)){e=[e,0];d[1]=e;c=e;b=f;continue}else{b=f;continue}}else return 0}}function n(a,b,c,d){__p&&__p();while(!0){var e=d,f=c,g=b;if(g){var h=g[1];g=g[0];if(a(g,e)){g=[g,0];f[1]=g;d=e+1|0;c=g;b=h;continue}else{d=e+1|0;b=h;continue}}else return 0}}function o(a,c,d){__p&&__p();while(!0){var e=d,f=c;if(f){var g=f[1];f=a(f[0]);if(f!==void 0){f=[b("bs_js_primitive").valFromOption(f),0];e[1]=f;d=f;c=g;continue}else{c=g;continue}}else return 0}}function aa(a,b,c,d){__p&&__p();while(!0){var e=c,f=a;if(f){var g=f[1];f=f[0];if(d(f[0],b)){e[1]=g;return!0}else{f=[f,0];e[1]=f;c=f;a=g;continue}}else return!1}}function ba(b,c,d,e,a){__p&&__p();while(!0){var f=e,g=b;if(g){var h=g[1];g=g[0];if(a(g[0],c)){f[1]=[[c,d],h];return!0}else{g=[g,0];f[1]=g;e=g;b=h;continue}}else return!1}}function ca(a,b,c){__p&&__p();while(!0){var d=b,e=a;if(e){var f=[c(e[0]),0];d[1]=f;b=f;a=e[1];continue}else return 0}}function da(a,b,c){__p&&__p();while(!0){var d=c,e=b,f=a;if(f&&e){var g=[[f[0],e[0]],0];d[1]=g;c=g;b=e[1];a=f[1];continue}else return 0}}function ea(a,b,c,d){__p&&__p();while(!0){var e=d,f=c,g=b;if(g&&f){var h=[a(g[0],f[0]),0];e[1]=h;d=h;c=f[1];b=g[1];continue}else return 0}}function fa(a,b,c,d){__p&&__p();while(!0){var e=d,f=c,g=b;if(f){var h=[a(g,f[0]),0];e[1]=h;d=h;c=f[1];b=g+1|0;continue}else return 0}}function ga(a,b,c){__p&&__p();while(!0){var d=c,e=b,f=a;if(f===0)return!0;else if(e){var g=[e[0],0];d[1]=g;c=g;b=e[1];a=f-1|0;continue}else return!1}}function ha(a,b,c){__p&&__p();while(!0){var d=c,e=b,f=a;if(f===0)return e;else if(e){var g=[e[0],0];d[1]=g;c=g;b=e[1];a=f-1|0;continue}else return void 0}}function ia(a,b){__p&&__p();if(b<0)return void 0;else if(b===0)return 0;else if(a){var c=[a[0],0];b=ga(b-1|0,a[1],c);if(b)return c;else return void 0}else return void 0}function ja(a,b){__p&&__p();if(b<0)return void 0;else{a=a;b=b;while(!0){var c=b,d=a;if(c===0)return d;else if(d){b=c-1|0;a=d[1];continue}else return void 0}}}function ka(a,b){__p&&__p();if(b<0)return void 0;else if(b===0)return[0,a];else if(a){var c=[a[0],0];b=ha(b-1|0,a[1],c);if(b!==void 0)return[c,b];else return void 0}else return void 0}function p(a,b){if(a){var c=[a[0],0];l(a[1],c)[1]=b;return c}else return b}function q(a,b){if(a){var c=[b(a[0]),0];ca(a[1],c,b);return c}else return 0}function la(a,c){return q(a,b("bs_curry").__1(c))}function r(a,b,c){if(a&&b){var d=[c(a[0],b[0]),0];ea(c,a[1],b[1],d);return d}else return 0}function ma(a,c,d){return r(a,c,b("bs_curry").__2(d))}function s(a,b){if(a){var c=[b(0,a[0]),0];fa(b,1,a[1],c);return c}else return 0}function na(a,c){return s(a,b("bs_curry").__2(c))}function t(a,b){__p&&__p();if(a<=0)return 0;else{var c=[b(0),0],d=c,e=1;while(e<a){var f=[b(e),0];d[1]=f;d=f;e=e+1|0}return c}}function oa(a,c){return t(a,b("bs_curry").__1(c))}function pa(a,b){__p&&__p();if(a<=0)return 0;else{var c=[b,0],d=c,e=1;while(e<a){var f=[b,0];d[1]=f;d=f;e=e+1|0}return c}}function u(a){__p&&__p();a=a;var b=0;while(!0){var c=b,d=a;if(d){b=c+1|0;a=d[1];continue}else return c}}function qa(a,b,c){__p&&__p();while(!0){var d=c,e=b;if(d){a[e]=d[0];c=d[1];b=e+1|0;continue}else return 0}}function v(a){__p&&__p();var b=a;a=a.length-1|0;var c=0;while(!0){var d=c,e=a;if(e<0)return d;else{c=[b[e],d];a=e-1|0;continue}}}function w(a){var b=u(a);b=new Array(b);qa(b,0,a);return b}function ra(a){a=w(a);b("bs_belt_Array").shuffleInPlace(a);return v(a)}function x(a,b){while(!0){var c=b,d=a;if(d){b=[d[0],c];a=d[1];continue}else return c}}function sa(a){return x(a,0)}function ta(a,b){__p&&__p();while(!0){var c=b,d=a;if(c){b=c[1];a=l(c[0],d);continue}else{d[1]=0;return 0}}}function ua(a){__p&&__p();while(!0){var b=a;if(b){var c=b[0];if(c){var d=[c[0],0];ta(l(c[1],d),b[1]);return d}else{a=b[1];continue}}else return 0}}function va(a){__p&&__p();var b=a.length;if(b!==1)if(b!==0){b=a.length;var c=a[b-1|0];for(var b=b-2|0;b>=0;--b)c=p(a[b],c);return c}else return 0;else return a[0]}function y(a,b){__p&&__p();b=b;var c=0;a=a;while(!0){var d=a,e=c;if(d){a=d[1];c=[b(d[0]),e];continue}else return e}}function wa(a,c){return y(a,b("bs_curry").__1(c))}function z(a,b){while(!0){var c=a;if(c){b(c[0]);a=c[1];continue}else return 0}}function xa(a,c){return z(a,b("bs_curry").__1(c))}function A(a,b){__p&&__p();a=a;var c=0;b=b;while(!0){var d=c,e=a;if(e){b(d,e[0]);c=d+1|0;a=e[1];continue}else return 0}}function ya(a,c){return A(a,b("bs_curry").__2(c))}function B(a,b,c){while(!0){var d=b,e=a;if(e){b=c(d,e[0]);a=e[1];continue}else return d}}function za(a,c,d){return B(a,c,b("bs_curry").__2(d))}function C(a,b,c){if(a)return c(C(a[1],b,c),a[0]);else return b}function D(a,c,d){var e=u(a);if(e<1e3)return C(a,c,d);else return b("bs_belt_Array").reduceReverseU(w(a),c,d)}function Aa(a,c,d){return D(a,c,b("bs_curry").__2(d))}function E(a,b,c){__p&&__p();a=a;b=b;c=c;var d=0;while(!0){var e=d,f=b,g=a;if(g){d=e+1|0;b=c(f,g[0],e);a=g[1];continue}else return f}}function Ba(a,c,d){return E(a,c,b("bs_curry").__3(d))}function F(a,b,c){__p&&__p();a=a;b=b;var d=0;c=c;while(!0){var e=d,f=b,g=a;if(g&&f){d=[c(g[0],f[0]),e];b=f[1];a=g[1];continue}else return e}}function Ca(a,c,d){return F(a,c,b("bs_curry").__2(d))}function G(a,b,c){__p&&__p();while(!0){var d=b,e=a;if(e&&d){c(e[0],d[0]);b=d[1];a=e[1];continue}else return 0}}function Da(a,c,d){return G(a,c,b("bs_curry").__2(d))}function H(a,b,c,d){__p&&__p();while(!0){var e=c,f=b,g=a;if(g&&f){c=d(e,g[0],f[0]);b=f[1];a=g[1];continue}else return e}}function Ea(a,c,d,e){return H(a,c,d,b("bs_curry").__3(e))}function I(a,b,c,d){if(a&&b)return d(I(a[1],b[1],c,d),a[0],b[0]);else return c}function J(a,c,d,e){var f=u(a);if(f<1e3)return I(a,c,d,e);else return b("bs_belt_Array").reduceReverse2U(w(a),w(c),d,e)}function Fa(a,c,d,e){return J(a,c,d,b("bs_curry").__3(e))}function K(a,b){__p&&__p();while(!0){var c=a;if(c)if(b(c[0])){a=c[1];continue}else return!1;else return!0}}function Ga(a,c){return K(a,b("bs_curry").__1(c))}function L(a,b){__p&&__p();while(!0){var c=a;if(c)if(b(c[0]))return!0;else{a=c[1];continue}else return!1}}function Ha(a,c){return L(a,b("bs_curry").__1(c))}function M(a,b,c){__p&&__p();while(!0){var d=b,e=a;if(e&&d)if(c(e[0],d[0])){b=d[1];a=e[1];continue}else return!1;else return!0}}function Ia(a,c,d){return M(a,c,b("bs_curry").__2(d))}function Ja(a,b){__p&&__p();while(!0){var c=b,d=a;if(d)if(c){b=c[1];a=d[1];continue}else return 1;else if(c)return-1;else return 0}}function N(a,b,c){__p&&__p();while(!0){var d=b,e=a;if(e)if(d){var f=c(e[0],d[0]);if(f===0){b=d[1];a=e[1];continue}else return f}else return 1;else if(d)return-1;else return 0}}function Ka(a,c,d){return N(a,c,b("bs_curry").__2(d))}function O(a,b,c){__p&&__p();while(!0){var d=b,e=a;if(e)if(d&&c(e[0],d[0])){b=d[1];a=e[1];continue}else return!1;else if(d)return!1;else return!0}}function La(a,c,d){return O(a,c,b("bs_curry").__2(d))}function P(a,b,c){__p&&__p();while(!0){var d=b,e=a;if(e&&d)if(c(e[0],d[0]))return!0;else{b=d[1];a=e[1];continue}else return!1}}function Ma(a,c,d){return P(a,c,b("bs_curry").__2(d))}function Q(b,c,a){__p&&__p();while(!0){var d=b;if(d)if(a(d[0],c))return!0;else{b=d[1];continue}else return!1}}function Na(c,d,a){return Q(c,d,b("bs_curry").__2(a))}function R(c,d,a){__p&&__p();while(!0){var e=c;if(e){var f=e[0];if(a(f[0],d))return b("bs_js_primitive").some(f[1]);else{c=e[1];continue}}else return void 0}}function Oa(c,d,a){return R(c,d,b("bs_curry").__2(a))}function S(b,c,a){__p&&__p();while(!0){var d=b;if(d)if(a(d[0][0],c))return!0;else{b=d[1];continue}else return!1}}function Pa(c,d,a){return S(c,d,b("bs_curry").__2(a))}function T(b,c,a){__p&&__p();if(b){var d=b[1],e=b[0];if(a(e[0],c))return d;else{e=[e,0];d=aa(d,c,e,a);if(d)return e;else return b}}else return 0}function Qa(c,d,a){return T(c,d,b("bs_curry").__2(a))}function U(b,c,d,a){__p&&__p();if(b){var e=b[1],f=b[0];if(a(f[0],c))return[[c,d],e];else{f=[f,0];e=ba(e,c,d,f,a);if(e)return f;else return[[c,d],b]}}else return[[c,d],0]}function Ra(c,d,e,a){return U(c,d,e,b("bs_curry").__2(a))}function V(c,a){c=w(c);b("bs_belt_SortArray").stableSortInPlaceByU(c,a);return v(c)}function Sa(c,a){return V(c,b("bs_curry").__2(a))}function W(a,c){__p&&__p();while(!0){var d=a;if(d){var e=d[0];if(c(e))return b("bs_js_primitive").some(e);else{a=d[1];continue}}else return void 0}}function Ta(a,c){return W(a,b("bs_curry").__1(c))}function X(a,b){__p&&__p();while(!0){var c=a;if(c){var d=c[1];c=c[0];if(b(c)){c=[c,0];m(b,d,c);return c}else{a=d;continue}}else return 0}}function Ua(a,c){return X(a,b("bs_curry").__1(c))}function Y(a,b){__p&&__p();a=a;b=b;var c=0;while(!0){var d=c,e=a;if(e){var f=e[1];e=e[0];if(b(e,d)){e=[e,0];n(b,f,e,d+1|0);return e}else{c=d+1|0;a=f;continue}}else return 0}}function Va(a,c){return Y(a,b("bs_curry").__2(c))}function Z(a,c){__p&&__p();while(!0){var d=a;if(d){var e=d[1];d=c(d[0]);if(d!==void 0){d=[b("bs_js_primitive").valFromOption(d),0];o(c,e,d);return d}else{a=e;continue}}else return 0}}function Wa(a,c){return Z(a,b("bs_curry").__1(c))}function $(a,b){if(a){var c=a[0],d=[c,0],e=[c,0];c=b(c);j(b,a[1],d,e);if(c)return[d,e[1]];else return[d[1],e]}else return[0,0]}function Xa(a,c){return $(a,b("bs_curry").__1(c))}function Ya(a){if(a){var b=a[0],c=[b[0],0];b=[b[1],0];k(a[1],c,b);return[c,b]}else return[0,0]}function Za(a,b){if(a&&b){var c=[[a[0],b[0]],0];da(a[1],b[1],c);return c}else return 0}var $a=u;f.length=u;f.size=$a;f.head=a;f.headExn=c;f.tail=d;f.tailExn=e;f.add=g;f.get=h;f.getExn=i;f.make=pa;f.makeByU=t;f.makeBy=oa;f.shuffle=ra;f.drop=ja;f.take=ia;f.splitAt=ka;f.concat=p;f.concatMany=va;f.reverseConcat=x;f.flatten=ua;f.mapU=q;f.map=la;f.zip=Za;f.zipByU=r;f.zipBy=ma;f.mapWithIndexU=s;f.mapWithIndex=na;f.fromArray=v;f.toArray=w;f.reverse=sa;f.mapReverseU=y;f.mapReverse=wa;f.forEachU=z;f.forEach=xa;f.forEachWithIndexU=A;f.forEachWithIndex=ya;f.reduceU=B;f.reduce=za;f.reduceWithIndexU=E;f.reduceWithIndex=Ba;f.reduceReverseU=D;f.reduceReverse=Aa;f.mapReverse2U=F;f.mapReverse2=Ca;f.forEach2U=G;f.forEach2=Da;f.reduce2U=H;f.reduce2=Ea;f.reduceReverse2U=J;f.reduceReverse2=Fa;f.everyU=K;f.every=Ga;f.someU=L;f.some=Ha;f.every2U=M;f.every2=Ia;f.some2U=P;f.some2=Ma;f.cmpByLength=Ja;f.cmpU=N;f.cmp=Ka;f.eqU=O;f.eq=La;f.hasU=Q;f.has=Na;f.getByU=W;f.getBy=Ta;f.keepU=X;f.keep=Ua;f.keepWithIndexU=Y;f.keepWithIndex=Va;f.keepMapU=Z;f.keepMap=Wa;f.partitionU=$;f.partition=Xa;f.unzip=Ya;f.getAssocU=R;f.getAssoc=Oa;f.hasAssocU=S;f.hasAssoc=Pa;f.removeAssocU=T;f.removeAssoc=Qa;f.setAssocU=U;f.setAssoc=Ra;f.sortU=V;f.sort=Sa}),null);
__d("MessengerDialogs.bs",["bs_curry","bs_belt_List"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[0],h=[void 0];function i(){var a=h[0],c=g[0];if(a!==void 0){a=a;if(c)return b("bs_curry")._1(a,c);else return b("bs_curry")._1(a,void 0)}else return 0}function a(a){h[0]=a;return i(0)}function c(a){g[0]=[a,g[0]];return i(0)}function d(a,c){if(a!==void 0){var d=a;g[0]=b("bs_belt_List").keep(g[0],function(a){return a!==d})}else{c=g[0];g[0]=c?c[1]:0}return i(0)}function e(){g[0]=0;return i(0)}f.visibleDialogs=g;f.setDialogComponentState=h;f.updateComponent=i;f.addHandler=a;f.showDialog=c;f.removeDialog=d;f.removeAllDialogs=e}),null);
__d("MessengerDialog.react",["cx","LayerHideOnEscape","MessengerDialogLayerShrinkOnHide","MessengerDialogs.bs","React","XUIDialog.react","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";a=b("React").PropTypes;c=b("React").createClass({displayName:"MessengerDialog",propTypes:{onToggle:a.func,repositionOnUpdate:a.bool,shown:a.bool,type:a.oneOf(["alert","default"]),width:a.number,removeDialogOnToggle:a.bool},getDefaultProps:function(){return{repositionOnUpdate:!1,shown:!0,type:"alert",width:400,removeDialogOnToggle:!0}},componentDidUpdate:function(){this.props.repositionOnUpdate&&setTimeout(function(){this.isMounted()&&this.refs.dialog&&this.refs.dialog.layer&&this.refs.dialog.layer.updatePosition()}.bind(this),0)},handleToggle:function(a){this.props.onToggle&&this.props.onToggle(a),!a&&this.props.removeDialogOnToggle&&b("MessengerDialogs.bs").removeDialog()},render:function(){return b("React").createElement(b("XUIDialog.react"),babelHelpers["extends"]({behaviors:{MessengerDialogLayerShrinkOnHide:b("MessengerDialogLayerShrinkOnHide"),LayerHideOnEscape:b("LayerHideOnEscape")}},this.props,{onToggle:this.handleToggle,className:b("joinClasses")("_4ebx",this.props.className),ref:"dialog"}),b("React").createElement("div",{className:"_4eby"+(this.props.type==="alert"?" _2c9g":"")+(this.props.type==="default"?" _2c9i":"")},this.props.children))}});e.exports=c}),null);
__d("MessengerDialogBody.react",["cx","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").createElement("div",{className:b("joinClasses")("_4eb-",this.props.className)},this.props.children)};return c}(b("React").Component);e.exports=a}),null);
__d("MessengerDialogButton.react",["cx","MessengerButtonReact.re","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("MessengerButtonReact.re").make;a=b("React").PropTypes;c=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props,c=a.action,d=a.className;a=babelHelpers.objectWithoutPropertiesLoose(a,["action","className"]);return b("React").createElement(h,babelHelpers["extends"]({className:b("joinClasses")(d,"_5ixy"+(c==="button"?" layerButton":"")+(c==="cancel"?" layerCancel":"")+(c==="confirm"?" layerConfirm":""))},a))};return c}(b("React").PureComponent);c.propTypes={action:a.oneOf(["button","cancel","confirm"])};e.exports=c}),null);
__d("MessengerDialogCancelButton.react",["fbt","MessengerDialogButton.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").createElement(b("MessengerDialogButton.react"),babelHelpers["extends"]({action:"cancel",label:g._("\u30ad\u30e3\u30f3\u30bb\u30eb"),type:"secondary"},this.props))};return c}(b("React").PureComponent);e.exports=a}),null);
__d("MessengerDialogFooter.react",["cx","LeftRight.react","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").createElement("div",{className:b("joinClasses")("_4eb_",this.props.className)},b("React").createElement(b("LeftRight.react"),null,b("React").createElement("div",{className:"_2_d1"},this.props.leftContent),b("React").createElement("div",null,this.props.children)))};return c}(b("React").Component);c.propTypes={leftContent:a.object};e.exports=c}),null);
__d("MessengerPopoverMenu.react",["cx","ContextualDialogArrow","ContextualLayerAutoFlip","ContextualLayerUpdateOnScroll","PopoverMenu.react","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.showPopover=function(){this.refs.menu&&this.refs.menu.showPopover()};d.render=function(){var a=this.props,c=a.children,d=a.className,e=a.isOpen;a=babelHelpers.objectWithoutPropertiesLoose(a,["children","className","isOpen"]);c=b("React").Children.only(c);return b("React").createElement(b("PopoverMenu.react"),babelHelpers["extends"]({className:b("joinClasses")(d,!a.disableArrowKeyActivation||e?"_150g":""),enableActivationOnEnter:!0,layerBehaviors:[b("ContextualLayerAutoFlip"),b("ContextualLayerUpdateOnScroll"),b("ContextualDialogArrow")]},a,{ref:"menu"}),c)};return c}(b("React").PureComponent);e.exports=a}),null);
__d("MessengerDialogBodyReact.bs",["cx","ReactDOMRe.bs","ReasonReact.bs","joinClasses","bs_js_primitive"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ReasonReact.bs").statelessComponent("MessengerDialogBodyReact");function i(a,c){var d=a!==void 0?a:"";return[h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],function(){return b("ReactDOMRe.bs").createElementVariadic("div",{className:b("joinClasses")("_4eb-",d)},c)},h[9],h[10],h[11],h[12]]}a=b("ReasonReact.bs").wrapReasonForJs(h,function(a){return i(b("bs_js_primitive").nullable_to_opt(a.className),a.children)});f.component=h;f.make=i;f.jsComponent=a}),null);
__d("MessengerDialogReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerDialog.react","MessengerDialogButton.react","MessengerDialogFooter.react","MessengerDialogCancelButton.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){if(a!==void 0)switch(a){case 0:return"cancel";case 1:return"button";case 2:return"confirm"}}function h(a){if(a!==void 0)if(a)return"secondary";else return"primary"}function a(a,c,d,e,f,g,h,i,j){return b("ReasonReact.bs").wrapJsForReason(b("MessengerDialog.react"),{className:b("bs_js_null_undefined").fromOption(a),onToggle:b("bs_js_null_undefined").fromOption(c),repositionOnUpdate:b("bs_js_null_undefined").fromOption(d),shown:b("bs_js_null_undefined").fromOption(e),titleID:b("bs_js_null_undefined").fromOption(f),type:b("bs_js_null_undefined").fromOption(g),width:b("bs_js_null_undefined").fromOption(h),removeDialogOnToggle:b("bs_js_null_undefined").fromOption(i)},j)}a=[a];function c(a,c,d){return b("ReasonReact.bs").wrapJsForReason(b("MessengerDialogFooter.react"),{className:b("bs_js_null_undefined").fromOption(a),leftContent:b("bs_js_null_undefined").fromOption(c)},d)}c=[c];var i=[];function d(a,c){return b("ReasonReact.bs").wrapJsForReason(b("MessengerDialogCancelButton.react"),{onClick:b("bs_js_null_undefined").fromOption(a)},c)}d=[d];function e(a,c,d,e,f,i,j,k,l,m){return b("ReasonReact.bs").wrapJsForReason(b("MessengerDialogButton.react"),{action:b("bs_js_null_undefined").fromOption(g(a)),label:b("bs_js_null_undefined").fromOption(c),disabled:b("bs_js_null_undefined").fromOption(d),use:b("bs_js_null_undefined").fromOption(e),onClick:b("bs_js_null_undefined").fromOption(f),type:b("bs_js_null_undefined").fromOption(h(i)),className:b("bs_js_null_undefined").fromOption(j),leftContent:b("bs_js_null_undefined").fromOption(k),ariaLabel:b("bs_js_null_undefined").fromOption(l)},m)}e=[e];var j=[],k=[],l=0,m=0,n=0;f.stringOfButtonAction=g;f.stringOfButtonType=h;f.Dialog=a;f.Header=l;f.Title=m;f.Footer=c;f.Footer2=i;f.CancelButton=d;f.Button=e;f.ButtonJSX3=j;f.Body=n;f.Body2=k}),null);
__d("MessengerDialogHeaderReact.bs",["cx","React","joinClasses","bs_js_primitive"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a){var c=a.autofocus;c=c!==void 0?c:!1;var d=a.id;a=a.children;c={className:b("joinClasses")("_4ebz",c?"autofocus":"")};d!==void 0&&(c.id=b("bs_js_primitive").valFromOption(d));return b("React").createElement("h2",c,a)}c=a;f.make=c}),null);
__d("MessengerDialogHeaderReact.re",["MessengerDialogHeaderReact.bs"],(function(a,b,c,d,e,f){(function(a){return null});a=b("MessengerDialogHeaderReact.bs").make;f.make=a}),null);
__d("MessengerDialogTitleReact.bs",["cx","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var c=a.autofocus;c=c!==void 0?c:!1;a=a.children;return b("React").createElement("div",{className:b("joinClasses")("_19jt",c?"autofocus":"")},a)}c=a;f.make=c}),null);
__d("MessengerDialogTitleReact.re",["MessengerDialogTitleReact.bs"],(function(a,b,c,d,e,f){(function(a){return null});a=b("MessengerDialogTitleReact.bs").make;f.make=a}),null);
__d("MessengerSettingsStore",["CacheStorage","MessengerDotComSettingsInitialData","MessengerSettingsActions","MessengerStore","qex"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new(b("CacheStorage"))("localstorage"),h="desktopNotifsEnabled";a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c;c=a.call(this)||this;c.$MessengerSettingsStore1=babelHelpers["extends"]({},b("MessengerDotComSettingsInitialData"),{desktopNotifsEnabled:c.$MessengerSettingsStore2()});var d=b("qex")._("1014417");d!=null&&(c.$MessengerSettingsStore1.privacy_section_collapsed=d);return c}var d=c.prototype;d.getSettings=function(){return this.$MessengerSettingsStore1};d.$MessengerSettingsStore2=function(){return g.get(h,!1)};d.$MessengerSettingsStore3=function(a){g.set(h,a)};d.__onDispatch=function(a){switch(a.type){case b("MessengerSettingsActions").Types.CHANGE_SETTINGS:this.$MessengerSettingsStore1=babelHelpers["extends"]({},this.$MessengerSettingsStore1,a.newSettings);this.emitChange();break;case b("MessengerSettingsActions").Types.CHANGE_DESKTOP_NOTIFS:this.$MessengerSettingsStore1=babelHelpers["extends"]({},this.$MessengerSettingsStore1,{desktopNotifsEnabled:a.desktopNotifsEnabled});this.$MessengerSettingsStore3(a.desktopNotifsEnabled);this.emitChange();break}};return c}(b("MessengerStore"));e.exports=new a()}),null);
__d("MercuryThreadTitle_DEPRECATED.react",["fbt","MercuryIDs","MercuryParticipantListRenderer","MessengerParticipants.bs","MessengerTextWithEmoticons.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=!1,c.state={participantNames:""},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){this.$1=!0,this.$2(this.props)};d.componentWillUnmount=function(){this.$1=!1};d.componentDidUpdate=function(a){a!==this.props&&this.$2(this.props)};d.render=function(){return b("React").createElement("span",{className:this.props.className},this.props.thread.name?this.$3():this.state.participantNames,this.props.children)};d.getTitle=function(){return this.state.participantNames};d.$3=function(){var a=this.props.thread,c=this.props.maxTitle?this.props.maxTitle<a.name.length?a.name.slice(0,this.props.maxTitle)+"...":a.name:a.name;c=b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:c});return!a.unread_count||!this.props.showUnreadCount?c:this.$4(c,a.unread_count)};d.$2=function(a){__p&&__p();var c=this;if(a.thread.name)return;this.setState({participantNames:""});var d=b("MercuryIDs").getParticipantIDFromUserID(a.viewer),e=a.thread.participants||[];e.length>1&&(e=e.filter(function(a){return a!=d}));b("MessengerParticipants.bs").getMulti(e,function(d){__p&&__p();if(!c.$1)return;var f=e.map(function(a){return d[a]}),g=a.thread.custom_nickname?{}:null,h=b("MessengerTextWithEmoticons.react");if(g)for(var i in a.thread.custom_nickname)g[i]=b("React").createElement(h,{renderEmoticons:!0,renderEmoji:!0,text:a.thread.custom_nickname[i]});h=new(b("MercuryParticipantListRenderer"))().setUseShortName(a.useShortName).setUseAndSeparator(a.useAndSeparator).setIsNewThread(a.isNewThread).setNickname(g).renderParticipantList(f);g=a.showUnreadCount&&a.thread.unread_count?c.$4(h,a.thread.unread_count):h;c.setState({participantNames:g})})};d.$4=function(a,b){return g._("{conversation-title} ({unread-count})",[g._param("conversation-title",a),g._param("unread-count",b)])};return c}(b("React").Component);a.defaultProps={isNewThread:!1,showUnreadCount:!1,useShortName:!1,useAndSeparator:!1};e.exports=a}),null);
__d("MessengerRTCGroupCallContactListItem.react",["cx","fbt","ix","FBRTCParticipantCallState","Image.react","Link.react","MessengerContactImageReact.bs","React","RTWebStrings","emptyFunction"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("MessengerContactImageReact.bs").jsComponent,k=(a={},a[b("FBRTCParticipantCallState").DISCONNECTED]=b("RTWebStrings").disconnected,a[b("FBRTCParticipantCallState").NO_ANSWER]=b("RTWebStrings").noAnswer,a[b("FBRTCParticipantCallState").REJECTED]=b("RTWebStrings").noAnswer,a[b("FBRTCParticipantCallState").UNREACHABLE]=b("RTWebStrings").unreachable,a[b("FBRTCParticipantCallState").CONNECTION_DROPPED]=b("RTWebStrings").connectionDropped,a[b("FBRTCParticipantCallState").CONTACTING]=b("RTWebStrings").contacting,a[b("FBRTCParticipantCallState").RINGING]=b("RTWebStrings").ringing,a[b("FBRTCParticipantCallState").CONNECTING]=b("RTWebStrings").connecting,a[b("FBRTCParticipantCallState").CONNECTED]=b("RTWebStrings").connected,a[b("FBRTCParticipantCallState").PARTICIPANT_LIMIT_REACHED]=b("RTWebStrings").participantLimitReached,a[b("FBRTCParticipantCallState").IN_ANOTHER_CALL]=b("RTWebStrings").inAnotherCall,a),l=32;c=function(a){var c=a.isSelected,d=a.onClick,e=a.user,f=a.dataTestID;a=a.participantState;return b("React").createElement(b("Link.react"),{"aria-checked":c,className:"_4nvn",onClick:o(a)?b("emptyFunction"):d,"data-testid":f,role:"checkbox"},b("React").createElement(j,{className:"_4nvr",isMessengerUser:e.isMessengerUser,isPartiesUser:e.isPartiesUser,size:l,src:e.profilePictureUrl}),b("React").createElement("div",{className:"_4nvs"},b("React").createElement("div",{className:"_4nvt"},b("React").createElement("div",{className:"_4nv_"},e.userName),b("React").createElement(m,{user:e,participantState:a})),b("React").createElement(n,{isSelected:c,participantState:a})))};var m=function(a){var c=a.user;a=a.participantState;if(a){a=k[a.state]||h._("\u4e0d\u660e");return b("React").createElement("div",{className:"_4nw0"},a)}return c.vanity?b("React").createElement("div",{className:"_4nw0"},"@",c.vanity):null},n=function(a){var c=a.isSelected;a=a.participantState;if(o(a))return b("React").createElement("div",{className:"_1j79"},h._("\u901a\u8a71\u4e2d"));else if(c)return b("React").createElement("div",{className:"_1j79"},b("React").createElement(b("Image.react"),{src:i("86852")}));return null};function o(a){if(!a)return!1;switch(a.state){case b("FBRTCParticipantCallState").CONTACTING:case b("FBRTCParticipantCallState").RINGING:case b("FBRTCParticipantCallState").CONNECTING:case b("FBRTCParticipantCallState").CONNECTED:return!0;default:return!1}}e.exports=c}),null);
__d("MessengerRTCGroupCallContactList.react",["cx","MessengerRTCGroupCallContactListItem.react","MessengerScrollableArea.react","React","VideoCallWebDriverIDs","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){var c=a.isParticipantSelected,d=a.onClick,e=a.remoteUsers;a=a.participantStates;var f=a===void 0?b("immutable").Map():a;a=e.map(function(a){return b("React").createElement(b("MessengerRTCGroupCallContactListItem.react"),{isSelected:c.get(a.FBID),key:a.FBID,onClick:function(){return d(a.FBID)},user:a,dataTestID:b("VideoCallWebDriverIDs").RTC_PICKER_DIALOG_CONTACT_LIST_ITEM+a.FBID,participantState:f.get(a.FBID)})});return b("React").createElement(b("MessengerScrollableArea.react"),{className:"_12zw"},a)};e.exports=a}),null);
__d("MessengerRTCGroupCallThreadRow.react",["cx","fbt","MercuryParticipantsImage.react","MercuryThreadTitle_DEPRECATED.react","MessengerProfileImageWrapperReact.bs","MessengerThreadImageReact.bs","React","RTCCallTitle.react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("MessengerProfileImageWrapperReact.bs").jsComponent,j=b("MessengerThreadImageReact.bs").jsComponent,k=function(){return b("React").createElement("div",{className:"_1apf"},h._("\u3053\u306e\u30b0\u30eb\u30fc\u30d7\u901a\u8a71\u306b\u8ffd\u52a0\u3055\u308c\u305f\u4eba\u306b\u306f\u3001\u30b9\u30ec\u30c3\u30c9\u306e\u4ee5\u524d\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u3059\u3079\u3066\u8868\u793a\u3055\u308c\u307e\u3059\u3002"))},l=function(){return b("React").createElement("div",{className:"_1ydy"},h._("\u30d6\u30ed\u30c3\u30af\u6e08\u307f\u306e\u4eba\u306b\u767a\u4fe1\u3057\u3088\u3046\u3068\u3057\u3066\u3044\u307e\u3059\u3002"))};a=function(a){var c=a.thread,d=a.displayAddMemberWarning,e=a.displayBlockedMemberWarning,f=a.participants,g=a.viewerID;babelHelpers.objectWithoutPropertiesLoose(a,["thread","displayAddMemberWarning","displayBlockedMemberWarning","participants","viewerID"]);return b("React").createElement("div",{className:"_5y31"},c&&c.image_src?b("React").createElement(j,{className:"_5y32",participants:f,thread:c,viewer:g}):b("React").createElement(i,{className:"_5y32",showBadge:!1},b("React").createElement(b("MercuryParticipantsImage.react"),{participants:Object.keys(f.toJS()),size:50})),b("React").createElement("div",{className:"_5y34"},c&&c.name?b("React").createElement(b("MercuryThreadTitle_DEPRECATED.react"),{className:"_5y37",thread:c,viewer:g}):b("React").createElement(b("RTCCallTitle.react"),{className:"_5y37",participants:f,viewer:g}),d?b("React").createElement(k,null):null,e?b("React").createElement(l,null):null))};e.exports=a}),null);
__d("RTCCallState",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({NO_ONGOING_CALL:"NO_ONGOING_CALL",AUDIO_GROUP_CALL:"AUDIO_GROUP_CALL",VIDEO_GROUP_CALL:"VIDEO_GROUP_CALL"})}),null);
__d("MercuryAttachmentSnippetType",["keyMirror"],(function(a,b,c,d,e,f){a=b("keyMirror")({PHOTO:null,GIF:null,VIDEO:null,AUDIO_CLIP:null,STICKER:null,SHARE:null,ERROR:null,MIXED:null,GIFT:null,THIRDPARTYSTICKER:null,FILE:null,LIKE_STICKER:null});e.exports=a}),null);
__d("MercuryGiftSnippetRenderer",["fbt"],(function(a,b,c,d,e,f,g){"use strict";a={renderText:function(a,b){return a?g._("\u30d0\u30ec\u30f3\u30bf\u30a4\u30f3\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u9001\u4fe1\u3057\u307e\u3057\u305f\u3002"):g._("{name}\u3055\u3093\u304b\u3089\u30d0\u30ec\u30f3\u30bf\u30a4\u30f3\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u5c4a\u304d\u307e\u3057\u305f\u3002",[g._param("name",b)])}};e.exports=a}),null);
__d("P2PSnippetStringUtils",["fbt","P2PPaymentRequestStatus","P2PTransferStatus"],(function(a,b,c,d,e,f,g){__p&&__p();a={getRequestCanceledSnippet:function(a,b,c,d,e){if(a)return g._("{receiver's name}\u3055\u3093\u3078\u306e{payment request amount}\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u306f\u30ad\u30e3\u30f3\u30bb\u30eb\u3055\u308c\u307e\u3057\u305f\u3002",[g._param("payment request amount",e),g._param("receiver's name",d)]);else if(b)return g._("{requester's name}\u3055\u3093\u304b\u3089\u306e{payment request amount}\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u306f\u30ad\u30e3\u30f3\u30bb\u30eb\u3055\u308c\u307e\u3057\u305f\u3002",[g._param("requester's name",c),g._param("payment request amount",e)]);else return g._("{requester's name}\u3055\u3093\u304b\u3089{receiver's name}\u3055\u3093\u3078\u306e{payment request amount}\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u306f\u30ad\u30e3\u30f3\u30bb\u30eb\u3055\u308c\u307e\u3057\u305f\u3002",[g._param("requester's name",c),g._param("payment request amount",e),g._param("receiver's name",d)])},getRequestDeclinedSnippet:function(a,b,c,d,e){if(a)return g._("{receiver's name}\u3055\u3093\u304c\u3042\u306a\u305f\u304b\u3089\u306e{payment request amount}\u306e\u652f\u6255\u3044\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u5374\u4e0b\u3057\u307e\u3057\u305f\u3002",[g._param("receiver's name",d),g._param("payment request amount",e)]);else if(b)return g._("{requester's name}\u3055\u3093\u304b\u3089\u306e{payment request amount}\u306e\u652f\u6255\u3044\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u62d2\u5426\u3057\u307e\u3057\u305f\u3002",[g._param("requester's name",c),g._param("payment request amount",e)]);else return g._("{receiver's name}\u3055\u3093\u304c{sender's name}\u3055\u3093\u304b\u3089\u306e{payment request amount}\u306e\u652f\u6255\u3044\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u62d2\u5426\u3057\u307e\u3057\u305f\u3002",[g._param("receiver's name",d),g._param("sender's name",c),g._param("payment request amount",e)])},getRequestSentSnippet:function(a,b,c,d,e){if(a)return g._("{requestee name}\u3055\u3093\u306b{amount}\u306e\u652f\u6255\u3044\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u9001\u4fe1\u3057\u307e\u3057\u305f\u3002",[g._param("amount",e),g._param("requestee name",d)]);else if(b)return g._("{requester name}\u3055\u3093\u304b\u3089{amount}\u306e\u652f\u6255\u3044\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u3042\u308a\u307e\u3057\u305f\u3002",[g._param("requester name",c),g._param("amount",e)]);else return g._("{name}\u3055\u3093\u304c{requestee name}\u3055\u3093\u306b{amount}\u306e\u652f\u6255\u3044\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u9001\u4fe1\u3057\u307e\u3057\u305f\u3002",[g._param("name",c),g._param("amount",e),g._param("requestee name",d)])},getRequestSnippetByStatus:function(a,c,d,e,f,g){a=a||b("P2PPaymentRequestStatus").INITED;c=[c,d,e,f,g];switch(a){case b("P2PPaymentRequestStatus").DECLINED:return this.getRequestDeclinedSnippet.apply(this,c);case b("P2PPaymentRequestStatus").TRANSFER_FAILED:case b("P2PPaymentRequestStatus").CANCELED:return this.getRequestCanceledSnippet.apply(this,c)}return this.getRequestSentSnippet.apply(this,c)},getTransferCanceledSnippet:function(a,b,c,d,e){if(a)return g._("{receiver_name}\u3055\u3093\u3078\u306e{amount}\u306e\u9001\u91d1\u304c\u30ad\u30e3\u30f3\u30bb\u30eb\u3055\u308c\u307e\u3057\u305f\u3002",[g._param("amount",e),g._param("receiver_name",d)]);else if(b)return g._("{sender name}\u3055\u3093\u306e{amount}\u306e\u9001\u91d1\u306f\u30ad\u30e3\u30f3\u30bb\u30eb\u3055\u308c\u307e\u3057\u305f\u3002",[g._param("sender name",c),g._param("amount",e)]);else return g._("{sender_name}\u3055\u3093\u304b\u3089{receiver_name}\u3055\u3093\u3078\u306e{amount}\u306e\u9001\u91d1\u306f\u30ad\u30e3\u30f3\u30bb\u30eb\u3055\u308c\u307e\u3057\u305f\u3002",[g._param("sender_name",c),g._param("amount",e),g._param("receiver_name",d)])},getTransferDeclinedSnippet:function(a,b,c,d,e){if(a)return g._("{receiver_name}\u3055\u3093\u304c{amount}\u306e\u9001\u91d1\u306e\u53d7\u3051\u53d6\u308a\u3092\u627f\u8a8d\u3057\u307e\u305b\u3093\u3067\u3057\u305f\u3002",[g._param("receiver_name",d),g._param("amount",e)]);else if(b)return g._("{sender name}\u3055\u3093\u306e{amount}\u306e\u9001\u91d1\u306e\u53d7\u3051\u53d6\u308a\u3092\u62d2\u5426\u3057\u307e\u3057\u305f\u3002",[g._param("sender name",c),g._param("amount",e)]);else return g._("{receiver_name}\u3055\u3093\u306f{sender_name}\u3055\u3093\u306e{amount}\u306e\u9001\u91d1\u306e\u53d7\u3051\u53d6\u308a\u3092\u62d2\u5426\u3057\u307e\u3057\u305f\u3002",[g._param("receiver_name",d),g._param("sender_name",c),g._param("amount",e)])},getTransferSentSnippet:function(a,b,c,d,e){if(a)return g._("{receiver name}\u3055\u3093\u306b{amount}\u3092\u9001\u91d1\u3057\u307e\u3057\u305f\u3002",[g._param("receiver name",d),g._param("amount",e)]);else if(b)return g._("{name}\u3055\u3093\u304b\u3089{amount}\u306e\u9001\u91d1\u304c\u3042\u308a\u307e\u3057\u305f\u3002",[g._param("name",c),g._param("amount",e)]);else return g._("{sender name}\u3055\u3093\u304c{amount}\u3092{receiver name}\u306b\u9001\u91d1\u3057\u307e\u3057\u305f\u3002",[g._param("sender name",c),g._param("receiver name",d),g._param("amount",e)])},getTransferSnippetByStatus:function(a,c,d,e,f,g){c=[c,d,e,f,g];d=a||b("P2PTransferStatus").PENDING_SENDER_INITED;switch(d){case b("P2PTransferStatus").CANCELED_DECLINED:return this.getTransferDeclinedSnippet.apply(this,c);case b("P2PTransferStatus").CANCELED_SENDER_RISK:case b("P2PTransferStatus").CANCELED_RECIPIENT_RISK:case b("P2PTransferStatus").CANCELED_SYSTEM_FAIL:case b("P2PTransferStatus").CANCELED_EXPIRED:case b("P2PTransferStatus").CANCELED_SAME_CARD:return this.getTransferCanceledSnippet.apply(this,c)}return this.getTransferSentSnippet.apply(this,c)}};e.exports=a}),null);
__d("MercuryAttachmentSnippetRenderer",["fbt","CurrentUser","MercuryAttachmentSnippetType","MercuryAttachmentType","MercuryAudioType","MercuryGiftSnippetRenderer","MessengerLightweightActionUtils","P2PSnippetStringUtils","StickerConstants","StoryAttachmentStyle","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a={getAttachmentSnippetType:function(a){__p&&__p();if(this._hasOnlyPhotos(a))return b("MercuryAttachmentSnippetType").PHOTO;if(this._hasOnlyAnimatedImages(a))return b("MercuryAttachmentSnippetType").GIF;if(this._hasOnlyVideo(a))return b("MercuryAttachmentSnippetType").VIDEO;if(this._hasAudioClip(a))return b("MercuryAttachmentSnippetType").AUDIO_CLIP;if(this._hasLikeSticker(a))return b("MercuryAttachmentSnippetType").LIKE_STICKER;if(this._hasSticker(a))return b("MercuryAttachmentSnippetType").STICKER;if(this._hasThirdPartySticker(a))return b("MercuryAttachmentSnippetType").THIRDPARTYSTICKER;if(this._hasShare(a))return b("MercuryAttachmentSnippetType").SHARE;if(this._hasGift(a))return b("MercuryAttachmentSnippetType").GIFT;if(this._hasError(a))return b("MercuryAttachmentSnippetType").ERROR;return this._hasFile(a)?b("MercuryAttachmentSnippetType").FILE:b("MercuryAttachmentSnippetType").MIXED},renderAttachmentSnippetText:function(a,c,d,e){__p&&__p();switch(a){case b("MercuryAttachmentSnippetType").PHOTO:return this._renderPhotoAttachmentSnippetText(c,d,this._getPhotoAttachments(e));case b("MercuryAttachmentSnippetType").GIF:return this._renderAnimatedImagesAttachmentSnippetText(c,d,this._getAnimatedImageAttachments(e));case b("MercuryAttachmentSnippetType").VIDEO:return c?g._("\u52d5\u753b\u3092\u9001\u4fe1\u3057\u307e\u3057\u305f\u3002"):g._("{sender name}\u3055\u3093\u304c\u52d5\u753b\u3092\u9001\u4fe1\u3057\u307e\u3057\u305f\u3002",[g._param("sender name",d)]);case b("MercuryAttachmentSnippetType").AUDIO_CLIP:return c?g._("\u30dc\u30a4\u30b9\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u9001\u4fe1\u3057\u307e\u3057\u305f"):g._("{name}\u3055\u3093\u304c\u30dc\u30a4\u30b9\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u9001\u4fe1\u3057\u307e\u3057\u305f\u3002",[g._param("name",d)]);case b("MercuryAttachmentSnippetType").STICKER:case b("MercuryAttachmentSnippetType").LIKE_STICKER:case b("MercuryAttachmentSnippetType").THIRDPARTYSTICKER:return c?g._("\u3042\u306a\u305f\u304c\u30b9\u30bf\u30f3\u30d7\u3092\u9001\u4fe1\u3057\u307e\u3057\u305f\u3002"):g._("{name}\u3055\u3093\u304c\u30b9\u30bf\u30f3\u30d7\u3092\u9001\u4fe1\u3057\u307e\u3057\u305f\u3002",[g._param("name",d)]);case b("MercuryAttachmentSnippetType").SHARE:if(e&&this._hasP2PPayment(e))return this._renderP2PPaymentSnippetText(e[0]);if(e&&this._hasP2PPaymentRequest(e))return this._renderP2PPaymentRequestSnippetText(e[0]);if(e&&this._hasBusinessMessage(e))return this._renderBusinessMessageSnippetText(e[0],d);if(e&&this._hasLocation(e))return c?g._("\u4f4d\u7f6e\u60c5\u5831\u3092\u9001\u4fe1\u3057\u307e\u3057\u305f\u3002"):g._("{sender name}\u3055\u3093\u304c\u4f4d\u7f6e\u60c5\u5831\u3092\u9001\u4fe1\u3057\u307e\u3057\u305f\u3002",[g._param("sender name",d)]);if(e&&this._hasLiveLocation(e))return c?g._("\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u4f4d\u7f6e\u60c5\u5831\u3092\u9001\u4fe1\u3057\u307e\u3057\u305f\u3002"):g._("{sender name}\u3055\u3093\u304c\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u4f4d\u7f6e\u60c5\u5831\u3092\u9001\u4fe1\u3057\u307e\u3057\u305f\u3002",[g._param("sender name",d)]);if(e&&this._hasMontageDirect(e)){if(!b("gkx")("676919"))return c?g._("\u30ea\u30f3\u30af\u3092\u9001\u4fe1\u3057\u307e\u3057\u305f\u3002"):g._("{sender name}\u3055\u3093\u304c\u30ea\u30f3\u30af\u3092\u9001\u4fe1\u3057\u307e\u3057\u305f\u3002",[g._param("sender name",d)]);a=e[0];a=(a=a)!=null?(a=a.share)!=null?(a=a.media)!=null?a.source:a:a:a;return c?a?g._("\u52d5\u753b\u3092\u9001\u4fe1\u3057\u307e\u3057\u305f\u3002"):g._("\u5199\u771f\u3092\u9001\u4fe1\u3057\u307e\u3057\u305f\u3002"):a?g._("{sender name}\u3055\u3093\u306e\u6d88\u3048\u308b\u52d5\u753b\u3092\u898b\u3088\u3046\u3002",[g._param("sender name",d)]):g._("{sender name}\u3055\u3093\u306e\u6d88\u3048\u308b\u5199\u771f\u3092\u898b\u3088\u3046\u3002",[g._param("sender name",d)])}return e&&e.length===1&&b("MessengerLightweightActionUtils").isLWAAttachment(e[0])?b("MessengerLightweightActionUtils").getLWASnippetText(e):c?g._("\u30ea\u30f3\u30af\u3092\u9001\u4fe1\u3057\u307e\u3057\u305f\u3002"):g._("{sender name}\u3055\u3093\u304c\u30ea\u30f3\u30af\u3092\u9001\u4fe1\u3057\u307e\u3057\u305f\u3002",[g._param("sender name",d)]);case b("MercuryAttachmentSnippetType").GIFT:return b("MercuryGiftSnippetRenderer").renderText(c,d);case b("MercuryAttachmentSnippetType").FILE:return c?g._("\u6dfb\u4ed8\u30d5\u30a1\u30a4\u30eb\u3092\u9001\u4fe1\u3057\u307e\u3057\u305f\u3002"):g._("{sender name}\u3055\u3093\u304c\u6dfb\u4ed8\u30d5\u30a1\u30a4\u30eb\u3092\u9001\u4fe1\u3057\u307e\u3057\u305f\u3002",[g._param("sender name",d)]);case b("MercuryAttachmentSnippetType").ERROR:return c?g._("\u6dfb\u4ed8\u30d5\u30a1\u30a4\u30eb\u3092\u9001\u4fe1\u3057\u307e\u3057\u305f\u3002"):g._("{sender name}\u3055\u3093\u304c\u6dfb\u4ed8\u30d5\u30a1\u30a4\u30eb\u3092\u9001\u4fe1\u3057\u307e\u3057\u305f\u3002",[g._param("sender name",d)]);default:return""}},_hasOnlyPhotos:function(a){return this._getPhotoAttachments(a).length===a.length},_hasThirdPartySticker:function(a){return a.length===1&&a[0].attach_type===b("MercuryAttachmentType").THIRDPARTYSTICKER},_hasOnlyAnimatedImages:function(a){return this._getAnimatedImageAttachments(a).length===a.length},_hasOnlyVideo:function(a){return a.length===1&&a[0].attach_type===b("MercuryAttachmentType").VIDEO},_hasAudioClip:function(a){var c=a[0].metadata&&a[0].metadata.type;return a.length===1&&(c===b("MercuryAudioType").AudioClip||c===b("MercuryAudioType").VoiceMessageWithTranscript)},_hasBusinessMessage:function(a){return this._hasSingleShareAttachmentOfStyle(a,b("StoryAttachmentStyle").BUSINESS_MESSAGE_ITEMS)},_hasSticker:function(a){return a.length===1&&a[0].attach_type===b("MercuryAttachmentType").STICKER},_hasLikeSticker:function(a){if(a.length<1)return!1;var c=a[0].metadata&&a[0].metadata.stickerID;return a.length===1&&(c==b("StickerConstants").LIKE_STICKER_ID||c==b("StickerConstants").HOT_LIKE_SMALL_STICKER_ID||c==b("StickerConstants").HOT_LIKE_MEDIUM_STICKER_ID||c==b("StickerConstants").HOT_LIKE_LARGE_STICKER_ID)},_hasLocation:function(a){return this._hasSingleShareAttachmentOfStyle(a,b("StoryAttachmentStyle").MESSAGE_LOCATION)},_hasLiveLocation:function(a){return this._hasSingleShareAttachmentOfStyle(a,b("StoryAttachmentStyle").MESSAGE_LIVE_LOCATION)},_hasMontageDirect:function(a){return this._hasSingleShareAttachmentOfStyle(a,b("StoryAttachmentStyle").MONTAGE_DIRECT)},_hasP2PPayment:function(a){return this._hasSingleShareAttachmentOfStyle(a,b("StoryAttachmentStyle").ORION)},_hasP2PPaymentRequest:function(a){return this._hasSingleShareAttachmentOfStyle(a,b("StoryAttachmentStyle").ORION_REQUEST)},_hasSingleShareAttachmentOfStyle:function(a,c){return a.length===1&&a[0].attach_type===b("MercuryAttachmentType").SHARE&&a[0].share.style_list.indexOf(c)>=0},_hasShare:function(a){return a.length===1&&a[0].attach_type===b("MercuryAttachmentType").SHARE},_hasError:function(a){return a.length===1&&a[0].attach_type===b("MercuryAttachmentType").ERROR},_hasGift:function(a){return a.length===1&&a[0].attach_type===b("MercuryAttachmentType").GIFT},_hasFile:function(a){return a.length===1&&a[0].attach_type===b("MercuryAttachmentType").FILE},_getPhotoAttachments:function(a){return!a?[]:a.filter(function(a){return a.attach_type===b("MercuryAttachmentType").PHOTO})},_getAnimatedImageAttachments:function(a){return!a?[]:a.filter(function(a){return a.attach_type===b("MercuryAttachmentType").ANIMATED_IMAGE})},_renderPhotoAttachmentSnippetText:function(a,b,c){if(c.length===1)if(a)return g._("\u5199\u771f\u3092\u9001\u4fe1\u3057\u307e\u3057\u305f\u3002");else return g._("{name}\u3055\u3093\u304c\u5199\u771f\u3092\u9001\u4fe1\u3057\u307e\u3057\u305f\u3002",[g._param("name",b)]);else if(a)return g._({"*":"\u5199\u771f{num_photos}\u679a\u3092\u9001\u4fe1\u3057\u307e\u3057\u305f\u3002"},[g._param("num_photos",c.length,[0])]);else return g._({"*":"{name}\u3055\u3093\u304c\u5199\u771f{num_photos}\u679a\u3092\u9001\u4fe1\u3057\u307e\u3057\u305f\u3002"},[g._param("name",b),g._param("num_photos",c.length,[0])])},_renderAnimatedImagesAttachmentSnippetText:function(a,b,c){if(c.length===1)if(a)return g._("GIF\u3092\u9001\u4fe1\u3057\u307e\u3057\u305f\u3002");else return g._("{name}\u3055\u3093\u304cGIF\u3092\u9001\u4fe1\u3057\u307e\u3057\u305f\u3002",[g._param("name",b)]);else if(a)return g._("GIF{num_animated_images}\u4ef6\u3092\u9001\u4fe1\u3057\u307e\u3057\u305f\u3002",[g._param("num_animated_images",c.length)]);else return g._("{name}\u3055\u3093\u304cGIF{num_animated_images}\u4ef6\u3092\u9001\u4fe1\u3057\u307e\u3057\u305f\u3002",[g._param("name",b),g._param("num_animated_images",c.length)])},_renderBusinessMessageSnippetText:function(a,b){a=a.share.target;a=a&&a.message||g._("{sender name}\u3055\u3093\u304c\u6dfb\u4ed8\u30d5\u30a1\u30a4\u30eb\u3092\u9001\u4fe1\u3057\u307e\u3057\u305f\u3002",[g._param("sender name",b)]);return a},_renderP2PPaymentSnippetText:function(a){a=a.share.target;return this.renderP2PPaymentSnippetText(b("CurrentUser").getID()===a.sender.id,a.sender.name,a.amountWithSymbol,a.status,b("CurrentUser").getID()===a.receiver.id,a.receiver.name)},_renderP2PPaymentRequestSnippetText:function(a){a=a.share.target;return this.renderP2PPaymentRequestSnippetText(b("CurrentUser").getID()===a.requester.id,a.requester.name,a.amountWithSymbol,a.currentStatus,b("CurrentUser").getID()===a.requestee.id,a.requestee.name)},renderP2PPaymentSnippetText:function(a,c,d,e,f,g){return b("P2PSnippetStringUtils").getTransferSnippetByStatus(e,a,f||!1,c||"",g||"",d)},renderP2PPaymentRequestSnippetText:function(a,c,d,e,f,g){return b("P2PSnippetStringUtils").getRequestSnippetByStatus(e,a,f||!1,c||"",g||"",d)}};e.exports=a}),null);